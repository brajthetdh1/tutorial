<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AWS Tutorial & Interview Guide</title>
  <meta name="description" content="Learn AWS step by step: setup EC2, S3, Lambda, RDS, and review interview questions.">
  <meta name="keywords" content="AWS, EC2, S3, Lambda, RDS, AWS tutorial, AWS interview questions, cloud computing">
  <meta name="author" content="Your Name">
  <link rel="icon" href="favicon.ico">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans text-gray-800">

  <!-- Header -->
<header class="bg-indigo-600 text-white fixed top-0 w-full z-50 shadow">
  <div class="container mx-auto flex justify-between items-center p-4">
    <!-- Logo / Title -->
    <h1 class="text-2xl font-bold">My Tutorials</h1>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex md:space-x-6 items-center">
      <a href="../index.html" class="hover:underline whitespace-nowrap">Home</a>
      <a href="../aws.html" class="hover:underline whitespace-nowrap">AWS</a>
    </nav>

    <!-- Mobile Hamburger -->
    <div class="md:hidden">
      <button id="menu-btn" class="focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav id="menu" class="hidden md:hidden bg-indigo-500">
    <div class="flex flex-col px-4 py-2 space-y-2">
      <a href="../index.html" class="hover:underline whitespace-nowrap">Home</a>
      <a href="../aws.html" class="hover:underline whitespace-nowrap">AWS</a>
    </div>
  </nav>

  <!-- Script for mobile toggle -->
  <script>
    const btn = document.getElementById('menu-btn');
    const menu = document.getElementById('menu');

    btn.addEventListener('click', () => {
      menu.classList.toggle('hidden');
    });
  </script>
</header>

  <!-- Main Content -->
  <main class="container mx-auto mt-24 p-4 space-y-10">




    <section id="ec2-setup" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2: Launch an Instance</h2>

  <p class="mb-4 text-gray-700">
    Amazon EC2 (Elastic Compute Cloud) lets you run virtual servers in the cloud. Follow these steps to launch your first instance:
  </p>

  <ol class="list-decimal list-inside space-y-4 text-gray-700">
    
    <li>
      <strong>Log in to AWS Management Console:</strong> 
      <p class="ml-4">Visit <a href="https://aws.amazon.com/console/" target="_blank" class="text-indigo-600 underline">AWS Console</a> and log in with your AWS account credentials. Ensure you are in the correct region where you want to deploy your EC2 instance.</p>
    </li>

    <li>
      <strong>Go to EC2 Dashboard → Launch Instance:</strong>
      <p class="ml-4">From the AWS Services menu, select <strong>EC2</strong>. In the EC2 Dashboard, click on <strong>Launch Instance</strong>. This will start the EC2 wizard to create a new virtual server.</p>
    </li>

    <li>
      <strong>Choose an Amazon Machine Image (AMI):</strong>
      <p class="ml-4">An AMI is a pre-configured operating system template. You can select Ubuntu, Amazon Linux, or other AMIs. Choose one based on your application requirements. For beginners, Amazon Linux 2 or Ubuntu 22.04 is recommended.</p>
    </li>

    <li>
      <strong>Select Instance Type:</strong>
      <p class="ml-4">Instance types define the CPU, memory, and network performance. For free-tier eligible users, <strong>t2.micro</strong> is sufficient. If you need more resources, choose a larger instance type accordingly.</p>
    </li>

    <li>
      <strong>Configure Instance Details:</strong>
      <p class="ml-4">Here you can set the number of instances, network, subnet, auto-assign public IP, and IAM role. Leave default settings for a simple setup, but ensure <strong>Auto-assign Public IP</strong> is enabled to connect via SSH.</p>
    </li>

    <li>
      <strong>Add Storage:</strong>
      <p class="ml-4">By default, AWS provides 8GB of storage. You can increase this depending on your application needs. Choose SSD for better performance.</p>
    </li>

    <li>
      <strong>Configure Security Group:</strong>
      <p class="ml-4">Security groups act as virtual firewalls. Allow SSH (port 22) so you can connect to your server. You can also allow HTTP (port 80) or HTTPS (port 443) if hosting a web app. Restrict access to your IP for better security.</p>
    </li>

    <li>
      <strong>Review and Launch:</strong>
      <p class="ml-4">Check all your settings. Click <strong>Launch</strong> and select an existing key pair or create a new one. Download the <strong>.pem</strong> key file—it’s required to connect to your EC2 instance.</p>
    </li>

    <li>
      <strong>Connect to your EC2 Instance:</strong>
      <p class="ml-4">Use the downloaded key pair to connect via SSH. Set permissions on the key file and connect:</p>
      <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
chmod 400 key.pem
ssh -i "key.pem" ec2-user@your-public-ip
      </pre>
      <p class="ml-4">Replace <code>your-public-ip</code> with the public IPv4 address of your EC2 instance.</p>
    </li>

  </ol>

  <div class="mt-6">
    <img src="images/ec2-launch.png" alt="EC2 Launch Instance Screenshot" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-configure" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Configure Instance Details</h2>

  <p class="mb-4 text-gray-700">
    This step lets you define how your EC2 instance behaves in the network and environment. Here’s what each option means:
  </p>

  <ul class="list-disc list-inside space-y-3 text-gray-700">
    <li>
      <strong>Number of Instances:</strong>
      <p class="ml-4">Set how many EC2 instances you want to launch. For beginners, leave it as <code>1</code>.</p>
    </li>

    <li>
      <strong>Network:</strong>
      <p class="ml-4">Select the Virtual Private Cloud (VPC) in which the instance will run. The default VPC is suitable for most cases.</p>
    </li>

    <li>
      <strong>Subnet:</strong>
      <p class="ml-4">Choose a subnet within your selected VPC. Subnets determine the availability zone of your instance. For high availability, you can launch instances in different subnets.</p>
    </li>

    <li>
      <strong>Auto-assign Public IP:</strong>
      <p class="ml-4">Enable this to automatically assign a public IP so you can SSH into your instance. If disabled, you need a NAT or elastic IP for connectivity.</p>
    </li>

    <li>
      <strong>IAM Role:</strong>
      <p class="ml-4">Select an IAM role to grant permissions for your EC2 instance to access AWS services. For example, if your instance needs S3 access, attach a role with S3 permissions.</p>
    </li>

    <li>
      <strong>Shutdown Behavior:</strong>
      <p class="ml-4">Choose whether the instance stops or terminates when you shut it down. Usually, <strong>Stop</strong> is recommended for experimentation.</p>
    </li>

    <li>
      <strong>Enable Termination Protection:</strong>
      <p class="ml-4">Protects your instance from accidental termination. Enable this if you don’t want the instance deleted by mistake.</p>
    </li>

    <li>
      <strong>Monitoring (CloudWatch):</strong>
      <p class="ml-4">Enable detailed monitoring to track CPU, network, and disk usage every minute. Free tier includes basic monitoring.</p>
    </li>

    <li>
      <strong>Advanced Details:</strong>
      <p class="ml-4">Optionally, you can add user data scripts to run at launch, such as installing software or configuring services automatically.</p>
    </li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-configure.png" alt="EC2 Configure Instance Details Screenshot" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-networking" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Networking & Public IP in EC2</h2>

  <p class="mb-4 text-gray-700">
    When launching an EC2 instance, networking configuration determines how your instance communicates with the internet, other AWS resources, and your local computer.
  </p>

  <ul class="list-disc list-inside space-y-3 text-gray-700">
    
    <li>
      <strong>VPC (Virtual Private Cloud):</strong>
      <p class="ml-4">
        A VPC is your private network in AWS. Every EC2 instance must be launched inside a VPC. You can think of it as a virtual data center where you control IP ranges, subnets, and routing.
      </p>
    </li>

    <li>
      <strong>Subnet:</strong>
      <p class="ml-4">
        A subnet is a segment of your VPC. Each subnet resides in a specific availability zone. You can have public subnets (accessible from the internet) or private subnets (internal-only). Choosing a public subnet is necessary if your EC2 instance needs a public IP.
      </p>
    </li>

    <li>
      <strong>Auto-assign Public IP:</strong>
      <p class="ml-4">
        This option automatically assigns a public IPv4 address to your EC2 instance so it can communicate with the internet. This is crucial if you want to SSH into the instance or host a website.
      </p>
      <p class="ml-4 font-semibold">Key Points:</p>
      <ul class="list-disc list-inside ml-8 space-y-1">
        <li>If you don’t enable this, your instance will only have a private IP, accessible only within the VPC or through a VPN.</li>
        <li>Public IPs are dynamic by default—they can change if the instance is stopped and started.</li>
        <li>To have a static public IP, use an <strong>Elastic IP</strong> and attach it to your instance.</li>
      </ul>
    </li>

    <li>
      <strong>Private IP:</strong>
      <p class="ml-4">
        Every EC2 instance gets a private IP within the VPC subnet. Private IPs are used for internal communication between instances or services inside the VPC.
      </p>
    </li>

    <li>
      <strong>Security Groups:</strong>
      <p class="ml-4">
        Security groups act like a virtual firewall. If you assign a public IP, make sure the security group allows inbound SSH (port 22) or HTTP/HTTPS (ports 80/443) traffic as required.
      </p>
    </li>

    <li>
      <strong>Elastic IPs:</strong>
      <p class="ml-4">
        Elastic IPs are static public IPs that don’t change when you stop or start an instance. They are useful for production servers or when you need a permanent IP address for DNS records.
      </p>
    </li>

  </ul>

  <div class="mt-4">
    <img src="images/ec2-networking.png" alt="EC2 Networking and Public IP Diagram" class="w-full max-w-xl mx-auto rounded shadow">
  </div>

  <p class="mt-4 text-gray-700">
    <strong>Summary:</strong> If you want your EC2 instance to be accessible from the internet, launch it in a public subnet and enable <strong>Auto-assign Public IP</strong> or attach an Elastic IP. Otherwise, your instance will only be reachable internally within AWS.
  </p>
</section>


<section id="ec2-ip" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Networking: Understanding Public and Private IPs</h2>

  <p class="mb-4 text-gray-700">
    Every EC2 instance you launch in AWS is assigned an IP address so that it can communicate with other resources. 
    Understanding the difference between <strong>private IPs</strong>, <strong>public IPs</strong>, and <strong>Elastic IPs</strong> is critical for networking, security, and accessing your instance from the internet.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Private IP</h3>
  <p class="mb-2 ml-4 text-gray-700">
    A private IP is automatically assigned to your EC2 instance within the subnet of your Virtual Private Cloud (VPC). 
    This IP is used for internal communication between instances within the same VPC or connected networks.
  </p>
  <p class="ml-4 text-gray-700">
    <strong>Example:</strong> Your EC2 instance gets a private IP like <code class="bg-gray-100 p-1 rounded">10.0.1.25</code>. You can connect to other instances in the same VPC using this IP. 
    However, you cannot reach this instance from the internet using the private IP.
  </p>

  <h3 class="text-xl font-semibold mb-2">2. Public IP (Auto-assign)</h3>
  <p class="mb-2 ml-4 text-gray-700">
    When you enable <strong>Auto-assign Public IP</strong> while launching an instance, AWS automatically assigns a public IPv4 address to your instance. 
    This allows the instance to communicate with the internet, which is necessary if you want to SSH into your server or host a web application.
  </p>
  <p class="ml-4 text-gray-700">
    <strong>Example:</strong> Your instance gets a public IP like <code class="bg-gray-100 p-1 rounded">18.223.45.67</code>. You can connect from your local computer using:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm">
ssh -i "my-key.pem" ec2-user@18.223.45.67
  </pre>
  <p class="ml-4 text-gray-700">
    Note that auto-assigned public IPs are <strong>dynamic</strong>. If you stop and start the instance, AWS may assign a new public IP. Therefore, for production or consistent access, you might need an Elastic IP.
  </p>

  <h3 class="text-xl font-semibold mb-2">3. Elastic IP (Static Public IP)</h3>
  <p class="mb-2 ml-4 text-gray-700">
    An Elastic IP (EIP) is a static public IPv4 address provided by AWS. Unlike the auto-assigned public IP, an Elastic IP does not change even if you stop and start your instance. 
    Elastic IPs are especially useful for hosting websites, APIs, or any service where a fixed IP is required.
  </p>
  <p class="ml-4 text-gray-700">
    <strong>Example:</strong> You allocate an Elastic IP <code class="bg-gray-100 p-1 rounded">3.210.12.34</code> and attach it to your EC2 instance. 
    You can point your domain name (e.g., <code>mywebsite.com</code>) to this Elastic IP, ensuring consistent access even after instance restarts.
  </p>

  <h3 class="text-xl font-semibold mb-2">Summary & Tips</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use <strong>private IPs</strong> for internal AWS communication between instances.</li>
    <li>Enable <strong>Auto-assign Public IP</strong> only if you need internet access temporarily.</li>
    <li>Use <strong>Elastic IPs</strong> for production or any service requiring a permanent public IP.</li>
    <li>Always configure your security group to allow inbound traffic for SSH, HTTP, or HTTPS if using public IPs.</li>
    <li>Remember: public IPs are reachable over the internet, so never expose sensitive services without proper security.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-networking.png" alt="EC2 Networking: Private IP, Public IP, Elastic IP" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-connect" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Connecting to Your EC2 Instance</h2>

  <p class="mb-4 text-gray-700">
    After launching your EC2 instance, the next step is to connect to it. AWS uses <strong>SSH (Secure Shell)</strong> for secure remote access. 
    You will use the key pair (.pem file) you downloaded during instance creation.
  </p>

  <h3 class="text-xl font-semibold mb-2">Step 1: Locate Your Key Pair</h3>
  <p class="ml-4 text-gray-700">
    Ensure that you have downloaded the key pair (e.g., <code class="bg-gray-100 p-1 rounded">my-key.pem</code>) while launching your EC2 instance. 
    This file is required to authenticate your SSH connection.
  </p>

  <h3 class="text-xl font-semibold mb-2">Step 2: Set Permissions on the Key</h3>
  <p class="ml-4 text-gray-700">
    On your local machine (Linux/Mac), open a terminal and run:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm">
chmod 400 my-key.pem
  </pre>
  <p class="ml-4 text-gray-700">
    This ensures that your private key file has the correct permissions. SSH will refuse to use a key that is publicly viewable.
  </p>

  <h3 class="text-xl font-semibold mb-2">Step 3: Connect via SSH</h3>
  <p class="ml-4 text-gray-700">
    Find the <strong>Public IPv4 address</strong> of your instance from the EC2 Dashboard. Then connect using the SSH command:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm">
ssh -i "my-key.pem" ec2-user@18.223.45.67
  </pre>
  <p class="ml-4 text-gray-700">
    Replace <code>18.223.45.67</code> with your instance’s public IP. For Ubuntu AMIs, use <code>ubuntu</code> as the username:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm">
ssh -i "my-key.pem" ubuntu@your-public-ip
  </pre>

  <h3 class="text-xl font-semibold mb-2">Step 4: Verify Connection</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>After running the SSH command, you should see a welcome message and command prompt of your EC2 instance.</li>
    <li>Run <code>uname -a</code> or <code>uptime</code> to verify your instance is running correctly.</li>
    <li>If connection fails, check:
      <ul class="list-disc list-inside ml-6">
        <li>Your security group allows inbound SSH (port 22).</li>
        <li>The correct key pair (.pem) is used.</li>
        <li>The public IP is correct.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2">Example Connection Flow</h3>
  <p class="ml-4 text-gray-700">
    <strong>Step-by-step:</strong>
  </p>
  <ol class="list-decimal list-inside ml-6 space-y-2 text-gray-700">
    <li>Download key pair <code>my-key.pem</code> from AWS console.</li>
    <li>Open terminal and run: <code>chmod 400 my-key.pem</code></li>
    <li>Find public IP of instance: <code>18.223.45.67</code></li>
    <li>Run SSH command: <code>ssh -i "my-key.pem" ec2-user@18.223.45.67</code></li>
    <li>Access terminal prompt of EC2 and start managing your server!</li>
  </ol>

  <div class="mt-4">
    <img src="images/ec2-connect.png" alt="Connecting to EC2 via SSH" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-storage" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Storage: Understanding EBS and Instance Store</h2>

  <p class="mb-4 text-gray-700">
    Amazon EC2 instances require storage to save data, operating systems, and applications. AWS provides two main storage options:
    <strong>EBS (Elastic Block Store)</strong> and <strong>Instance Store</strong>.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Elastic Block Store (EBS)</h3>
  <p class="ml-4 mb-2 text-gray-700">
    EBS provides persistent block-level storage for your EC2 instances. Data on EBS volumes remains intact even if the EC2 instance is stopped or terminated (unless you delete the volume). EBS volumes are like virtual hard drives attached to your instance.
  </p>

  <p class="ml-4 text-gray-700">
    <strong>Key Features:</strong>
  </p>
  <ul class="list-disc list-inside ml-8 space-y-2 text-gray-700">
    <li>Persistent storage — survives instance stop/start.</li>
    <li>Supports snapshots for backups.</li>
    <li>Choose volume type: SSD (gp3/gp2), HDD (st1/sc1) depending on performance and cost.</li>
  </ul>

  <h4 class="text-lg font-semibold mt-2 mb-1 ml-4">Example:</h4>
  <p class="ml-6 text-gray-700">
    When launching an EC2 instance, AWS automatically creates an 8 GB EBS volume attached as <code class="bg-gray-100 p-1 rounded">/dev/xvda</code> (root volume). You can add extra volumes:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-6">
Volume Name: /dev/xvdb
Size: 20 GB
Type: gp3 (SSD)
  </pre>
  <p class="ml-6 text-gray-700">
    This extra volume can be mounted inside the instance at <code class="bg-gray-100 p-1 rounded">/mnt/data</code> to store application data.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Instance Store (Ephemeral Storage)</h3>
  <p class="ml-4 mb-2 text-gray-700">
    Instance store provides temporary block-level storage physically attached to the host machine. This storage is **ephemeral**, meaning all data is lost if the instance stops, terminates, or fails.
  </p>
  <p class="ml-4 text-gray-700">
    <strong>Use Case:</strong> Ideal for cache, temporary files, or data replicated elsewhere.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Connecting Storage to Your EC2 Instance</h3>
  <p class="ml-4 text-gray-700">
    After launching the instance and adding extra EBS volumes, you need to mount them inside your instance:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# List available disks
lsblk

# Format new volume (example: /dev/xvdb)
sudo mkfs -t ext4 /dev/xvdb

# Create mount point
sudo mkdir /mnt/data

# Mount volume
sudo mount /dev/xvdb /mnt/data

# Make persistent (optional, add to /etc/fstab)
echo '/dev/xvdb /mnt/data ext4 defaults,nofail 0 2' | sudo tee -a /etc/fstab
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">Summary & Tips</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Root volume is always an EBS volume.</li>
    <li>Use EBS for persistent data; instance store only for temporary/cache data.</li>
    <li>Snapshots of EBS volumes help in backup and disaster recovery.</li>
    <li>Mount additional volumes to /mnt or any directory as required.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-storage.png" alt="EC2 Storage: EBS and Instance Store" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-storage-usage" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Using Storage in EC2: EBS and Instance Store</h2>

  <p class="mb-4 text-gray-700">
    When you launch an EC2 instance, it requires storage for the operating system, applications, and data. AWS provides two types of storage:
    <strong>Elastic Block Store (EBS)</strong> for persistent storage and <strong>Instance Store</strong> for temporary storage. This section explains how to use storage effectively with examples.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Elastic Block Store (EBS)</h3>
  <p class="ml-4 mb-2 text-gray-700">
    EBS provides persistent block-level storage volumes. Data on EBS volumes remains intact even if you stop or terminate the instance (unless the volume is deleted). EBS volumes behave like virtual hard drives attached to your EC2 instance.
  </p>

  <ul class="list-disc list-inside ml-8 space-y-2 text-gray-700">
    <li>Root volume is automatically created when launching an instance (e.g., 8 GB gp3 SSD).</li>
    <li>Additional volumes can be attached for storing application data, logs, or backups.</li>
    <li>Supports snapshots for backup and disaster recovery.</li>
    <li>Volume types: SSD (gp2, gp3) for performance, HDD (st1, sc1) for cost-effective storage.</li>
  </ul>

  <h4 class="text-lg font-semibold mt-2 mb-1 ml-4">Example: Adding an EBS Volume</h4>
  <p class="ml-6 text-gray-700">
    Suppose you want to add a 20 GB SSD volume for application data:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-6">
Volume Name: /dev/xvdb
Size: 20 GB
Type: gp3 (SSD)
  </pre>
  <p class="ml-6 text-gray-700">
    You can attach this volume to your instance and mount it to a directory like <code class="bg-gray-100 p-1 rounded">/mnt/data</code>.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Instance Store (Ephemeral Storage)</h3>
  <p class="ml-4 mb-2 text-gray-700">
    Instance store provides temporary block storage physically attached to the host machine. It is ephemeral — all data is lost when the instance stops, terminates, or fails.
  </p>
  <p class="ml-4 text-gray-700">
    Use cases: cache, temporary files, swap space, or high-speed temporary storage.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Mounting and Using EBS Volumes</h3>
  <p class="ml-4 text-gray-700">
    After attaching an EBS volume to your EC2 instance, you need to format and mount it to use it.
  </p>

  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# List attached volumes
lsblk

# Format new volume (example: /dev/xvdb)
sudo mkfs -t ext4 /dev/xvdb

# Create a mount point
sudo mkdir /mnt/data

# Mount the volume
sudo mount /dev/xvdb /mnt/data

# Verify mounted volumes
df -h

# Make mounting persistent (edit /etc/fstab)
echo '/dev/xvdb /mnt/data ext4 defaults,nofail 0 2' | sudo tee -a /etc/fstab
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Practical Example: Storing Application Data</h3>
  <p class="ml-4 text-gray-700">
    Suppose you are running a web application that generates log files. You can mount an additional EBS volume to <code class="bg-gray-100 p-1 rounded">/mnt/data</code> and store logs there:
  </p>

  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Navigate to data directory
cd /mnt/data

# Create log folder
mkdir app-logs

# Save logs
echo "Server started at $(date)" >> app-logs/server.log
  </pre>
  <p class="ml-4 text-gray-700">
    The logs are stored on the EBS volume, so even if you stop and restart the EC2 instance, your data remains intact.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Summary & Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **EBS volumes** for persistent storage like databases, application data, and backups.</li>
    <li>Use **instance store** for temporary storage like cache or high-speed processing files.</li>
    <li>Always **format and mount volumes** after attaching them to the instance.</li>
    <li>Use **snapshots** to backup critical EBS volumes.</li>
    <li>Mount volumes to directories like <code>/mnt/data</code> or <code>/var/www</code> for organized storage.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-storage-usage.png" alt="EC2 Storage Usage: EBS and Instance Store Example" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-security" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Security Groups: Controlling Access</h2>

  <p class="mb-4 text-gray-700">
    Security Groups (SGs) in AWS act as **virtual firewalls** for your EC2 instances. They control inbound and outbound traffic, allowing only authorized connections. Each EC2 instance must be associated with at least one security group.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Key Concepts</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>Inbound Rules:</strong> Define the traffic allowed **into the instance**. For example, SSH on port 22 or HTTP on port 80.
    </li>
    <li>
      <strong>Outbound Rules:</strong> Define the traffic allowed **out from the instance**. By default, all outbound traffic is allowed.
    </li>
    <li>
      <strong>Stateful Rules:</strong> Security groups are stateful. If you allow inbound traffic on a port, the response is automatically allowed outbound.
    </li>
    <li>
      <strong>Multiple SGs:</strong> An instance can have multiple security groups, and rules are aggregated.
    </li>
    <li>
      <strong>Source/Destination:</strong> You can restrict access by IP (e.g., `203.0.113.5/32`) or by another security group.
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Example: Allowing SSH and HTTP Access</h3>
  <p class="ml-4 text-gray-700">
    Suppose you launch an EC2 instance and want:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>SSH access from your local machine only.</li>
    <li>HTTP access for everyone on the internet.</li>
  </ul>

  <h4 class="text-lg font-semibold mt-2 mb-1 ml-4">Inbound Rules</h4>
  <table class="table-auto border border-gray-300 ml-4 mb-4">
    <thead>
      <tr class="bg-gray-100">
        <th class="px-4 py-2 border">Type</th>
        <th class="px-4 py-2 border">Protocol</th>
        <th class="px-4 py-2 border">Port Range</th>
        <th class="px-4 py-2 border">Source</th>
      </tr>
    </thead>
    <tbody>
      <tr class="bg-white">
        <td class="px-4 py-2 border">SSH</td>
        <td class="px-4 py-2 border">TCP</td>
        <td class="px-4 py-2 border">22</td>
        <td class="px-4 py-2 border">203.0.113.5/32 (your IP)</td>
      </tr>
      <tr class="bg-white">
        <td class="px-4 py-2 border">HTTP</td>
        <td class="px-4 py-2 border">TCP</td>
        <td class="px-4 py-2 border">80</td>
        <td class="px-4 py-2 border">0.0.0.0/0 (anywhere)</td>
      </tr>
    </tbody>
  </table>

  <h4 class="text-lg font-semibold mt-2 mb-1 ml-4">Outbound Rules (Default)</h4>
  <p class="ml-4 text-gray-700">
    By default, all outbound traffic is allowed:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-1 text-gray-700">
    <li>Protocol: All traffic</li>
    <li>Port Range: All ports</li>
    <li>Destination: 0.0.0.0/0 (anywhere)</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Attaching a Security Group to an EC2 Instance</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to the EC2 Dashboard and select your instance.</li>
    <li>Click on the <strong>Security</strong> tab → <strong>Security Groups</strong>.</li>
    <li>Choose an existing security group or create a new one.</li>
    <li>Add inbound rules for SSH, HTTP, or HTTPS as needed.</li>
    <li>Save the security group and ensure it is attached to the instance.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario</h3>
  <p class="ml-4 text-gray-700">
    You want to run a web server on EC2 accessible globally and allow only your IP to SSH:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Inbound Rule: SSH TCP port 22 → Source: <code>203.0.113.5/32</code></li>
    <li>Inbound Rule: HTTP TCP port 80 → Source: <code>0.0.0.0/0</code></li>
    <li>Outbound Rule: All traffic allowed (default)</li>
  </ul>
  <p class="ml-4 text-gray-700">
    Now you can connect via SSH and serve web pages to anyone on the internet while keeping your SSH access restricted.
  </p>

  <div class="mt-4">
    <img src="images/ec2-security-group.png" alt="EC2 Security Group Example" class="w-full max-w-xl mx-auto rounded shadow">
  </div>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Restrict SSH access to specific IPs only.</li>
    <li>Do not allow 0.0.0.0/0 for sensitive ports like SSH in production.</li>
    <li>Use separate security groups for different types of access (web, database, admin).</li>
    <li>Regularly review and remove unused rules or groups.</li>
  </ul>
</section>


<section id="aws-free-tier" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">AWS Free Tier: Explore AWS for Free</h2>

  <p class="mb-4 text-gray-700">
    AWS Free Tier is a program that allows new users to explore AWS services **for free** within specific usage limits. It’s ideal for learning, testing, and running small applications without incurring costs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Types of Free Tier</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>12-Month Free Tier:</strong> Free for the first 12 months after creating an AWS account.
      Example: <strong>EC2 t2.micro</strong> instance usage of 750 hours/month.
    </li>
    <li>
      <strong>Always Free:</strong> Some services have permanent free limits.
      Example: <strong>Lambda</strong> 1M requests/month or <strong>DynamoDB</strong> 25 GB storage.
    </li>
    <li>
      <strong>Trials:</strong> Short-term free trials for specific services.
      Example: Amazon Redshift 2 months free trial.
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Example: Using EC2 Free Tier</h3>
  <p class="ml-4 text-gray-700">
    You can launch an EC2 instance under the free tier to run small applications:
  </p>
  <ol class="list-decimal list-inside ml-6 space-y-2 text-gray-700">
    <li>Log in to AWS Management Console → EC2 Dashboard → Launch Instance.</li>
    <li>Select Amazon Linux 2 AMI or Ubuntu (eligible for free tier).</li>
    <li>Select instance type: <code>t2.micro</code> or <code>t3.micro</code> (750 hours/month free).</li>
    <li>Add storage (up to 30 GB of EBS free per month is included).</li>
    <li>Configure security group to allow SSH (port 22) and optional HTTP/HTTPS.</li>
    <li>Launch instance and download the key pair.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Example: Using S3 Free Tier</h3>
  <p class="ml-4 text-gray-700">
    Amazon S3 offers 5 GB of standard storage free per month. Example usage:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Create an S3 bucket
aws s3 mb s3://my-tutorial-bucket

# Upload a file
aws s3 cp tutorial.pdf s3://my-tutorial-bucket/

# List files
aws s3 ls s3://my-tutorial-bucket/
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Other Notable Free Tier Services</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>RDS:</strong> 750 hours/month of db.t2.micro instance and 20 GB storage.</li>
    <li><strong>Lambda:</strong> 1M free requests/month and 400,000 GB-seconds compute time.</li>
    <li><strong>DynamoDB:</strong> 25 GB storage and 25 write/read capacity units free.</li>
    <li><strong>CloudFront:</strong> 1 TB data transfer out per month.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Tips for Using AWS Free Tier</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always check the <strong>Free Tier usage dashboard</strong> to avoid unexpected charges.</li>
    <li>Use the free tier for learning and testing small projects.</li>
    <li>Delete unused resources (EC2 instances, S3 buckets, RDS instances) to prevent charges.</li>
    <li>Monitor billing alerts to stay within free tier limits.</li>
  </ul>

  <div class="mt-4">
    <img src="images/aws-free-tier.png" alt="AWS Free Tier Services" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="aws-avoid-charges" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Avoiding Unexpected AWS Charges</h2>

  <p class="mb-4 text-gray-700">
    AWS provides a wide range of services, some of which are free under the Free Tier while others are paid. Even within the Free Tier, exceeding usage limits can result in charges. This section explains how to avoid unexpected costs with practical examples.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Monitor Free Tier Usage</h3>
  <p class="ml-4 text-gray-700">
    AWS provides a <strong>Free Tier Usage Dashboard</strong> that tracks your monthly usage. Always check it regularly.
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Navigate in AWS Console:
Account → Billing → Free Tier Usage
  </pre>
  <p class="ml-4 text-gray-700">
    Example: If you use more than 750 hours of EC2 t2.micro instances per month, you will be billed for the excess hours.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Delete Unused Resources</h3>
  <p class="ml-4 text-gray-700">
    Many AWS services incur charges as long as resources exist, even if not in use. Always delete or stop resources when done.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>EC2 Instances → Stop or terminate when not needed.</li>
    <li>EBS Volumes → Delete unattached volumes to avoid storage charges.</li>
    <li>RDS Databases → Delete or stop instances when not in use.</li>
    <li>S3 Buckets → Remove unused objects to save storage costs.</li>
  </ul>
  <p class="ml-4 text-gray-700">
    <strong>Example:</strong> If you created an EC2 instance for a tutorial and forgot to terminate it, you could be billed $10–15 for a month even if you didn’t use it actively.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Use Budget and Billing Alerts</h3>
  <p class="ml-4 text-gray-700">
    AWS allows you to set budgets and alerts to receive notifications when spending exceeds a threshold.
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Create a budget in AWS Console:
Account → Billing → Budgets → Create Budget
  </pre>
  <p class="ml-4 text-gray-700">
    Example: Set a monthly budget of $5 for Free Tier projects. AWS will send an alert if you approach the limit.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Choose Free Tier Eligible Services</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 → t2.micro or t3.micro for 750 hours/month.</li>
    <li>S3 → 5 GB standard storage free.</li>
    <li>Lambda → 1M free requests/month.</li>
    <li>DynamoDB → 25 GB storage free.</li>
  </ul>
  <p class="ml-4 text-gray-700">
    Avoid using paid instances or larger storage volumes unless necessary.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario: Avoiding Charges with EC2</h3>
  <p class="ml-4 text-gray-700">
    Suppose you are experimenting with EC2 and want to stay within Free Tier:
  </p>
  <ol class="list-decimal list-inside ml-6 space-y-2 text-gray-700">
    <li>Launch a <code>t2.micro</code> instance (Free Tier eligible).</li>
    <li>Use only 1 instance for testing (750 hours/month limit).</li>
    <li>Attach minimal EBS storage (max 30 GB free per month).</li>
    <li>Stop or terminate the instance when done.</li>
    <li>Check Free Tier Usage Dashboard weekly.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Additional Tips</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable AWS Billing Alerts for real-time notifications.</li>
    <li>Tag your resources for easy identification and management.</li>
    <li>Use CloudWatch to monitor resource usage.</li>
    <li>Be cautious with high-cost services like Redshift, EMR, or large S3 storage.</li>
  </ul>

  <div class="mt-4">
    <img src="images/aws-avoid-charges.png" alt="Avoiding AWS Charges" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-free-tier-java" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Running a Java Application on EC2 Free Tier</h2>

  <p class="mb-4 text-gray-700">
    AWS Free Tier allows new users to run EC2 instances within certain limits without incurring charges. This section explains how to launch a Free Tier EC2 instance, set up Java, and run a simple Java application.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Launch a Free Tier EC2 Instance</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>Log in to the AWS Management Console and navigate to <strong>EC2 Dashboard</strong> → <strong>Launch Instance</strong>.</li>
    <li>Select an Amazon Machine Image (AMI):
      <ul class="list-disc list-inside ml-6">
        <li>Amazon Linux 2 (Free Tier eligible)</li>
        <li>Ubuntu Server 20.04 LTS (Free Tier eligible)</li>
      </ul>
    </li>
    <li>Select instance type: <code>t2.micro</code> or <code>t3.micro</code> (Free Tier eligible, 750 hours/month).</li>
    <li>Add storage: Up to 30 GB EBS (Free Tier eligible).</li>
    <li>Configure a security group:
      <ul class="list-disc list-inside ml-6">
        <li>Allow SSH (port 22) from your IP.</li>
        <li>Optional: Allow HTTP (port 80) if running a web app.</li>
      </ul>
    </li>
    <li>Launch the instance and download the key pair (<code>.pem</code> file).</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Connect to Your EC2 Instance via SSH</h3>
  <p class="ml-4 text-gray-700">
    Use your terminal to connect to the instance:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
chmod 400 my-key.pem
ssh -i "my-key.pem" ec2-user@your-public-ip
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Install Java on EC2</h3>
  <p class="ml-4 text-gray-700">
    Amazon Linux 2 provides Amazon Corretto (OpenJDK) via yum:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Update packages
sudo yum update -y

# Install Java 17 (Corretto)
sudo amazon-linux-extras enable corretto17
sudo yum install -y java-17-amazon-corretto-devel

# Verify installation
java -version
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Create and Run a Sample Java Application</h3>
  <p class="ml-4 text-gray-700">
    Create a simple Java program to verify Java is working:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Create file
nano HelloWorld.java

# Paste this code
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello from EC2 Free Tier!");
    }
}

# Save and exit (Ctrl+O, Enter, Ctrl+X)

# Compile and run
javac HelloWorld.java
java HelloWorld

# Output:
Hello from EC2 Free Tier!
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Running a Java Web Application</h3>
  <p class="ml-4 text-gray-700">
    You can run a web application using Spring Boot or Tomcat on the Free Tier EC2 instance:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Upload your Spring Boot JAR: <code>scp -i my-key.pem myapp.jar ec2-user@your-public-ip:~/</code></li>
    <li>Run your app: <code>java -jar myapp.jar</code></li>
    <li>Access via public IP on port 8080 (ensure security group allows this port).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Avoiding Charges on Free Tier</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use only one <code>t2.micro</code> instance at a time to stay within 750 hours/month.</li>
    <li>Stop or terminate the EC2 instance when not in use.</li>
    <li>Delete any additional EBS volumes to avoid storage charges.</li>
    <li>Check Free Tier Usage Dashboard weekly to monitor usage.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-free-tier-java.png" alt="EC2 Free Tier with Java" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-java" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Using EC2 for Java Applications</h2>

  <p class="mb-4 text-gray-700">
    Amazon EC2 is a flexible and scalable cloud compute platform ideal for running Java applications. This section walks you through launching an EC2 instance, installing Java, and running a simple Java program.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Launch an EC2 Instance</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>Log in to AWS Management Console.</li>
    <li>Go to <strong>EC2 Dashboard</strong> → <strong>Launch Instance</strong>.</li>
    <li>Select an Amazon Machine Image (AMI):
      <ul class="list-disc list-inside ml-6">
        <li>Amazon Linux 2 (recommended for Java setup)</li>
        <li>Ubuntu Server 20.04 LTS</li>
      </ul>
    </li>
    <li>Select instance type (e.g., <code>t2.micro</code> for free tier).</li>
    <li>Configure instance details, add storage, and assign a Security Group:
      <ul class="list-disc list-inside ml-6">
        <li>Allow SSH (port 22) from your IP</li>
        <li>Optional: HTTP/HTTPS ports if you plan to run web apps</li>
      </ul>
    </li>
    <li>Launch instance and download the key pair (<code>.pem</code> file).</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Connect via SSH</h3>
  <p class="ml-4 text-gray-700">
    Open a terminal and connect to your EC2 instance using the public IP:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
chmod 400 my-key.pem
ssh -i "my-key.pem" ec2-user@your-public-ip
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Install Java</h3>
  <p class="ml-4 text-gray-700">
    Amazon Linux 2 comes with Amazon Corretto (OpenJDK) available via yum:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Update packages
sudo yum update -y

# Install Java 17 (Corretto)
sudo amazon-linux-extras enable corretto17
sudo yum install -y java-17-amazon-corretto-devel

# Verify installation
java -version
  </pre>
  <p class="ml-4 text-gray-700">
    You should see output similar to:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
openjdk version "17.0.8" 2023-07-18 LTS
OpenJDK Runtime Environment Corretto-17.0.8.0.1
OpenJDK 64-Bit Server VM Corretto-17.0.8.0.1
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Running a Sample Java Application</h3>
  <p class="ml-4 text-gray-700">
    Create a simple “Hello World” Java program:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Create a file HelloWorld.java
nano HelloWorld.java

# Paste the following code
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello from EC2!");
    }
}

# Save and exit (Ctrl+O, Enter, Ctrl+X)
  </pre>

  <p class="ml-4 text-gray-700">
    Compile and run the program:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Compile
javac HelloWorld.java

# Run
java HelloWorld

# Output:
Hello from EC2!
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Deploying a Java Web Application</h3>
  <p class="ml-4 text-gray-700">
    You can also deploy web applications using a Java server like Tomcat or Spring Boot:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Install Tomcat or run a Spring Boot JAR: <code>java -jar myapp.jar</code></li>
    <li>Ensure Security Group allows HTTP/HTTPS ports (80/443)</li>
    <li>Access your application via public IP or domain name</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use Security Groups to restrict SSH access to your IP only.</li>
    <li>Use Elastic IP for consistent access to your server.</li>
    <li>Back up your data with EBS snapshots.</li>
    <li>Keep your system updated: <code>sudo yum update -y</code></li>
    <li>Use proper user roles and IAM policies for security.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-java.png" alt="EC2 for Java Example" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-cli-launch" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Launching an EC2 Instance Using AWS CLI with a Specific AMI</h2>

  <p class="mb-4 text-gray-700">
    AWS CLI provides a fast and reproducible way to launch EC2 instances. You can specify the AMI ID, instance type, key pair, security groups, and subnet directly in the command.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Prerequisites</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Install and configure <code>awscli</code> with access key, secret key, and default region.</li>
    <li>Identify the **AMI ID** you want to use (e.g., Ubuntu 22.04 in us-east-1).</li>
    <li>Have a **key pair** for SSH access.</li>
    <li>Know the **subnet ID** and **security group ID** for your instance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Launch Command Example</h3>
  <pre class="bg-gray-100 p-4 rounded text-sm overflow-x-auto">
aws ec2 run-instances \
  --image-id ami-0abcdef1234567890 \
  --count 1 \
  --instance-type t2.micro \
  --key-name MyKeyPair \
  --security-group-ids sg-0123456789abcdef0 \
  --subnet-id subnet-0ab1c2d3e4f567890 \
  --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=MyEC2Instance}]'
  </pre>

  <p class="mb-4 text-gray-700">
    <strong>Explanation:</strong>
  </p>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><code>--image-id</code>: The AMI ID to use for the instance.</li>
    <li><code>--count</code>: Number of instances to launch.</li>
    <li><code>--instance-type</code>: EC2 instance type (e.g., t2.micro).</li>
    <li><code>--key-name</code>: Name of the SSH key pair for access.</li>
    <li><code>--security-group-ids</code>: Security groups attached to the instance.</li>
    <li><code>--subnet-id</code>: Subnet where the instance will reside.</li>
    <li><code>--tag-specifications</code>: Optional tags for identification.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Verify Instance Launch</h3>
  <pre class="bg-gray-100 p-4 rounded text-sm overflow-x-auto">
aws ec2 describe-instances \
  --filters "Name=instance-state-name,Values=pending,running" \
  --query "Reservations[*].Instances[*].[InstanceId,State.Name,PublicIpAddress,Tags]" \
  --output table
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Connect via SSH</h3>
  <pre class="bg-gray-100 p-4 rounded text-sm overflow-x-auto">
ssh -i "MyKeyPair.pem" ec2-user@<Public-IP-of-Instance>
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always launch instances in private subnets if possible and use NAT or Bastion hosts for access.</li>
    <li>Use tags for cost allocation and identification per environment or project.</li>
    <li>Consider using **Launch Templates** to standardize instance configurations.</li>
    <li>For production workloads, enable **CloudWatch monitoring** and **detailed metrics**.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cli-launch.png" alt="EC2 CLI Launch Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-change-instance-type" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Changing EC2 Instance Type Without Downtime</h2>

  <p class="mb-4 text-gray-700">
    Sometimes you need to upgrade or downgrade your EC2 instance type to handle different workloads. Directly changing a running instance type requires stopping it, which causes downtime. To minimize or avoid downtime, you can use strategies like **Auto Scaling, Elastic Load Balancing, or creating a replacement instance**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Stop and Change Instance Type (Simple Approach)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Stop the instance (<strong>downtime occurs</strong>):</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">aws ec2 stop-instances --instance-ids i-0123456789abcdef0</pre>
    <li>Change the instance type:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">aws ec2 modify-instance-attribute --instance-id i-0123456789abcdef0 --instance-type "{\"Value\": \"t3.medium\"}"</pre>
    <li>Start the instance again:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">aws ec2 start-instances --instance-ids i-0123456789abcdef0</pre>
  </ul>

  <p class="mt-2 text-gray-600">⚠️ This causes downtime because the instance must stop.</p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Zero-Downtime Approach Using Auto Scaling and Load Balancer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy your application behind an **Elastic Load Balancer (ALB/NLB)**.</li>
    <li>Use an **Auto Scaling Group (ASG)** with the old instance type running.</li>
    <li>Create a new **launch template** or **launch configuration** with the new instance type.</li>
    <li>Update the ASG to use the new launch template → new instances are launched with the new type.</li>
    <li>Once new instances are healthy, deregister old instances from the load balancer and terminate them.</li>
    <li>Result: application remains available during the instance type upgrade.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always use **Elastic Load Balancers** to distribute traffic for high availability.</li>
    <li>Use **Auto Scaling Groups** to replace instances gradually, avoiding downtime.</li>
    <li>Take a **snapshot of EBS volumes** before changing instance type to prevent data loss.</li>
    <li>Monitor **CloudWatch metrics** to validate performance improvements after scaling.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-change-instance-type.png" alt="EC2 Instance Type Upgrade Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-stop-start-reboot" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Stopping, Starting, and Rebooting EC2 Instances Safely</h2>

  <p class="mb-4 text-gray-700">
    Managing the lifecycle of EC2 instances is essential for maintenance, cost control, and troubleshooting. AWS provides three primary actions: <strong>stop</strong>, <strong>start</strong>, and <strong>reboot</strong>. Each has different implications for uptime, EBS volumes, and networking.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Stopping an EC2 Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use stop to **temporarily shut down** an instance while preserving EBS data.</li>
    <li>The public IP may change unless an **Elastic IP** is attached.</li>
    <li>Command Example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 stop-instances --instance-ids i-0123456789abcdef0
    </pre>
    <li>Use this for maintenance, cost savings, or patching OS without terminating the instance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Starting a Stopped EC2 Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Start brings a stopped instance back online with the same EBS volumes.</li>
    <li>If no Elastic IP is attached, a **new public IP** will be assigned.</li>
    <li>Command Example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 start-instances --instance-ids i-0123456789abcdef0
    </pre>
    <li>Best practice: Verify security group, subnet, and IAM role configurations after start.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Rebooting an EC2 Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Reboot performs a **graceful OS restart** without affecting EBS volumes or public IP.</li>
    <li>Useful for applying OS updates or restarting applications without downtime caused by stopping.</li>
    <li>Command Example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 reboot-instances --instance-ids i-0123456789abcdef0
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always **backup important data** or take snapshots before stopping or rebooting production instances.</li>
    <li>Use **Elastic IPs** for instances that require static IPs to avoid connectivity issues after stop/start.</li>
    <li>Monitor instance health using **CloudWatch** to ensure the instance starts and runs correctly.</li>
    <li>Automate lifecycle actions using **AWS Systems Manager** for safe operational control.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-lifecycle.png" alt="EC2 Stop Start Reboot Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-custom-ami" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Creating a Custom AMI from an Existing EC2 Instance</h2>

  <p class="mb-4 text-gray-700">
    A custom Amazon Machine Image (AMI) allows you to reuse a pre-configured EC2 instance with installed software, OS settings, and applications. This is ideal for scaling, automation, or standardizing environments across multiple instances.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Prepare the EC2 Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure the instance is in a **healthy running state**.</li>
    <li>Clean up unnecessary files and clear temporary data to reduce AMI size.</li>
    <li>Stop services if needed to ensure consistent state in the AMI.</li>
    <li>Update OS packages and applications to the desired version.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Create AMI via AWS Management Console</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>Navigate to **EC2 → Instances** in the AWS console.</li>
    <li>Select the instance you want to use as a base.</li>
    <li>Click **Actions → Image → Create Image**.</li>
    <li>Provide an **AMI name** and optional description.</li>
    <li>Choose whether to **include instance volumes** or additional EBS volumes.</li>
    <li>Click **Create Image** → AWS will start creating the AMI in the background.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Create AMI via AWS CLI</h3>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-image \
  --instance-id i-0123456789abcdef0 \
  --name "MyCustomAMI" \
  --description "Custom AMI with pre-installed Java and app configuration" \
  --no-reboot
  </pre>

  <p class="mt-2 text-gray-600">
    <strong>Note:</strong> Using <code>--no-reboot</code> avoids stopping the instance but may result in a slightly inconsistent image. Recommended for production only if you have proper safeguards.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Launching Instances from Custom AMI</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use the **new AMI ID** when launching EC2 instances.</li>
    <li>Example CLI command:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 run-instances \
  --image-id ami-0abcdef1234567890 \
  --instance-type t3.medium \
  --key-name MyKeyPair \
  --security-group-ids sg-0123456789abcdef0 \
  --subnet-id subnet-0ab1c2d3e4f567890
    </pre>
    <li>This creates a new EC2 instance with all pre-installed software and configurations from your AMI.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Tag AMIs with **version numbers** to track changes and updates.</li>
    <li>Regularly **update and patch AMIs** for security compliance.</li>
    <li>Store AMIs in the **same region** as your deployment for faster launches.</li>
    <li>Clean up old AMIs to avoid unnecessary storage costs.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-custom-ami.png" alt="EC2 Custom AMI Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-ebs-attach-detach" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Attaching and Detaching EBS Volumes Dynamically</h2>

  <p class="mb-4 text-gray-700">
    Amazon EBS (Elastic Block Store) allows you to attach additional storage to your EC2 instances. You can dynamically attach or detach volumes without stopping the instance (for most volume types), enabling flexible storage scaling.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Attaching an EBS Volume</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Identify the **volume ID** and **instance ID**.</li>
    <li>Attach the volume using the AWS CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 attach-volume \
  --volume-id vol-0abcd1234ef567890 \
  --instance-id i-0123456789abcdef0 \
  --device /dev/sdf
    </pre>
    <li>On Linux, the device will appear (e.g., `/dev/xvdf`) → create a filesystem if new:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo mkfs -t ext4 /dev/xvdf
sudo mkdir /mnt/data
sudo mount /dev/xvdf /mnt/data
    </pre>
    <li>Add to `/etc/fstab` for automatic mounting after reboot.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Detaching an EBS Volume</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure the volume is **not in use** (unmount the filesystem on Linux):</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo umount /mnt/data
    </pre>
    <li>Detach the volume using the AWS CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 detach-volume --volume-id vol-0abcd1234ef567890
    </pre>
    <li>Volume becomes available and can be attached to another instance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Considerations and Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>For **root volumes**, detaching requires stopping the instance.</li>
    <li>Use **EBS snapshots** before detaching important volumes to prevent data loss.</li>
    <li>Ensure the device path does not conflict with existing devices on the instance.</li>
    <li>Use **tags** to track which volume belongs to which tenant or workload.</li>
    <li>For high availability, consider **EBS-optimized instances** and provisioned IOPS (io1/io2) volumes for performance-sensitive workloads.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ebs-attach-detach.png" alt="EC2 EBS Attach Detach Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-ebs-resize" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Resizing an EBS Volume Without Data Loss</h2>

  <p class="mb-4 text-gray-700">
    Amazon EBS allows you to **dynamically increase the size** of your volume without stopping the EC2 instance, ensuring that your applications continue running with minimal disruption.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Check Current Volume Size</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Identify the **volume ID** attached to your EC2 instance:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 describe-volumes --volume-ids vol-0abcd1234ef567890
    </pre>
    <li>Verify current size and type.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Modify the Volume</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use the AWS CLI to increase the volume size:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 modify-volume --volume-id vol-0abcd1234ef567890 --size 50
    </pre>
    <li>This command increases the volume to 50 GB (or desired size).</li>
    <li>Check modification status:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 describe-volumes-modifications --volume-id vol-0abcd1234ef567890
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Expand the Filesystem</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>After modification, resize the filesystem on Linux:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# For ext4 filesystem
sudo resize2fs /dev/xvdf

# For XFS filesystem
sudo xfs_growfs /mnt/data
    </pre>
    <li>Ensure the mount point matches the device.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Take a **snapshot before resizing** to prevent accidental data loss:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-snapshot --volume-id vol-0abcd1234ef567890 --description "Pre-resize snapshot"
    </pre>
    <li>For production workloads, **monitor CloudWatch metrics** for IOPS and throughput during resizing.</li>
    <li>Resize incrementally if possible to avoid sudden large changes in I/O performance.</li>
    <li>Ensure the **EC2 instance supports online resizing** (most modern Linux kernels do).</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ebs-resize.png" alt="EC2 EBS Resize Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-storage-config" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Configuring Instance Store vs EBS for Ephemeral vs Persistent Data</h2>

  <p class="mb-4 text-gray-700">
    Amazon EC2 provides two types of storage: <strong>Instance Store</strong> and <strong>Elastic Block Store (EBS)</strong>. Choosing the right storage type depends on whether your data is **ephemeral** (temporary) or **persistent** (long-term).
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Instance Store (Ephemeral Storage)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attached physically to the host server; provides very **low-latency and high IOPS**.</li>
    <li>Data is **lost when the instance stops, terminates, or fails**.</li>
    <li>Ideal for: <strong>caches, temporary files, scratch data, or swap space</strong>.</li>
    <li>Example configuration:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Launch an instance with instance store volumes via CLI
aws ec2 run-instances \
  --image-id ami-0abcdef1234567890 \
  --instance-type i3.large \
  --block-device-mappings '[{"DeviceName":"/dev/sdb","VirtualName":"ephemeral0"}]'
    </pre>
    <li>The `VirtualName` property specifies ephemeral instance store mapping.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. EBS (Persistent Storage)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Network-attached block storage that persists **even if the instance stops or terminates**.</li>
    <li>Supports **snapshots**, encryption, and resizing.</li>
    <li>Ideal for: <strong>databases, application data, logs, and other persistent workloads</strong>.</li>
    <li>Example configuration:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Launch an instance with EBS root and additional volumes
aws ec2 run-instances \
  --image-id ami-0abcdef1234567890 \
  --instance-type t3.medium \
  --block-device-mappings '[{"DeviceName":"/dev/xvda","Ebs":{"VolumeSize":20}},{"DeviceName":"/dev/xvdf","Ebs":{"VolumeSize":100}}]'
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. When to Use Which</h3>
  <table class="table-auto border-collapse border border-gray-300 w-full text-gray-700 mb-4">
    <thead>
      <tr class="bg-gray-100">
        <th class="border border-gray-300 px-4 py-2">Storage Type</th>
        <th class="border border-gray-300 px-4 py-2">Data Persistence</th>
        <th class="border border-gray-300 px-4 py-2">Use Case</th>
        <th class="border border-gray-300 px-4 py-2">Example</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border border-gray-300 px-4 py-2">Instance Store</td>
        <td class="border border-gray-300 px-4 py-2">Ephemeral (lost on stop/terminate)</td>
        <td class="border border-gray-300 px-4 py-2">Temporary files, caches, scratch data</td>
        <td class="border border-gray-300 px-4 py-2">/tmp cache for web app, Redis ephemeral storage</td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2">EBS</td>
        <td class="border border-gray-300 px-4 py-2">Persistent (retains data after stop/terminate)</td>
        <td class="border border-gray-300 px-4 py-2">Databases, logs, application data</td>
        <td class="border border-gray-300 px-4 py-2">MySQL data volume, application uploads, S3 backups</td>
      </tr>
    </tbody>
  </table>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Instance Store** only for temporary, cacheable, or replaceable data.</li>
    <li>Always store critical data on **EBS** or replicate to **S3** for durability.</li>
    <li>For hybrid workloads, combine EBS for persistent data and Instance Store for scratch/cache storage.</li>
    <li>Monitor storage performance and IOPS using **CloudWatch metrics**.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-storage-comparison.png" alt="EC2 Instance Store vs EBS Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-ebs-mount" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Mounting EBS Volumes on Linux and Windows EC2 Instances</h2>

  <p class="mb-4 text-gray-700">
    After attaching an EBS volume to an EC2 instance, you must mount it to make it usable. The process differs between Linux and Windows instances.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Mounting EBS Volumes on Linux</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach the volume via AWS Console or CLI.</li>
    <li>Check attached devices:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
lsblk
    </pre>
    <li>Create a filesystem if the volume is new:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo mkfs -t ext4 /dev/xvdf
    </pre>
    <li>Create a mount point and mount the volume:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo mkdir /mnt/data
sudo mount /dev/xvdf /mnt/data
    </pre>
    <li>To mount automatically at boot, add an entry to <code>/etc/fstab</code>:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
/dev/xvdf /mnt/data ext4 defaults,nofail 0 2
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Mounting EBS Volumes on Windows</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach the volume via AWS Console or CLI.</li>
    <li>Log in to the instance using **RDP**.</li>
    <li>Open **Disk Management**:
      <ul class="list-disc list-inside ml-4">
        <li>Right-click on **Start → Disk Management**.</li>
        <li>Find the new disk (usually **Offline** initially), right-click → **Online**.</li>
        <li>Right-click the disk → **Initialize Disk** (select GPT or MBR).</li>
        <li>Create a new volume → assign a **drive letter** → format as NTFS.</li>
      </ul>
    </li>
    <li>The volume is now accessible in Windows Explorer using the assigned drive letter.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always **backup critical data** using snapshots before formatting or mounting.</li>
    <li>Monitor EBS **IOPS and throughput** using CloudWatch metrics for performance-sensitive applications.</li>
    <li>For Linux, use **UUID in /etc/fstab** instead of device names to avoid remount issues after reboot:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
UUID=$(sudo blkid -s UUID -o value /dev/xvdf)
echo "UUID=$UUID /mnt/data ext4 defaults,nofail 0 2" | sudo tee -a /etc/fstab
    </pre>
    <li>For Windows, assign **meaningful drive letters** for easier management in multi-volume setups.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ebs-mount.png" alt="Mount EBS Volume on Linux and Windows" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-ebs-snapshots" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Backing Up EC2 Volumes Using Snapshots</h2>

  <p class="mb-4 text-gray-700">
    Amazon EBS snapshots allow you to **backup your EC2 volumes** to Amazon S3 automatically. Snapshots are incremental, meaning only changed blocks since the last snapshot are saved, reducing storage costs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Creating a Snapshot via AWS CLI</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Identify the **volume ID** you want to backup.</li>
    <li>Create a snapshot:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-snapshot \
  --volume-id vol-0abcd1234ef567890 \
  --description "Daily backup of my EC2 volume"
    </pre>
    <li>Check snapshot status:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 describe-snapshots --snapshot-ids snap-0123456789abcdef0
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Creating a Snapshot via AWS Console</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to **EC2 → Volumes** in AWS Management Console.</li>
    <li>Select the volume → **Actions → Create Snapshot**.</li>
    <li>Provide a **description** and optionally add **tags** for identification.</li>
    <li>Click **Create Snapshot** → AWS will create the snapshot asynchronously.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Scheduling Snapshots</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **AWS Data Lifecycle Manager (DLM)** to automate snapshot creation and deletion:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Example: Create Lifecycle Policy for daily snapshots
aws dlm create-lifecycle-policy \
  --description "Daily EBS backup" \
  --state ENABLED \
  --execution-role-arn arn:aws:iam::123456789012:role/AWSDataLifecycleManagerDefaultRole \
  --policy-details '{"ResourceTypes":["VOLUME"],"TargetTags":[{"Key":"Backup","Value":"Daily"}],"Schedules":[{"Name":"DailyBackup","CreateRule":{"Interval":24,"IntervalUnit":"HOURS"},"RetainRule":{"Count":7}}]}'
    </pre>
    <li>This automatically retains the last 7 daily snapshots and deletes older ones.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Restoring from a Snapshot</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a new volume from the snapshot:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-volume \
  --snapshot-id snap-0123456789abcdef0 \
  --availability-zone us-east-1a
    </pre>
    <li>Attach the new volume to an EC2 instance and mount it as usual (Linux/Windows).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Tag snapshots with **purpose, date, and application name** for easier management.</li>
    <li>Use **incremental snapshots** to save storage costs.</li>
    <li>Combine snapshots with **EBS encryption** for sensitive data security.</li>
    <li>Test snapshot restoration periodically to ensure backups are valid.</li>
    <li>Use **cross-region snapshots** for disaster recovery scenarios.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ebs-snapshot.png" alt="EC2 EBS Snapshot Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-elastic-ip" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Assigning an Elastic IP to a Running EC2 Instance</h2>

  <p class="mb-4 text-gray-700">
    An Elastic IP (EIP) is a **static, public IPv4 address** designed for dynamic cloud computing. You can attach an EIP to a running EC2 instance to maintain a fixed public IP, even if the instance is stopped or restarted.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Allocate a New Elastic IP</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Using AWS CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 allocate-address --domain vpc
# Returns: AllocationId and Public IP
    </pre>
    <li>Using AWS Console:
      <ul class="list-disc list-inside ml-4">
        <li>Go to **EC2 → Network & Security → Elastic IPs**.</li>
        <li>Click **Allocate Elastic IP address → Allocate**.</li>
        <li>Note the allocated **Elastic IP address**.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Associate Elastic IP with EC2 Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Using AWS CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 associate-address \
  --instance-id i-0123456789abcdef0 \
  --allocation-id eipalloc-0abcd1234ef567890
    </pre>
    <li>Using AWS Console:
      <ul class="list-disc list-inside ml-4">
        <li>Select the allocated Elastic IP → **Actions → Associate Elastic IP address**.</li>
        <li>Select your **running instance** and optionally the private IP (if multiple).</li>
        <li>Click **Associate**.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Verify the Association</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check the public IP of the instance:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 describe-instances --instance-ids i-0123456789abcdef0 \
  --query "Reservations[0].Instances[0].PublicIpAddress"
    </pre>
    <li>The output should match your allocated Elastic IP.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Elastic IPs are **free while associated** with a running instance, but **charged if not associated**—release unused EIPs.</li>
    <li>Use EIPs for **critical applications** that require static public IPs.</li>
    <li>For **high availability**, consider using **Route 53 DNS with multiple EIPs** in failover scenarios.</li>
    <li>Always monitor **security groups** to allow traffic from the Elastic IP if needed.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-elastic-ip.png" alt="EC2 Elastic IP Assignment Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-vpc-networking" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Configuring VPC, Subnets, Route Tables, and Security Groups for EC2</h2>

  <p class="mb-4 text-gray-700">
    A well-designed network is critical for EC2 instances. Amazon VPC provides isolation, subnets define network segmentation, route tables control traffic flow, and security groups act as virtual firewalls.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create a VPC</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>VPC is your isolated virtual network for EC2 instances.</li>
    <li>Example using AWS CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-vpc --cidr-block 10.0.0.0/16
# Returns VPC ID
    </pre>
    <li>Best practice: Tag your VPC with <code>Name</code> for easier identification.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Create Subnets</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Subnets segment your VPC into smaller networks (AZ-specific).</li>
    <li>Example creating public and private subnets:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Public subnet in us-east-1a
aws ec2 create-subnet --vpc-id vpc-0123456789abcdef0 --cidr-block 10.0.1.0/24 --availability-zone us-east-1a

# Private subnet in us-east-1a
aws ec2 create-subnet --vpc-id vpc-0123456789abcdef0 --cidr-block 10.0.2.0/24 --availability-zone us-east-1a
    </pre>
    <li>Best practice: Use multiple AZs for high availability.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Configure Route Tables</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Route tables control how traffic flows in and out of subnets.</li>
    <li>Create a route table for the public subnet:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-route-table --vpc-id vpc-0123456789abcdef0
aws ec2 create-route --route-table-id rtb-0123456789abcdef0 --destination-cidr-block 0.0.0.0/0 --gateway-id igw-0123456789abcdef0
aws ec2 associate-route-table --subnet-id subnet-0123456789abcdef0 --route-table-id rtb-0123456789abcdef0
    </pre>
    <li>Private subnets do not have a direct route to the internet; they can use a NAT gateway in a public subnet for outbound traffic.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Configure Security Groups</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Security groups act as virtual firewalls for your EC2 instances.</li>
    <li>Example creating a security group allowing HTTP, HTTPS, and SSH:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-security-group --group-name WebSG --description "Web server SG" --vpc-id vpc-0123456789abcdef0

# Allow HTTP
aws ec2 authorize-security-group-ingress --group-id sg-0123456789abcdef0 --protocol tcp --port 80 --cidr 0.0.0.0/0

# Allow HTTPS
aws ec2 authorize-security-group-ingress --group-id sg-0123456789abcdef0 --protocol tcp --port 443 --cidr 0.0.0.0/0

# Allow SSH from your IP
aws ec2 authorize-security-group-ingress --group-id sg-0123456789abcdef0 --protocol tcp --port 22 --cidr YOUR_IP/32
    </pre>
    <li>Best practice: Use least privilege—only allow ports and IPs required for the workload.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Visual Architecture</h3>
  <div class="mt-4">
    <img src="images/ec2-vpc-architecture.png" alt="EC2 VPC, Subnets, Route Tables, Security Groups" class="w-full max-w-xl mx-auto rounded shadow">
  </div>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **public subnets** for web servers and **private subnets** for databases and application servers.</li>
    <li>Deploy resources across **multiple AZs** for high availability.</li>
    <li>Use **security groups and NACLs** together for layered security.</li>
    <li>Regularly review **route tables and security group rules** for compliance and security hygiene.</li>
  </ul>
</section>


<section id="ec2-secure-ssh" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Secure SSH Access to EC2</h2>

  <p class="mb-4 text-gray-700">
    Securing SSH access to EC2 instances is critical to prevent unauthorized access. AWS provides two main methods: **Key Pairs** for traditional SSH and **Systems Manager Session Manager** for passwordless and agentless access.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. SSH Using Key Pairs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Key pairs consist of a **private key** you keep securely and a **public key** AWS stores.</li>
    <li>Steps to enable SSH access:
      <ul class="list-disc list-inside ml-4">
        <li>When launching an EC2 instance, select or create a **key pair**.</li>
        <li>Download the private key file (`.pem`) and store it securely.</li>
        <li>Set correct permissions for the private key:</li>
        <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
chmod 400 my-key.pem
        </pre>
        <li>SSH into the instance:</li>
        <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
ssh -i "my-key.pem" ec2-user@<public-ip-or-dns>
        </pre>
      </ul>
    </li>
    <li>Best Practices:
      <ul class="list-disc list-inside ml-4">
        <li>Do **not share** the private key.</li>
        <li>Use **Security Groups** to restrict SSH access to specific IPs.</li>
        <li>Rotate key pairs periodically for compliance.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. SSH via Systems Manager Session Manager</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Session Manager allows secure, agentless access to EC2 instances **without opening port 22**.</li>
    <li>Steps to enable:
      <ul class="list-disc list-inside ml-4">
        <li>Attach the **AmazonSSMManagedInstanceCore** IAM role to the EC2 instance.</li>
        <li>Ensure the instance has internet access (NAT for private subnets) or VPC endpoints for SSM.</li>
        <li>Access the instance via CLI:</li>
        <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ssm start-session --target i-0123456789abcdef0
        </pre>
        <li>Or via AWS Console: **EC2 → Connect → Session Manager**.</li>
      </ul>
    </li>
    <li>Best Practices:
      <ul class="list-disc list-inside ml-4">
        <li>Do **not open SSH ports** in security groups when using Session Manager.</li>
        <li>Use **IAM policies** to control which users can start sessions.</li>
        <li>Enable **logging to CloudWatch or S3** for auditing purposes.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Comparison and Recommendations</h3>
  <table class="table-auto border-collapse border border-gray-300 w-full text-gray-700 mb-4">
    <thead>
      <tr class="bg-gray-100">
        <th class="border border-gray-300 px-4 py-2">Method</th>
        <th class="border border-gray-300 px-4 py-2">Security</th>
        <th class="border border-gray-300 px-4 py-2">Use Case</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border border-gray-300 px-4 py-2">Key Pairs (SSH)</td>
        <td class="border border-gray-300 px-4 py-2">Secure if private key is managed properly; requires open port 22</td>
        <td class="border border-gray-300 px-4 py-2">Traditional access, automation scripts, troubleshooting</td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2">Session Manager</td>
        <td class="border border-gray-300 px-4 py-2">Highly secure; no open ports; IAM-controlled access; fully auditable</td>
        <td class="border border-gray-300 px-4 py-2">Private instances, audit-compliant environments, zero-trust setups</td>
      </tr>
    </tbody>
  </table>

  <div class="mt-4">
    <img src="images/ec2-ssh-session-manager.png" alt="EC2 SSH and Session Manager Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-access-control" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Restricting EC2 Access to Specific IP Ranges or VPCs</h2>

  <p class="mb-4 text-gray-700">
    Limiting access to EC2 instances is critical for security. AWS provides **Security Groups** for instance-level control and **Network ACLs** for subnet-level control.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Using Security Groups (SG)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Security Groups act as **stateful firewalls** for your EC2 instances.</li>
    <li>Allow traffic only from specific IP ranges (CIDR blocks). Example: SSH only from your office IP:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 authorize-security-group-ingress \
  --group-id sg-0123456789abcdef0 \
  --protocol tcp \
  --port 22 \
  --cidr 203.0.113.0/24
    </pre>
    <li>Allow access from another VPC using a VPC peering connection:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 authorize-security-group-ingress \
  --group-id sg-0123456789abcdef0 \
  --protocol tcp \
  --port 443 \
  --source-group sg-0abcdef1234567890
    </pre>
    <li>Best Practices:
      <ul class="list-disc list-inside ml-4">
        <li>Use the **least privilege principle**—only allow required ports and IPs.</li>
        <li>Regularly audit SG rules to remove unused or overly permissive rules.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Using Network ACLs (NACLs)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>NACLs are **stateless firewalls** applied at the **subnet level**.</li>
    <li>Example: Allow HTTP/HTTPS only from a corporate IP range:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Inbound rule: allow HTTP
aws ec2 create-network-acl-entry \
  --network-acl-id acl-0123456789abcdef0 \
  --rule-number 100 \
  --protocol tcp \
  --port-range From=80,To=80 \
  --egress false \
  --cidr-block 203.0.113.0/24 \
  --rule-action allow

# Inbound rule: deny all others
aws ec2 create-network-acl-entry \
  --network-acl-id acl-0123456789abcdef0 \
  --rule-number 200 \
  --protocol -1 \
  --egress false \
  --cidr-block 0.0.0.0/0 \
  --rule-action deny
    </pre>
    <li>Best Practices:
      <ul class="list-disc list-inside ml-4">
        <li>Use NACLs to **enforce subnet-level restrictions** in addition to SGs.</li>
        <li>Order rules carefully, as NACLs are evaluated by **rule number ascending**.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Combining Security Groups and NACLs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **SGs** for instance-level access control and **NACLs** for broader subnet-level filtering.</li>
    <li>Example Scenario:
      <ul class="list-disc list-inside ml-4">
        <li>Web servers in public subnet: SG allows 80/443 only, NACL allows only corporate IP range for inbound.</li>
        <li>Application servers in private subnet: SG allows traffic from web server SG only, NACL blocks all other inbound traffic.</li>
      </ul>
    </li>
    <li>This layered approach increases **security and isolation**.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-access-control.png" alt="EC2 Access Control using SG and NACL" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-load-balancing" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Attaching EC2 Instances to an ALB or NLB</h2>

  <p class="mb-4 text-gray-700">
    Load Balancers distribute incoming traffic across multiple EC2 instances to improve **availability, fault tolerance, and scalability**. AWS offers **Application Load Balancers (ALB)** for HTTP/HTTPS traffic and **Network Load Balancers (NLB)** for TCP/UDP or extreme performance use cases.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create a Target Group</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Target Groups define which instances or IP addresses receive traffic from the load balancer.</li>
    <li>Example creating a target group for HTTP on port 80:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 create-target-group \
  --name my-web-tg \
  --protocol HTTP \
  --port 80 \
  --vpc-id vpc-0123456789abcdef0 \
  --target-type instance
    </pre>
    <li>For NLB with TCP traffic, change protocol to TCP and target type to <code>instance</code> or <code>ip</code>.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Create the Load Balancer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Example creating an ALB:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 create-load-balancer \
  --name my-app-alb \
  --subnets subnet-0123456789abcdef0 subnet-0abcdef1234567890 \
  --security-groups sg-0123456789abcdef0 \
  --scheme internet-facing \
  --type application
    </pre>
    <li>Example creating an NLB:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 create-load-balancer \
  --name my-nlb \
  --subnets subnet-0123456789abcdef0 subnet-0abcdef1234567890 \
  --type network \
  --scheme internet-facing
    </pre>
    <li>Best practice: Use subnets in **multiple AZs** for high availability.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Register EC2 Instances with Target Group</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach running EC2 instances to the target group:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 register-targets \
  --target-group-arn arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-web-tg/abcdef1234567890 \
  --targets Id=i-0123456789abcdef0 Id=i-0abcdef1234567890
    </pre>
    <li>Instances must be in the same VPC as the target group.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Configure Listeners</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Listeners define how the LB routes traffic to the target group.</li>
    <li>Example for ALB listening on HTTP port 80:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 create-listener \
  --load-balancer-arn arn:aws:elasticloadbalancing:region:account-id:loadbalancer/app/my-app-alb/abcdef1234567890 \
  --protocol HTTP \
  --port 80 \
  --default-actions Type=forward,TargetGroupArn=arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-web-tg/abcdef1234567890
    </pre>
    <li>For NLB, protocol is typically TCP or TLS.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **health checks** on target groups to ensure traffic goes only to healthy instances.</li>
    <li>Deploy instances across **multiple AZs** for high availability.</li>
    <li>Use **auto scaling groups** with target groups for automatic scaling.</li>
    <li>Restrict security group rules to allow traffic **only from the load balancer** if possible.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-alb-nlb.png" alt="EC2 Attached to ALB/NLB Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-auto-scaling" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Configuring Auto Scaling Groups for EC2</h2>

  <p class="mb-4 text-gray-700">
    Auto Scaling Groups (ASGs) allow you to automatically **scale EC2 instances up or down** based on demand, improving availability and optimizing costs. ASGs can replace unhealthy instances and maintain a desired number of instances across multiple AZs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create a Launch Template or Launch Configuration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch Template defines **AMI, instance type, key pair, security groups, and user-data scripts**.</li>
    <li>Example CLI to create a launch template:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-launch-template \
  --launch-template-name MyWebServerTemplate \
  --version-description v1 \
  --launch-template-data '{
      "ImageId":"ami-0123456789abcdef0",
      "InstanceType":"t3.micro",
      "KeyName":"my-key",
      "SecurityGroupIds":["sg-0123456789abcdef0"],
      "UserData":"IyEvYmluL2Jhc2gKZWNobyAiSGVsbG8gZnJvbSBDaGllZiBDaGF0Igo="
  }'
    </pre>
    <li>User-data scripts can bootstrap the instance (e.g., install web server, deploy code).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Create the Auto Scaling Group</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>ASG defines **desired capacity, min/max instances, and AZs**.</li>
    <li>Example CLI to create an ASG using the launch template:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling create-auto-scaling-group \
  --auto-scaling-group-name MyWebServerASG \
  --launch-template "LaunchTemplateName=MyWebServerTemplate,Version=1" \
  --min-size 2 \
  --max-size 5 \
  --desired-capacity 2 \
  --vpc-zone-identifier "subnet-0123456789abcdef0,subnet-0abcdef1234567890"
    </pre>
    <li>Best practice: Deploy across **multiple AZs** for high availability.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Attach Target Groups (Optional, for Load Balancing)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach ASG to an ALB/NLB target group so instances receive traffic automatically:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling attach-load-balancer-target-groups \
  --auto-scaling-group-name MyWebServerASG \
  --target-group-arns arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-web-tg/abcdef1234567890
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Configure Scaling Policies</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Scaling policies define **when to add or remove instances** based on metrics.</li>
    <li>Example: Scale out when CPU > 70%:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling put-scaling-policy \
  --auto-scaling-group-name MyWebServerASG \
  --policy-name ScaleOutPolicy \
  --policy-type TargetTrackingScaling \
  --target-tracking-configuration '{"PredefinedMetricSpecification":{"PredefinedMetricType":"ASGAverageCPUUtilization"},"TargetValue":70.0}'
    </pre>
    <li>Example: Scale in automatically when CPU drops below 30% (similar policy).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy across **multiple AZs** for fault tolerance.</li>
    <li>Use **health checks** (EC2 or ELB) to replace unhealthy instances automatically.</li>
    <li>Combine with **ALB/NLB** for seamless load distribution.</li>
    <li>Define **min/max/desired** instances carefully to balance cost vs availability.</li>
    <li>Use **tags** to identify instances created by ASG for monitoring and billing.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-auto-scaling.png" alt="EC2 Auto Scaling Group Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-scaling-policies" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Auto Scaling Policies Based on CPU, Memory, or Custom Metrics</h2>

  <p class="mb-4 text-gray-700">
    Auto Scaling Groups (ASGs) can scale EC2 instances dynamically based on **predefined metrics** like CPU, memory, or **custom metrics** published to CloudWatch. Scaling policies ensure your application handles traffic efficiently while minimizing costs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. CPU-Based Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Common metric: **Average CPU utilization** across the ASG.</li>
    <li>Example: Scale out if CPU &gt; 70%, scale in if CPU &lt; 30%:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling put-scaling-policy \
  --auto-scaling-group-name MyWebServerASG \
  --policy-name ScaleOutCPU \
  --policy-type TargetTrackingScaling \
  --target-tracking-configuration '{
      "PredefinedMetricSpecification": {
          "PredefinedMetricType": "ASGAverageCPUUtilization"
      },
      "TargetValue": 70.0
  }'

aws autoscaling put-scaling-policy \
  --auto-scaling-group-name MyWebServerASG \
  --policy-name ScaleInCPU \
  --policy-type TargetTrackingScaling \
  --target-tracking-configuration '{
      "PredefinedMetricSpecification": {
          "PredefinedMetricType": "ASGAverageCPUUtilization"
      },
      "TargetValue": 30.0
  }'
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Memory-Based Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Memory metrics are **not reported by default**; you need to publish them to CloudWatch using the CloudWatch agent.</li>
    <li>Example CloudWatch agent configuration snippet to publish memory usage:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
{
  "metrics": {
    "metrics_collected": {
      "mem": {
        "measurement": [
          "mem_used_percent"
        ],
        "metrics_collection_interval": 60
      }
    }
  }
}
    </pre>
    <li>Then create a custom metric in CloudWatch and attach a **TargetTrackingScaling policy**:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling put-scaling-policy \
  --auto-scaling-group-name MyWebServerASG \
  --policy-name ScaleOutMemory \
  --policy-type TargetTrackingScaling \
  --target-tracking-configuration '{
      "CustomizedMetricSpecification": {
          "MetricName": "MemoryUtilization",
          "Namespace": "MyApp/Metrics",
          "Statistic": "Average"
      },
      "TargetValue": 75.0
  }'
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Scaling Based on Custom Metrics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Custom metrics can include **request count, queue length (SQS), or application-specific metrics**.</li>
    <li>Publish custom metric to CloudWatch:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws cloudwatch put-metric-data \
  --namespace "MyApp/Metrics" \
  --metric-name "QueueLength" \
  --value 150
    </pre>
    <li>Create a **TargetTrackingScaling policy** on the ASG using this metric:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling put-scaling-policy \
  --auto-scaling-group-name MyWebServerASG \
  --policy-name ScaleOutQueue \
  --policy-type TargetTrackingScaling \
  --target-tracking-configuration '{
      "CustomizedMetricSpecification": {
          "MetricName": "QueueLength",
          "Namespace": "MyApp/Metrics",
          "Statistic": "Average"
      },
      "TargetValue": 100.0
  }'
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Target Tracking** for simpler configuration; step scaling for complex thresholds.</li>
    <li>Set **cooldown periods** to avoid rapid scaling fluctuations.</li>
    <li>Combine multiple metrics if needed (CPU + memory + custom metric) for **balanced scaling**.</li>
    <li>Test scaling policies in **non-production environments** before applying to production.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-scaling-policies.png" alt="EC2 Auto Scaling Metrics Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>




<section id="ec2-multi-az" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Deploying Multi-AZ EC2 Instances Behind a Load Balancer</h2>

  <p class="mb-4 text-gray-700">
    Deploying EC2 instances across multiple Availability Zones (AZs) improves **high availability** and **fault tolerance**. Pairing this with a load balancer ensures traffic is automatically routed to healthy instances, even if one AZ experiences an outage.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Plan Your Subnets Across AZs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create **public subnets** in each AZ for load balancers (ALB/NLB).</li>
    <li>Create **private subnets** in each AZ for application EC2 instances.</li>
    <li>Example: For a region with 2 AZs:
      <ul class="list-disc list-inside ml-4">
        <li>AZ1: subnet-az1-public, subnet-az1-private</li>
        <li>AZ2: subnet-az2-public, subnet-az2-private</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Launch EC2 Instances in Multiple AZs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch identical EC2 instances in private subnets of each AZ.</li>
    <li>Example CLI to launch an instance in AZ1:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 run-instances \
  --image-id ami-0123456789abcdef0 \
  --count 1 \
  --instance-type t3.micro \
  --key-name MyKeyPair \
  --subnet-id subnet-az1-private \
  --security-group-ids sg-0123456789abcdef0
    </pre>
    <li>Repeat for AZ2 with subnet-az2-private.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Create a Load Balancer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create an **ALB** for HTTP/HTTPS traffic or **NLB** for TCP/UDP traffic.</li>
    <li>Attach the load balancer to **public subnets** in all AZs to ensure availability.</li>
    <li>Example CLI for ALB:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 create-load-balancer \
  --name my-alb \
  --subnets subnet-az1-public subnet-az2-public \
  --security-groups sg-0123456789abcdef0 \
  --scheme internet-facing \
  --type application
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Create a Target Group and Register Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a target group in the **same VPC** as your instances.</li>
    <li>Register EC2 instances from all AZs with this target group:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 create-target-group \
  --name my-web-tg \
  --protocol HTTP \
  --port 80 \
  --vpc-id vpc-0123456789abcdef0 \
  --target-type instance

aws elbv2 register-targets \
  --target-group-arn arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-web-tg/abcdef1234567890 \
  --targets Id=i-0123456789abcdef0 Id=i-0abcdef1234567890
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Configure Listener on Load Balancer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a listener to forward traffic from LB to the target group:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 create-listener \
  --load-balancer-arn arn:aws:elasticloadbalancing:region:account-id:loadbalancer/app/my-alb/abcdef1234567890 \
  --protocol HTTP \
  --port 80 \
  --default-actions Type=forward,TargetGroupArn=arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-web-tg/abcdef1234567890
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Enable Health Checks</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Configure health checks to route traffic only to healthy instances.</li>
    <li>Example: HTTP health check on port 80, path `/health`:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 modify-target-group \
  --target-group-arn arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-web-tg/abcdef1234567890 \
  --health-check-protocol HTTP \
  --health-check-port 80 \
  --health-check-path /health \
  --health-check-interval-seconds 30 \
  --healthy-threshold-count 2 \
  --unhealthy-threshold-count 2
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy EC2 instances in **at least 2 AZs** to tolerate AZ failure.</li>
    <li>Use **Auto Scaling Groups** to maintain instance count automatically.</li>
    <li>Attach **ALB/NLB** to distribute traffic evenly across AZs.</li>
    <li>Enable **CloudWatch monitoring** and alarms for unhealthy instances.</li>
    <li>Use **security groups** to allow traffic only from the load balancer.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-multi-az-alb.png" alt="Multi-AZ EC2 with Load Balancer Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-ami-update" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Updating AMIs in an Auto Scaling Group with Zero Downtime</h2>

  <p class="mb-4 text-gray-700">
    When you need to deploy a **new version of your application** or update the underlying OS, you must update the AMI in your Auto Scaling Group (ASG) **without causing downtime**. This can be achieved with **rolling updates** or **blue/green deployments**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Update the Launch Template or Launch Configuration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a new version of the launch template with the updated AMI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-launch-template-version \
  --launch-template-name MyWebServerTemplate \
  --version-description v2 \
  --launch-template-data '{
      "ImageId":"ami-0abcdef1234567890",
      "InstanceType":"t3.micro",
      "KeyName":"MyKeyPair",
      "SecurityGroupIds":["sg-0123456789abcdef0"]
  }'
    </pre>
    <li>Verify the new version is available:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 describe-launch-template-versions \
  --launch-template-name MyWebServerTemplate
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Apply the New Template Version to the ASG</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Update the ASG to use the new launch template version:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling update-auto-scaling-group \
  --auto-scaling-group-name MyWebServerASG \
  --launch-template "LaunchTemplateName=MyWebServerTemplate,Version=2"
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Perform a Rolling Update (Recommended for Zero Downtime)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Set **desired capacity equal to max capacity** temporarily or enable **instance refresh**.</li>
    <li>Example: Start an **instance refresh** to replace old instances gradually:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling start-instance-refresh \
  --auto-scaling-group-name MyWebServerASG \
  --preferences '{
      "MinHealthyPercentage": 75,
      "InstanceWarmup": 300
  }'
    </pre>
    <li>ASG replaces instances **gradually**, maintaining at least 75% healthy instances at all times.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Blue/Green Deployment Approach</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a **new ASG** with the updated AMI.</li>
    <li>Attach it to the same **load balancer target group**.</li>
    <li>Gradually shift traffic from the old ASG to the new ASG using **weighted routing or ALB target group adjustments**.</li>
    <li>Once traffic is fully routed, **terminate the old ASG**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always test the new AMI in a **staging environment** before production rollout.</li>
    <li>Enable **health checks** to ensure only healthy instances serve traffic.</li>
    <li>Use **cooldown periods and MinHealthyPercentage** to prevent service disruption.</li>
    <li>Consider **CloudWatch alarms** to automatically rollback if failures occur.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ami-update.png" alt="Rolling Update / Blue-Green Deployment for EC2 ASG" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-cloudwatch" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Enabling CloudWatch Monitoring for EC2 Instances</h2>

  <p class="mb-4 text-gray-700">
    Amazon CloudWatch allows you to **monitor EC2 instance metrics and logs** to ensure your applications are running smoothly, detect anomalies, and trigger automated actions.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Enable Basic Monitoring (Default)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instances automatically send **basic metrics** (CPU utilization, network in/out, disk I/O) every **5 minutes**.</li>
    <li>No additional setup is required for basic monitoring, but **detailed metrics** provide 1-minute granularity.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Enable Detailed Monitoring</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Detailed monitoring provides **1-minute interval metrics** for faster detection and scaling decisions.</li>
    <li>Enable via console:
      <ul class="list-disc list-inside ml-4">
        <li>Go to EC2 → Instances → Select instance → Actions → Monitor and troubleshoot → Enable detailed monitoring.</li>
      </ul>
    </li>
    <li>Enable via CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 monitor-instances --instance-ids i-0123456789abcdef0
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Install CloudWatch Agent for Custom Metrics and Logs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>CloudWatch Agent can send **memory, disk, swap, and application logs** to CloudWatch.</li>
    <li>Install agent on Linux instance:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo yum install amazon-cloudwatch-agent -y
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard
sudo systemctl start amazon-cloudwatch-agent
    </pre>
    <li>On Windows, use the MSI installer and configure via the wizard or JSON config.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Configure Alarms and Notifications</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create CloudWatch alarms to notify you or trigger actions when thresholds are crossed.</li>
    <li>Example: CPU utilization &gt; 70%:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws cloudwatch put-metric-alarm \
  --alarm-name HighCPUUtilization \
  --metric-name CPUUtilization \
  --namespace AWS/EC2 \
  --statistic Average \
  --period 300 \
  --threshold 70 \
  --comparison-operator GreaterThanThreshold \
  --dimensions Name=InstanceId,Value=i-0123456789abcdef0 \
  --evaluation-periods 2 \
  --alarm-actions arn:aws:sns:region:account-id:NotifyMe
    </pre>
    <li>Alarms can trigger **Auto Scaling policies, SNS notifications, or Lambda functions** for automated remediation.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **detailed monitoring** for production EC2 instances.</li>
    <li>Use **CloudWatch agent** to monitor **memory, disk, and application logs**, which are not available by default.</li>
    <li>Set **alarms on critical metrics** like CPU, memory, disk space, and network latency.</li>
    <li>Combine CloudWatch with **Auto Scaling Groups** to automatically scale instances based on metrics.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cloudwatch.png" alt="EC2 CloudWatch Monitoring" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-cloudwatch-alarms" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Setting Up CloudWatch Alarms for High CPU, Memory, or Disk Usage</h2>

  <p class="mb-4 text-gray-700">
    CloudWatch alarms allow you to **monitor critical metrics** for your EC2 instances and trigger notifications or automated actions when thresholds are exceeded. Common metrics include **CPU utilization, memory usage, and disk usage**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. CPU Utilization Alarm</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Default metric: <strong>AWS/EC2 CPUUtilization</strong></li>
    <li>Example CLI to create an alarm for CPU &gt; 75% for 5 minutes:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws cloudwatch put-metric-alarm \
  --alarm-name HighCPUUtilization \
  --metric-name CPUUtilization \
  --namespace AWS/EC2 \
  --statistic Average \
  --period 300 \
  --threshold 75 \
  --comparison-operator GreaterThanThreshold \
  --dimensions Name=InstanceId,Value=i-0123456789abcdef0 \
  --evaluation-periods 1 \
  --alarm-actions arn:aws:sns:region:account-id:NotifyMe
    </pre>
    <li>This alarm sends a notification to the specified **SNS topic** or triggers **Auto Scaling actions**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Memory Usage Alarm</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Memory metrics are not collected by default; use **CloudWatch Agent** to publish memory usage.</li>
    <li>Example agent configuration to publish memory usage:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
{
  "metrics": {
    "metrics_collected": {
      "mem": {
        "measurement": [
          "mem_used_percent"
        ],
        "metrics_collection_interval": 60
      }
    }
  }
}
    </pre>
    <li>Create CloudWatch alarm on memory usage &gt; 80%:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws cloudwatch put-metric-alarm \
  --alarm-name HighMemoryUsage \
  --metric-name MemoryUtilization \
  --namespace "MyApp/Metrics" \
  --statistic Average \
  --period 300 \
  --threshold 80 \
  --comparison-operator GreaterThanThreshold \
  --dimensions Name=InstanceId,Value=i-0123456789abcdef0 \
  --evaluation-periods 1 \
  --alarm-actions arn:aws:sns:region:account-id:NotifyMe
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Disk Usage Alarm</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **CloudWatch Agent** to publish disk usage metrics.</li>
    <li>Example configuration to monitor root volume disk usage:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
{
  "metrics": {
    "metrics_collected": {
      "disk": {
        "measurement": [
          "used_percent"
        ],
        "resources": [
          "/"
        ],
        "metrics_collection_interval": 60
      }
    }
  }
}
    </pre>
    <li>Create alarm for disk usage &gt; 85%:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws cloudwatch put-metric-alarm \
  --alarm-name HighDiskUsage \
  --metric-name DiskUsedPercent \
  --namespace "MyApp/Metrics" \
  --statistic Average \
  --period 300 \
  --threshold 85 \
  --comparison-operator GreaterThanThreshold \
  --dimensions Name=InstanceId,Value=i-0123456789abcdef0 \
  --evaluation-periods 1 \
  --alarm-actions arn:aws:sns:region:account-id:NotifyMe
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always configure **SNS topics** to notify team members or trigger automated actions.</li>
    <li>Set appropriate **evaluation periods** to avoid false positives from transient spikes.</li>
    <li>Combine **CPU, memory, and disk alarms** for a complete monitoring strategy.</li>
    <li>Integrate alarms with **Auto Scaling or Lambda functions** for automated remediation.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cloudwatch-alarms.png" alt="CloudWatch Alarms for EC2" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-cloudwatch-agent" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Installing and Configuring the CloudWatch Agent on EC2</h2>

  <p class="mb-4 text-gray-700">
    The CloudWatch Agent enables you to collect **system-level metrics** (CPU, memory, disk) and **application logs** from EC2 instances. By default, CloudWatch only monitors basic metrics such as CPU and network.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Install CloudWatch Agent on Linux</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Download and install the agent:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo yum install amazon-cloudwatch-agent -y      # Amazon Linux / RHEL
sudo apt-get install amazon-cloudwatch-agent -y  # Ubuntu / Debian
    </pre>
    <li>Start the configuration wizard to create the agent config:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard
    </pre>
    <li>Start the agent:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo systemctl start amazon-cloudwatch-agent
sudo systemctl enable amazon-cloudwatch-agent
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Install CloudWatch Agent on Windows</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Download the CloudWatch Agent MSI installer from the <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/install-CloudWatch-Agent.html" class="text-indigo-600 hover:underline">AWS documentation</a>.</li>
    <li>Run the installer and open the configuration wizard via Start Menu → CloudWatch Agent Wizard.</li>
    <li>Configure metrics and log collection (CPU, memory, disk, application logs).</li>
    <li>Start the service from Services.msc or PowerShell:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
Start-Service AmazonCloudWatchAgent
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Sample Agent Configuration for Linux</h3>
  <p class="text-gray-700 mb-2">A JSON config to collect CPU, memory, and root disk usage metrics:</p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
{
  "metrics": {
    "metrics_collected": {
      "mem": { "measurement": ["mem_used_percent"], "metrics_collection_interval": 60 },
      "disk": { "measurement": ["used_percent"], "resources": ["/"], "metrics_collection_interval": 60 },
      "cpu": { "measurement": ["cpu_usage_idle","cpu_usage_user","cpu_usage_system"], "metrics_collection_interval": 60 }
    }
  }
}
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Send Logs to CloudWatch</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Include logs section in the config to send application logs:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
{
  "logs": {
    "logs_collected": {
      "files": {
        "collect_list": [
          { "file_path": "/var/log/nginx/access.log", "log_group_name": "nginx-access", "log_stream_name": "{instance_id}" },
          { "file_path": "/var/log/nginx/error.log", "log_group_name": "nginx-error", "log_stream_name": "{instance_id}" }
        ]
      }
    }
  }
}
    </pre>
    <li>Apply the configuration:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl \
  -a fetch-config -m ec2 -c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json -s
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always test your configuration in a **staging instance** before production rollout.</li>
    <li>Use **IAM roles** with `CloudWatchAgentServerPolicy` attached to EC2 to avoid storing credentials.</li>
    <li>Monitor **CPU, memory, disk, and custom application logs** for complete observability.</li>
    <li>Combine with **CloudWatch alarms** to trigger automated notifications or scaling actions.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cloudwatch-agent.png" alt="EC2 CloudWatch Agent Installation" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-log-collection" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Collecting and Centralizing EC2 Logs in CloudWatch Logs or S3</h2>

  <p class="mb-4 text-gray-700">
    Centralizing logs from EC2 instances helps you **monitor applications**, **debug issues**, and **audit activities**. AWS provides two primary options: **CloudWatch Logs** and **Amazon S3**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Sending Logs to CloudWatch Logs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Install and configure the **CloudWatch Agent** on the EC2 instance (Linux/Windows).</li>
    <li>Define which log files to collect in the agent JSON configuration:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
{
  "logs": {
    "logs_collected": {
      "files": {
        "collect_list": [
          {
            "file_path": "/var/log/nginx/access.log",
            "log_group_name": "nginx-access",
            "log_stream_name": "{instance_id}"
          },
          {
            "file_path": "/var/log/nginx/error.log",
            "log_group_name": "nginx-error",
            "log_stream_name": "{instance_id}"
          }
        ]
      }
    }
  }
}
    </pre>
    <li>Apply the configuration and start the agent:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl \
  -a fetch-config -m ec2 -c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json -s
    </pre>
    <li>Logs now appear in **CloudWatch Logs** under the configured log groups and streams.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Sending Logs to Amazon S3</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Install the CloudWatch Agent or use a cron job/script to periodically push logs to S3.</li>
    <li>Example: Upload Nginx logs daily to S3:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws s3 cp /var/log/nginx/access.log s3://my-ec2-logs/nginx/access-$(date +%F).log
aws s3 cp /var/log/nginx/error.log s3://my-ec2-logs/nginx/error-$(date +%F).log
    </pre>
    <li>Use **S3 Lifecycle Policies** to archive or delete old logs automatically to save cost.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Centralizing Logs for Multiple Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use a **single CloudWatch log group** per application and use instance ID as **log stream**.</li>
    <li>For S3, organize logs using **prefixes** per instance or application:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
s3://my-ec2-logs/<application>/<instance-id>/YYYY/MM/DD/logfile.log
    </pre>
    <li>Combine with **AWS Lambda** for processing logs (parsing, alerting, metrics extraction).</li>
    <li>Optionally, use **CloudWatch Logs Insights** to query and visualize logs in real-time.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **IAM roles** with least privilege for EC2 to send logs to CloudWatch or S3.</li>
    <li>Set **retention policies** for log groups to avoid unlimited storage costs.</li>
    <li>For S3, use **encryption (SSE-S3 or SSE-KMS)** for sensitive logs.</li>
    <li>Centralize logs for multiple instances in a consistent **naming convention** for easier search and analysis.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-log-centralization.png" alt="EC2 Log Centralization in CloudWatch and S3" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-xray" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Tracing EC2 Requests Using AWS X-Ray in Microservices</h2>

  <p class="mb-4 text-gray-700">
    AWS X-Ray helps you **analyze and debug distributed applications**, including microservices running on EC2 instances. It provides **end-to-end request tracing**, latency breakdowns, and identifies performance bottlenecks.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Install the X-Ray Daemon on EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>The **X-Ray daemon** receives trace data from your application and sends it to X-Ray service.</li>
    <li>Linux installation example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
curl -O https://s3.us-east-1.amazonaws.com/aws-xray-assets.us-east-1/xray-daemon/aws-xray-daemon-linux-3.x.zip
unzip aws-xray-daemon-linux-3.x.zip -d /usr/local/bin
sudo chmod +x /usr/local/bin/xray
sudo xray &amp;
    </pre>
    <li>Windows installation: download the MSI installer from the <a href="https://docs.aws.amazon.com/xray/latest/devguide/xray-daemon.html" class="text-indigo-600 hover:underline">AWS X-Ray Docs</a> and run it as a service.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Configure IAM Role for EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach the **AWSXRayDaemonWriteAccess** policy to the EC2 instance role.</li>
    <li>This allows the daemon to send trace data to X-Ray without storing AWS credentials.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Instrument Your Application</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **X-Ray SDK** for your programming language (Java, Node.js, Python, etc.).</li>
    <li>Java example using AWS X-Ray SDK:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
import com.amazonaws.xray.AWSXRay;
import com.amazonaws.xray.AWSXRayRecorderBuilder;
import com.amazonaws.xray.strategy.sampling.LocalizedSamplingStrategy;

AWSXRayRecorderBuilder builder = AWSXRayRecorderBuilder.standard()
    .withSamplingStrategy(new LocalizedSamplingStrategy("sampling-rules.json"));
AWSXRay.setGlobalRecorder(builder.build());

// Instrument a method
AWSXRay.beginSegment("ProcessRequest");
try {
    // Your business logic here
} finally {
    AWSXRay.endSegment();
}
    </pre>
    <li>Node.js example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
const AWSXRay = require('aws-xray-sdk');
const express = require('express');
const app = express();

app.use(AWSXRay.express.openSegment('MyApp'));

// Your routes here

app.use(AWSXRay.express.closeSegment());
app.listen(3000);
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Visualizing Traces</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Open the **X-Ray Console** → Traces to see request flow across EC2 instances and microservices.</li>
    <li>Identify **latency hotspots, errors, and exceptions** in the service map.</li>
    <li>Use **filter expressions** to drill down into specific endpoints or EC2 instance traces.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **sampling rules** to avoid high-cost logging for every request.</li>
    <li>Instrument all **microservices consistently** for complete end-to-end tracing.</li>
    <li>Combine with **CloudWatch metrics and alarms** for proactive monitoring.</li>
    <li>Secure your EC2 role with **least privilege** IAM policies for X-Ray access.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-xray-tracing.png" alt="EC2 X-Ray Tracing" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-multi-az" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Deploying EC2 Instances Across Multiple Availability Zones (AZs)</h2>

  <p class="mb-4 text-gray-700">
    Deploying EC2 instances across multiple AZs improves **high availability and fault tolerance**. If one AZ fails, instances in other AZs continue serving traffic.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Choose a VPC and Subnets</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create or select a VPC with multiple subnets in different AZs.</li>
    <li>Example: <strong>VPC-12345</strong> with subnets:</li>
    <ul class="list-disc list-inside ml-4 space-y-1">
      <li>Subnet-A (AZ us-east-1a)</li>
      <li>Subnet-B (AZ us-east-1b)</li>
      <li>Subnet-C (AZ us-east-1c)</li>
    </ul>
    <li>Ensure proper **route tables** and **Internet Gateway (IGW)** for public instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Launch EC2 Instances in Each AZ</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch instances using **same AMI and instance type** for uniformity.</li>
    <li>Example CLI to launch in different AZs:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 run-instances --image-id ami-0abcd1234efgh5678 \
  --count 1 --instance-type t2.micro --subnet-id subnet-12345 --key-name MyKey

aws ec2 run-instances --image-id ami-0abcd1234efgh5678 \
  --count 1 --instance-type t2.micro --subnet-id subnet-67890 --key-name MyKey
    </pre>
    <li>Assign **security groups** consistently across all instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Use Load Balancer for Traffic Distribution</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create an **Application Load Balancer (ALB)** or **Network Load Balancer (NLB)**.</li>
    <li>Add **target groups** with instances from multiple AZs.</li>
    <li>Example: ALB automatically distributes requests across instances in AZ us-east-1a, us-east-1b, and us-east-1c.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Implement Auto Scaling Across AZs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create an **Auto Scaling Group (ASG)** with subnets in multiple AZs.</li>
    <li>Specify **desired capacity, min, and max instances**.</li>
    <li>Enable **health checks** via EC2 and ALB to automatically replace unhealthy instances.</li>
    <li>Example: ASG spans us-east-1a, us-east-1b, and us-east-1c with 2 instances per AZ.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always distribute instances across **at least 2 AZs** for high availability.</li>
    <li>Use **Elastic IPs** or **DNS-based routing** for public-facing services.</li>
    <li>Combine with **CloudWatch alarms** and **Auto Scaling** for automatic recovery.</li>
    <li>Monitor AZ usage to avoid **single AZ over-provisioning**.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-multi-az.png" alt="EC2 Multi-AZ Deployment" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-auto-recovery" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Setting Up EC2 Auto Recovery for Critical Workloads</h2>

  <p class="mb-4 text-gray-700">
    EC2 Auto Recovery automatically recovers an instance if it becomes impaired due to **hardware failure or system issues**, minimizing downtime for critical workloads.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Enable CloudWatch Monitoring</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Auto Recovery requires **detailed CloudWatch monitoring** (enabled by default on newer instances).</li>
    <li>You can enable it via console or CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 monitor-instances --instance-ids i-1234567890abcdef0
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Create a CloudWatch Alarm for Recovery</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to <strong>CloudWatch → Alarms → Create Alarm</strong>.</li>
    <li>Choose the **EC2 metric**: <strong>StatusCheckFailed_System</strong>.</li>
    <li>Set threshold: **≥ 1** for 1-2 consecutive periods.</li>
    <li>In the actions, select <strong>Recover this instance</strong>.</li>
    <li>Example CLI to create an alarm:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws cloudwatch put-metric-alarm \
  --alarm-name "EC2AutoRecovery-i-1234567890abcdef0" \
  --metric-name StatusCheckFailed_System \
  --namespace AWS/EC2 \
  --statistic Maximum \
  --period 60 \
  --threshold 1 \
  --comparison-operator GreaterThanOrEqualToThreshold \
  --dimensions Name=InstanceId,Value=i-1234567890abcdef0 \
  --evaluation-periods 2 \
  --alarm-actions arn:aws:automate:us-east-1:ec2:recover
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Testing Auto Recovery</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Simulate a system failure by stopping critical processes or using EC2 Recovery simulation tools.</li>
    <li>Verify that CloudWatch triggers the **Recover action** and the instance is rebooted on a healthy host.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **IAM roles** with permissions for CloudWatch and EC2 actions.</li>
    <li>Combine with **Multi-AZ deployment** for additional redundancy.</li>
    <li>Enable **detailed monitoring** to improve detection and reduce recovery time.</li>
    <li>Use **CloudWatch Logs** and alarms to monitor recovery events.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-auto-recovery.png" alt="EC2 Auto Recovery Setup" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>


<section id="ec2-backup-restore" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Backing Up EC2 Data and Restoring in Another Region</h2>

  <p class="mb-4 text-gray-700">
    Backing up EC2 data ensures **disaster recovery, business continuity, and cross-region replication**. AWS provides **EBS snapshots** and **AMIs** to backup instances and restore them in another region.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create an EBS Snapshot</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Stop the EC2 instance (optional but recommended for consistent data).</li>
    <li>Create a snapshot of the attached EBS volume:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-snapshot \
  --volume-id vol-0123456789abcdef0 \
  --description "Backup of EC2 data"
    </pre>
    <li>Snapshot ID will be returned, e.g., <code>snap-0abc1234def5678gh</code>.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Copy Snapshot to Another Region</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use the snapshot ID to copy it to another region:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 copy-snapshot \
  --source-region us-east-1 \
  --source-snapshot-id snap-0abc1234def5678gh \
  --destination-region us-west-2 \
  --description "Cross-region backup of EC2 data"
    </pre>
    <li>The copied snapshot in the destination region will have a new snapshot ID.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Restore EC2 Data in Another Region</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a new volume from the snapshot in the destination region:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-volume \
  --region us-west-2 \
  --snapshot-id snap-0xyz9876abc54321def \
  --availability-zone us-west-2a \
  --volume-type gp3
    </pre>
    <li>Launch a new EC2 instance in the destination region.</li>
    <li>Attach the restored volume to the instance:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 attach-volume \
  --volume-id vol-0abcdef1234567890 \
  --instance-id i-0abcdef1234567890 \
  --device /dev/sdf
    </pre>
    <li>Mount the volume inside the EC2 instance to access the data.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Using AMI for Full Instance Backup</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create an AMI of the EC2 instance:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-image \
  --instance-id i-0123456789abcdef0 \
  --name "EC2Backup-AMI" \
  --no-reboot
    </pre>
    <li>Copy the AMI to another region:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 copy-image \
  --source-region us-east-1 \
  --source-image-id ami-0abc1234def5678gh \
  --region us-west-2 \
  --name "EC2Backup-AMI-Copy"
    </pre>
    <li>Launch a new EC2 instance from the copied AMI in the destination region.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Automate backups using **AWS Backup** or CloudWatch Events.</li>
    <li>Encrypt snapshots and AMIs for sensitive data using **KMS keys**.</li>
    <li>Regularly test **restore procedures** to ensure reliability.</li>
    <li>Use consistent **naming conventions** for snapshots and AMIs across regions.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cross-region-backup.png" alt="EC2 Cross-Region Backup and Restore" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-blue-green" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Blue-Green Deployment for EC2 Services</h2>

  <p class="mb-4 text-gray-700">
    Blue-Green Deployment is a **release management strategy** where two identical environments (Blue and Green) exist. One environment serves production traffic while the other is idle or used for staging. This approach allows **zero-downtime deployments** and easy rollback.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Setup Blue and Green Environments</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create two identical EC2 environments (Blue and Green) with the same **VPC, subnets, security groups, and load balancers**.</li>
    <li>Example: Blue environment runs current production, Green is idle for staging new release.</li>
    <li>Both environments should have the same **database connection**, or use **read replicas** to avoid data conflicts during testing.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Deploy New Version to Green Environment</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy the new application version on EC2 instances in the Green environment.</li>
    <li>Perform **integration tests, performance checks, and monitoring** in Green.</li>
    <li>Example CLI to deploy via CodeDeploy:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws deploy create-deployment \
  --application-name MyApp \
  --deployment-group-name GreenDeploymentGroup \
  --s3-location bucket=mybucket,key=myapp-v2.zip,bundleType=zip
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Switch Traffic Using Load Balancer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Point the **ALB/NLB** from Blue to Green environment after verification.</li>
    <li>Example: Update **target group** of ALB to include Green EC2 instances:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 modify-target-group-attributes \
  --target-group-arn arn:aws:elasticloadbalancing:...:targetgroup/green-tg \
  --attributes Key=deregistration_delay.timeout_seconds,Value=30
    </pre>
    <li>Monitor traffic and logs to ensure the application behaves correctly.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Rollback Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If issues occur in Green, switch back to Blue using the load balancer.</li>
    <li>No downtime occurs because Blue environment is still running production traffic.</li>
    <li>Rollback CLI example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws elbv2 modify-listener \
  --listener-arn arn:aws:elasticloadbalancing:...:listener/app/my-alb/50dc6c495c0c9188 \
  --default-actions Type=forward,TargetGroupArn=blue-target-group-arn
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Infrastructure as Code** (CloudFormation/Terraform) to maintain consistent environments.</li>
    <li>Automate **deployment, testing, and traffic switching** to reduce human error.</li>
    <li>Keep **databases backward compatible** to allow smooth switch between environments.</li>
    <li>Combine with **Auto Scaling Groups** to scale EC2 instances in both environments automatically.</li>
    <li>Monitor with **CloudWatch, X-Ray, and logs** for early detection of issues.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-blue-green.png" alt="EC2 Blue-Green Deployment" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-migration" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Migrating On-Premises Servers to EC2 with Minimal Downtime</h2>

  <p class="mb-4 text-gray-700">
    Migrating on-premises Linux or Windows servers to EC2 requires careful planning to ensure **minimal downtime**. AWS provides tools like **AWS Application Migration Service (MGN)**, **Server Migration Service (SMS)**, and **AMI import/export**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Assessment and Planning</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Identify workloads, OS types, storage, network dependencies, and critical applications.</li>
    <li>Estimate EC2 instance types and storage volumes required for migration.</li>
    <li>Plan **cutover windows** and fallback strategy in case of issues.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Choose Migration Tool</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>AWS Application Migration Service (MGN)</strong> - replicates live servers to EC2 with minimal downtime.</li>
    <li><strong>AWS Server Migration Service (SMS)</strong> - schedules incremental replication of virtual machines.</li>
    <li><strong>VM Import/Export</strong> - converts on-prem VMs to EC2 AMIs for manual launch.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Continuous Replication</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Set up the migration tool to continuously replicate **disk data and configuration** from on-prem to AWS.</li>
    <li>This ensures the EC2 instance is nearly up-to-date before cutover.</li>
    <li>Example: With MGN, replicated instances remain in **“ready” state** while on-prem continues to serve traffic.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Testing the Migration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch EC2 test instances from replicated data without affecting on-prem production.</li>
    <li>Validate **application functionality, network connectivity, and security group rules**.</li>
    <li>Check database consistency and service dependencies.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Cutover to EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Schedule a **short downtime window** or maintenance period.</li>
    <li>Stop the replication on on-prem server.</li>
    <li>Launch the EC2 instance using the latest replicated snapshot.</li>
    <li>Update DNS or load balancer to point to EC2 instance for production traffic.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Validation and Cleanup</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Monitor logs, metrics, and application performance.</li>
    <li>Decommission on-prem servers if migration is successful.</li>
    <li>Implement **backups, CloudWatch monitoring, and Auto Scaling** for EC2 workloads.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Test migration in a **staging environment** first.</li>
    <li>Replicate **critical workloads incrementally** for minimal downtime.</li>
    <li>Ensure **IAM roles, security groups, and network ACLs** match production requirements.</li>
    <li>Keep **rollback plan** ready in case of unforeseen issues during cutover.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-migration.png" alt="EC2 On-Prem Migration" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-iam-roles" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Attaching IAM Roles to EC2 Instances for Secure AWS Access</h2>

  <p class="mb-4 text-gray-700">
    IAM roles allow EC2 instances to securely access AWS services like **S3, DynamoDB, or SNS** without embedding credentials in the application. Roles provide **temporary, automatically rotated credentials**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create an IAM Role for EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to the AWS console: <strong>IAM → Roles → Create Role</strong>.</li>
    <li>Select **AWS service → EC2** as the trusted entity.</li>
    <li>Attach a policy that grants the required permissions, e.g., for S3 access:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::my-bucket",
        "arn:aws:s3:::my-bucket/*"
      ]
    }
  ]
}
    </pre>
    <li>Give the role a descriptive name, e.g., <code>EC2-S3-Access-Role</code>.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Attach IAM Role to EC2 Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>While launching a new EC2 instance, in the **Configure Instance** step, select the IAM role under **IAM role**.</li>
    <li>For existing instances, attach the role using the console or CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 associate-iam-instance-profile \
  --instance-id i-0123456789abcdef0 \
  --iam-instance-profile Name=EC2-S3-Access-Role
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Access AWS Services from EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>No access keys or credentials are required in the instance.</li>
    <li>Use AWS SDK or CLI; temporary credentials are automatically provided via **Instance Metadata Service (IMDS)**:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# List objects in S3 bucket from EC2
aws s3 ls s3://my-bucket

# Access DynamoDB table
aws dynamodb scan --table-name MyTable
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **least privilege principle**: grant only required permissions.</li>
    <li>Do **not store AWS credentials** in EC2 environment variables or files.</li>
    <li>Monitor role usage with **CloudTrail** to audit access.</li>
    <li>Use **different roles per application/service** to isolate permissions.</li>
    <li>Ensure **IMDSv2** is enforced for improved security.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-iam-role.png" alt="EC2 IAM Role for S3 Access" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-ebs-encryption" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Encrypting EBS Volumes for Sensitive Workloads</h2>

  <p class="mb-4 text-gray-700">
    Encrypting EBS volumes ensures that data at rest is protected. AWS provides **server-side encryption** using **AWS Key Management Service (KMS)** keys. This is critical for sensitive workloads such as financial, healthcare, or confidential applications.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create an Encrypted EBS Volume</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a new volume in the AWS console and check <strong>Enable Encryption</strong>.</li>
    <li>Choose a KMS key: <strong>AWS-managed key (default)</strong> or your **customer-managed key** for more control.</li>
    <li>CLI example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-volume \
  --availability-zone us-east-1a \
  --size 20 \
  --volume-type gp3 \
  --encrypted \
  --kms-key-id arn:aws:kms:us-east-1:123456789012:key/abcd-ef12-3456
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Encrypt Existing EBS Volumes</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Existing volumes cannot be encrypted in place. Use **snapshot and restore** method:</li>
    <ol class="list-decimal list-inside ml-4 space-y-1 text-gray-700">
      <li>Create a snapshot of the unencrypted volume:</li>
      <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-snapshot --volume-id vol-0123456789abcdef0 --description "Backup before encryption"
      </pre>
      <li>Copy the snapshot with encryption enabled:</li>
      <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 copy-snapshot \
  --source-region us-east-1 \
  --source-snapshot-id snap-0abc1234def5678gh \
  --encrypted \
  --kms-key-id arn:aws:kms:us-east-1:123456789012:key/abcd-ef12-3456
      </pre>
      <li>Create a new EBS volume from the encrypted snapshot and attach to your instance.</li>
    </ol>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Automatic Encryption for New Volumes</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **default EBS encryption** for your AWS account in a region so all new volumes are encrypted automatically.</li>
    <li>Console path: <strong>EC2 → Account Attributes → EBS Encryption → Enable</strong>.</li>
    <li>CLI example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 enable-ebs-encryption-by-default
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **customer-managed KMS keys** for better access control and auditing.</li>
    <li>Encrypt both **root and data volumes** for sensitive workloads.</li>
    <li>Regularly **rotate KMS keys** to comply with security policies.</li>
    <li>Ensure **backup snapshots** are encrypted and access-controlled.</li>
    <li>Combine with **security groups, IAM roles, and monitoring** for complete data protection.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ebs-encryption.png" alt="EC2 EBS Encryption" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-secret-rotation" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Rotating Secrets for EC2 Without Downtime</h2>

  <p class="mb-4 text-gray-700">
    Applications running on EC2 often require sensitive information like database credentials, API keys, or certificates. To maintain security, secrets must be **rotated periodically** without causing downtime. AWS Secrets Manager or Parameter Store can be used for automated rotation.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Use AWS Secrets Manager</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a secret in Secrets Manager for your credentials (e.g., DB username/password).</li>
    <li>Enable automatic rotation with a Lambda function or use AWS-provided rotation templates.</li>
    <li>Example: Create a secret and enable rotation for RDS:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws secretsmanager create-secret \
  --name MyDatabaseSecret \
  --description "DB credentials for production app" \
  --secret-string '{"username":"dbuser","password":"DbPass123!"}' \
  --tags Key=Environment,Value=Production
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Access Secrets from EC2 Securely</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach an **IAM role** to the EC2 instance with permissions to read the secret:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
{
  "Effect": "Allow",
  "Action": ["secretsmanager:GetSecretValue"],
  "Resource": "arn:aws:secretsmanager:region:account-id:secret:MyDatabaseSecret-*"
}
    </pre>
    <li>Retrieve secrets at runtime using AWS SDK or CLI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Example in Linux EC2
aws secretsmanager get-secret-value --secret-id MyDatabaseSecret
    </pre>
    <li>Do not store secrets in environment variables or config files permanently.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Implement Zero-Downtime Rotation</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Design your application to **fetch secrets dynamically** from Secrets Manager at runtime.</li>
    <li>Enable **rotation Lambda** to update secrets in the backend (e.g., database) while EC2 instances continue using current secret until refreshed.</li>
    <li>Use caching with a **short TTL** (e.g., 60 seconds) so application reads new secrets automatically without restart.</li>
    <li>Example flow:</li>
    <ol class="list-decimal list-inside ml-4 space-y-1 text-gray-700">
      <li>Lambda rotates DB password in Secrets Manager.</li>
      <li>Application fetches updated secret on next request or after TTL expires.</li>
      <li>No downtime occurs; EC2 instance continues processing requests with old secret until new secret is available.</li>
    </ol>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **IAM roles** instead of hard-coded credentials.</li>
    <li>Enable **automatic rotation** in Secrets Manager or use Lambda functions.</li>
    <li>Use **caching with short TTL** to avoid frequent API calls but allow quick secret refresh.</li>
    <li>Audit access with **CloudTrail** to monitor which EC2 instances accessed secrets.</li>
    <li>Test secret rotation in **staging environment** before production rollout.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-secret-rotation.png" alt="EC2 Secret Rotation Flow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-audit" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Auditing EC2 Access and Logging User Actions</h2>

  <p class="mb-4 text-gray-700">
    Auditing EC2 access is critical for **security and compliance**. AWS provides tools such as <strong>CloudTrail, CloudWatch Logs, and VPC Flow Logs</strong> to monitor, record, and analyze actions performed on EC2 instances and related resources.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Enable AWS CloudTrail</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>CloudTrail records **API calls** made to AWS services, including EC2.</li>
    <li>Log all management events (StartInstances, StopInstances, ModifySecurityGroups, etc.).</li>
    <li>Steps:</li>
    <ol class="list-decimal list-inside ml-4 space-y-1 text-gray-700">
      <li>Go to <strong>AWS Console → CloudTrail → Trails → Create Trail</strong>.</li>
      <li>Enable logging for **all regions**.</li>
      <li>Store logs in an **S3 bucket** with restricted access.</li>
    </ol>
    <li>CLI example to create a trail:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws cloudtrail create-trail \
  --name EC2-Audit-Trail \
  --s3-bucket-name my-ec2-audit-logs \
  --is-multi-region-trail
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Monitor EC2 Access with CloudWatch</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create **CloudWatch Alarms** for suspicious activities (e.g., unauthorized Start/Stop actions).</li>
    <li>Forward CloudTrail events to CloudWatch Logs for **real-time monitoring**.</li>
    <li>Example: Filter failed SSH login attempts using CloudWatch Logs Insights:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
fields @timestamp, @message
| filter @message like /Failed password/
| sort @timestamp desc
| limit 20
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Enable VPC Flow Logs for Network Auditing</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>VPC Flow Logs capture **IP traffic** to/from EC2 instances, helping detect unauthorized access or unusual traffic patterns.</li>
    <li>Create a Flow Log in the VPC, subnet, or network interface level and store logs in **CloudWatch Logs or S3**.</li>
    <li>CLI example:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-flow-logs \
  --resource-type VPC \
  --resource-ids vpc-0123456789abcdef0 \
  --traffic-type ALL \
  --log-destination-type cloud-watch-logs \
  --log-group-name EC2-VPC-FlowLogs
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Use IAM Policies for Auditing</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **least-privilege access** for users and applications.</li>
    <li>Attach IAM policies that **log all actions** and allow CloudTrail to capture them.</li>
    <li>Use **IAM Access Analyzer** to detect unused or overly permissive permissions.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Centralize logs in an **S3 bucket with versioning and MFA delete enabled**.</li>
    <li>Enable **CloudTrail Insights** to detect unusual API activity.</li>
    <li>Regularly review CloudWatch alarms and VPC Flow Logs for **suspicious patterns**.</li>
    <li>Automate reporting and alerting for compliance audits.</li>
    <li>Integrate with **SIEM tools** for advanced analysis.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-audit.png" alt="EC2 Access Auditing" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>




<section id="ec2-ami-hardening" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Hardening EC2 AMIs for Security Best Practices</h2>

  <p class="mb-4 text-gray-700">
    Hardening an Amazon Machine Image (AMI) ensures that EC2 instances launched from it are secure, compliant, and resistant to attacks. This includes operating system configuration, patching, access controls, and monitoring.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Start with a Minimal Base AMI</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Choose the latest AWS-managed or vendor-provided AMI.</li>
    <li>Prefer **minimal images** to reduce attack surface (e.g., Amazon Linux 2 minimal, Ubuntu Server minimal).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Apply OS Updates and Security Patches</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Update the operating system and installed packages:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# For Amazon Linux / RHEL
sudo yum update -y

# For Ubuntu / Debian
sudo apt update && sudo apt upgrade -y
    </pre>
    <li>Regularly maintain and rebuild AMIs to include the latest patches.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Configure Secure Access</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **SSH key pairs** for authentication; disable password login:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo sed -i 's/PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
sudo systemctl restart sshd
    </pre>
    <li>Enforce **strong IAM roles** for AWS API access instead of embedding credentials.</li>
    <li>Configure **sudo access** carefully; only grant to required users.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Install and Configure Security Tools</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **firewall rules** using security groups and OS-level firewalls (iptables, ufw).</li>
    <li>Install intrusion detection tools like **OSSEC, Wazuh, or Amazon Inspector**.</li>
    <li>Configure **CloudWatch Logs** for system and application log monitoring.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Remove Unnecessary Services and Software</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Uninstall packages and services not required for your workload.</li>
    <li>Disable default accounts and services that could be exploited.</li>
    <li>Ensure default ports are closed unless explicitly needed.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Harden File System and Permissions</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Set strict permissions on sensitive files:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo chmod 600 /etc/ssh/ssh_host_*
sudo chmod 700 /home/ec2-user
    </pre>
    <li>Use **encrypted EBS volumes** for sensitive data.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Audit and Compliance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run **AWS Inspector** or CIS benchmarks to verify security compliance.</li>
    <li>Enable **CloudTrail** for auditing API calls.</li>
    <li>Regularly review and update AMI hardening procedures.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">8. Create the Hardened AMI</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>After configuring and securing the instance, create a custom AMI:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 create-image \
  --instance-id i-0123456789abcdef0 \
  --name "Hardened-EC2-AMI" \
  --description "AMI hardened according to security best practices" \
  --no-reboot
    </pre>
    <li>Use this AMI for launching production workloads to ensure consistent security baseline.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ami-hardening.png" alt="EC2 AMI Hardening Process" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-user-data" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Bootstrapping EC2 Instances with User-Data Scripts</h2>

  <p class="mb-4 text-gray-700">
    AWS EC2 allows you to **automatically configure instances during launch** using <strong>user-data scripts</strong>. This is commonly used to install software, apply updates, or configure services without manual intervention.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. User-Data Basics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>User-data is **executed only at the first boot** of the instance.</li>
    <li>Supports **shell scripts (Linux)** and **PowerShell scripts (Windows)**.</li>
    <li>Can include cloud-init directives for advanced configuration.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Example: Bootstrapping a Linux EC2 Instance</h3>
  <p class="text-gray-700 mb-2">Install updates, Apache server, and a sample web page:</p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
#!/bin/bash
# Update OS packages
yum update -y

# Install Apache HTTP server
yum install httpd -y

# Start Apache service
systemctl start httpd
systemctl enable httpd

# Create a sample index.html
echo "&lt;h1&gt;Welcome to My EC2 Instance&lt;/h1&gt;" &gt; /var/www/html/index.html
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Adding User-Data via AWS Console</h3>
  <ol class="list-decimal list-inside ml-4 space-y-1 text-gray-700">
    <li>Go to <strong>EC2 → Launch Instance → Configure Instance</strong>.</li>
    <li>Scroll down to the <strong>User Data</strong> section.</li>
    <li>Paste your script and select <strong>As text</strong>.</li>
    <li>Complete instance launch. Script executes automatically on first boot.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Adding User-Data via CLI</h3>
  <p class="text-gray-700 mb-2">Example: Launch an EC2 instance with a shell script as user-data:</p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 run-instances \
  --image-id ami-0123456789abcdef0 \
  --count 1 \
  --instance-type t2.micro \
  --key-name MyKeyPair \
  --security-group-ids sg-0123456789abcdef0 \
  --subnet-id subnet-0123456789abcdef0 \
  --user-data file://bootstrap.sh
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Keep scripts **idempotent**—safe to run multiple times without causing errors.</li>
    <li>Use **logging** to /var/log/cloud-init-output.log for troubleshooting.</li>
    <li>Store sensitive information in **Secrets Manager**; avoid hardcoding passwords in user-data.</li>
    <li>For complex setups, consider **configuration management tools** (Ansible, Chef, Puppet) triggered via user-data.</li>
    <li>Test scripts in a **staging environment** before production launch.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-user-data.png" alt="EC2 User-Data Bootstrapping" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-container-apps" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Running Containerized Applications on EC2</h2>

  <p class="mb-4 text-gray-700">
    Containerized applications allow consistent deployment across environments. You can run containers manually on EC2 using **Docker**, or use **Amazon ECS (Elastic Container Service)** for orchestration.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Using Docker Manually on EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch an EC2 instance with a supported OS (Amazon Linux 2, Ubuntu, etc.).</li>
    <li>Install Docker:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Amazon Linux 2
sudo amazon-linux-extras install docker -y
sudo service docker start
sudo usermod -a -G docker ec2-user
    </pre>
    <li>Pull and run a container, e.g., Nginx:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
docker pull nginx:latest
docker run -d -p 80:80 --name webserver nginx:latest
    </pre>
    <li>Access your containerized app via the EC2 public IP.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Running Containers with ECS (EC2 Launch Type)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Install **ECS agent** on EC2 instances:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Amazon Linux 2 ECS-optimized AMI already includes ECS agent
# For custom AMI, install agent manually
sudo yum install -y ecs-init
sudo systemctl enable --now ecs
    </pre>
    <li>Create an ECS cluster and register your EC2 instance:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ecs create-cluster --cluster-name MyECSCluster
# Assign EC2 instances to cluster using ECS configuration
    </pre>
    <li>Define a **task definition** with container image, ports, and resources.</li>
    <li>Run the task on your ECS cluster:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ecs run-task \
  --cluster MyECSCluster \
  --launch-type EC2 \
  --task-definition my-task-def
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **ECS-optimized AMIs** for easier setup.</li>
    <li>Define **task CPU/memory limits** to avoid over-provisioning.</li>
    <li>Use **Security Groups** to restrict access to container ports.</li>
    <li>Leverage **CloudWatch Logs** for container log monitoring.</li>
    <li>Consider **ECS Service** for long-running, auto-restarting containers.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ecs-docker.png" alt="EC2 Containerized Apps Flow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-cicd" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">CI/CD Pipeline to Deploy Code to EC2 Instances</h2>

  <p class="mb-4 text-gray-700">
    Automating deployments to EC2 improves efficiency, reduces errors, and ensures consistent environments. Common tools include **GitHub Actions, AWS CodePipeline, Jenkins, and Ansible**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Architecture Overview</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>**Source Control**: GitHub, GitLab, or CodeCommit holds your application code.</li>
    <li>**Build Stage**: Compile code, run tests, and create artifacts (e.g., JAR, WAR, Docker image).</li>
    <li>**Deploy Stage**: Push artifacts to EC2 instances automatically.</li>
    <li>Optionally use **Load Balancers** and **Auto Scaling** to deploy across multiple instances without downtime.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Example: GitHub Actions Deploying to EC2</h3>
  <p class="text-gray-700 mb-2">Workflow steps:</p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
name: CI-CD to EC2

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          java-version: '17'

      - name: Build Project
        run: mvn clean package

      - name: Deploy to EC2 via SSH
        uses: appleboy/ssh-action@v0.1.8
        with:
          host: ${{ secrets.EC2_HOST }}
          username: ec2-user
          key: ${{ secrets.EC2_KEY }}
          port: 22
          script: |
            sudo systemctl stop my-app
            cp /home/ec2-user/app/target/my-app.jar /opt/my-app/my-app.jar
            sudo systemctl start my-app
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Using AWS CodePipeline</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>**Source Stage**: Pull code from CodeCommit, GitHub, or S3.</li>
    <li>**Build Stage**: Use CodeBuild to compile, test, and package the application.</li>
    <li>**Deploy Stage**: Use CodeDeploy to push the artifact to EC2 instances.</li>
    <li>Supports **blue-green or rolling deployments** for zero downtime.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Store SSH keys or credentials securely in **GitHub Secrets or AWS Secrets Manager**.</li>
    <li>Automate testing in the build stage to catch errors early.</li>
    <li>Use **tags or naming conventions** to track deployments.</li>
    <li>Integrate **CloudWatch or SNS notifications** for success/failure alerts.</li>
    <li>For multiple instances, use **Ansible, Chef, or AWS Systems Manager Run Command** to deploy simultaneously.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cicd.png" alt="CI/CD Pipeline to EC2" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-scaling" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Scaling EC2-Based Microservices for Unpredictable Traffic</h2>

  <p class="mb-4 text-gray-700">
    Microservices running on EC2 instances must handle **unpredictable traffic patterns** efficiently. AWS provides **Auto Scaling Groups (ASG), Load Balancers, and CloudWatch metrics** to automatically adjust compute capacity.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Horizontal Scaling with Auto Scaling Groups</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create an **Auto Scaling Group** with a minimum, desired, and maximum number of EC2 instances.</li>
    <li>Attach an **Application Load Balancer (ALB)** to distribute traffic evenly.</li>
    <li>Define **scaling policies** triggered by CloudWatch metrics like CPU, memory, or request count.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Vertical Scaling (Instance Resize)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Change the instance type (e.g., t3.medium → m5.large) for higher capacity.</li>
    <li>Vertical scaling often requires stopping the instance, so it’s less ideal for real-time traffic spikes.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Metrics and Scaling Triggers</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>**CPUUtilization**: Increase instances when average CPU > 70%.</li>
    <li>**Memory Utilization**: Custom CloudWatch metrics can track memory usage.</li>
    <li>**Request Count / Latency**: ALB metrics can trigger scaling for high load.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Load Balancing</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **ALB** for HTTP/HTTPS traffic distribution.</li>
    <li>Use **NLB** for TCP/UDP or low-latency traffic.</li>
    <li>Ensure **health checks** are configured to remove unhealthy instances from the load balancer.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Auto Scaling Strategies for Unpredictable Traffic</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>**Dynamic Scaling**: Scale out/in based on real-time metrics.</li>
    <li>**Scheduled Scaling**: Scale for predictable traffic patterns (e.g., peak hours).</li>
    <li>**Target Tracking Scaling**: Maintain a target metric (CPU < 60%) automatically.</li>
    <li>Combine **On-Demand, Reserved, and Spot Instances** for cost optimization while handling spikes.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example: Dynamic Scaling Policy</h3>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws autoscaling put-scaling-policy \
  --auto-scaling-group-name MyMicroserviceASG \
  --policy-name ScaleOutPolicy \
  --policy-type TargetTrackingScaling \
  --target-tracking-configuration file://target-tracking.json
  </pre>
  <p class="text-gray-700 mt-2">
    Where <code>target-tracking.json</code> contains the metric type (CPUUtilization) and target value.
  </p>

  <div class="mt-4">
    <img src="images/ec2-scaling.png" alt="EC2 Microservices Auto Scaling" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-event-driven" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Integrating EC2 with SQS, SNS, and Lambda for Event-Driven Architectures</h2>

  <p class="mb-4 text-gray-700">
    Event-driven architectures decouple components and enable asynchronous processing. EC2 instances can **produce or consume events** via AWS messaging services like SQS, SNS, and Lambda.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Using SQS (Simple Queue Service)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 can send messages to SQS for **asynchronous processing**:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws sqs send-message \
  --queue-url https://sqs.us-east-1.amazonaws.com/123456789012/MyQueue \
  --message-body "Process this task"
    </pre>
    <li>EC2 can also poll messages using SDK or CLI and process them:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws sqs receive-message --queue-url MyQueue --max-number-of-messages 5
    </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Using SNS (Simple Notification Service)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instances can **publish events to SNS topics** for fan-out to multiple subscribers:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws sns publish \
  --topic-arn arn:aws:sns:us-east-1:123456789012:MyTopic \
  --message "New user registered"
    </pre>
    <li>Subscribers can include **SQS queues, Lambda functions, HTTP endpoints, or email/SMS notifications**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Triggering Lambda from EC2 Events</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 can trigger a Lambda function via SNS or SQS to perform processing asynchronously:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# EC2 publishes a message to SNS
aws sns publish --topic-arn MyTopic --message "Run background job"

# Lambda subscribed to the topic executes automatically
    </pre>
    <li>Lambda can perform tasks such as data transformation, notification, or updating databases without impacting EC2 performance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Event Flow</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>User uploads a file to EC2-hosted web service.</li>
    <li>EC2 instance sends a message to an SQS queue: "Process File".</li>
    <li>SQS triggers a Lambda function to process the file asynchronously.</li>
    <li>Lambda publishes a result to an SNS topic. Other services (email, dashboard, or another EC2 service) subscribe to receive notifications.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **IAM roles** for EC2 and Lambda to access SQS/SNS securely without storing credentials.</li>
    <li>Ensure **idempotent processing**: messages may be delivered more than once.</li>
    <li>Monitor queues and Lambda executions via **CloudWatch Metrics** and **Alarms**.</li>
    <li>Use **Dead-Letter Queues (DLQ)** for failed message processing.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-event-driven.png" alt="EC2 Event-Driven Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-change-ami" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Changing the AMI of a Running EC2 Instance</h2>

  <p class="mb-4 text-gray-700">
    Directly changing the AMI of a running EC2 instance is **not possible** because the AMI defines the instance’s root volume at launch. However, you can achieve the same result with **minimal downtime** using the following methods.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create an AMI from the Existing Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to <strong>EC2 Console → Instances</strong>.</li>
    <li>Select the instance and choose <strong>Actions → Image → Create Image</strong>.</li>
    <li>This creates a snapshot of the instance’s volumes, generating a **custom AMI**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Launch a New Instance from the Desired AMI</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use the new AMI (official or custom) to launch a fresh EC2 instance.</li>
    <li>Optionally, configure the same **instance type, VPC, subnets, and security groups** as the original.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Migrate Data and Configuration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach the original instance’s **EBS volumes** to the new instance if needed.</li>
    <li>Copy configuration files, application data, and environment variables.</li>
    <li>Use automation tools (Ansible, CloudFormation, or Terraform) for faster migration.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Switch to the New Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Update **Elastic IP** or **DNS records** to point to the new instance.</li>
    <li>Verify the application is running correctly before terminating the old instance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Optional: Use EC2 Launch Templates for Future AMI Changes</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Store instance configuration in a **Launch Template**.</li>
    <li>When a new AMI is available, **update the template** and launch new instances automatically.</li>
    <li>Combine with **Auto Scaling Groups** for rolling updates with zero downtime.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-change-ami.png" alt="EC2 Change AMI Flow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-automation" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Automating EC2 Launches Using CloudFormation or CDK</h2>

  <p class="mb-4 text-gray-700">
    Automating EC2 instance launches ensures consistent configurations, reduces human error, and supports infrastructure-as-code practices. AWS provides **CloudFormation** and **CDK (Cloud Development Kit)** for this purpose.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Using CloudFormation</h3>
  <p class="text-gray-700 mb-2">
    CloudFormation allows you to define your EC2 resources in **YAML or JSON templates**.
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
AWSTemplateFormatVersion: '2010-09-09'
Description: Launch EC2 instance automatically

Resources:
  MyEC2Instance:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: t2.micro
      ImageId: ami-0abcdef1234567890
      KeyName: MyKeyPair
      SecurityGroupIds:
        - sg-0123456789abcdef0
      SubnetId: subnet-0abc1234
  </pre>
  <p class="text-gray-700 mt-2">
    Deploy using CLI: <code>aws cloudformation create-stack --stack-name MyStack --template-body file://ec2-template.yaml</code>
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Using AWS CDK</h3>
  <p class="text-gray-700 mb-2">
    CDK allows you to define infrastructure using **programming languages** like TypeScript, Python, Java, or C#.
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
// TypeScript example
import * as cdk from 'aws-cdk-lib';
import { Instance, InstanceType, AmazonLinuxImage, AmazonLinuxGeneration } from 'aws-cdk-lib/aws-ec2';
import { Stack, StackProps } from 'aws-cdk-lib';
import { Construct } from 'constructs';

export class EC2Stack extends Stack {
  constructor(scope: Construct, id: string, props?: StackProps) {
    super(scope, id, props);

    new Instance(this, 'MyEC2Instance', {
      instanceType: new InstanceType('t2.micro'),
      machineImage: new AmazonLinuxImage({ generation: AmazonLinuxGeneration.AMAZON_LINUX_2 }),
      vpc: myVpc,
      keyName: 'MyKeyPair'
    });
  }
}
  </pre>
  <p class="text-gray-700 mt-2">
    Deploy using CLI: <code>cdk deploy</code>
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **parameters** in CloudFormation for dynamic values like AMI ID, instance type, and key names.</li>
    <li>Use **constructs in CDK** for reusable components.</li>
    <li>Tag your EC2 resources for better management and cost tracking.</li>
    <li>Integrate **Auto Scaling Groups** within your templates for scalable deployments.</li>
    <li>Store templates in **version control** to track changes and enable reproducibility.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-automation.png" alt="EC2 Automation with CloudFormation and CDK" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-health-check" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Checking EC2 Instance Health Programmatically</h2>

  <p class="mb-4 text-gray-700">
    Monitoring the health of EC2 instances is critical to ensure uptime and performance. You can check **system status** and **instance status** using the AWS CLI or SDKs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Using AWS CLI</h3>
  <p class="text-gray-700 mb-2">
    The <code>describe-instance-status</code> command provides status checks for instances.
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 describe-instance-status \
  --instance-ids i-0123456789abcdef0 \
  --include-all-instances
  </pre>
  <p class="text-gray-700 mt-2">
    Example output includes:
    <ul class="list-disc list-inside ml-6 mt-1 text-gray-700">
      <li><strong>SystemStatus</strong>: Indicates AWS system-level health (hardware, networking).</li>
      <li><strong>InstanceStatus</strong>: Indicates instance-level health (OS, boot process, connectivity).</li>
      <li><strong>Events</strong>: Any scheduled maintenance or warnings.</li>
    </ul>
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Using AWS SDK (Python Example)</h3>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
import boto3

ec2 = boto3.client('ec2', region_name='us-east-1')
response = ec2.describe_instance_status(
    InstanceIds=['i-0123456789abcdef0'],
    IncludeAllInstances=True
)
for status in response['InstanceStatuses']:
    print("Instance ID:", status['InstanceId'])
    print("System Status:", status['SystemStatus']['Status'])
    print("Instance Status:", status['InstanceStatus']['Status'])
    print("Events:", status.get('Events', 'None'))
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Monitoring Health in Real-Time</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **CloudWatch metrics** like <code>CPUUtilization</code>, <code>StatusCheckFailed</code>, and <code>NetworkIn/Out</code>.</li>
    <li>Combine with **CloudWatch Alarms** to trigger notifications or automated recovery.</li>
    <li>Automate health checks using **AWS Lambda** to restart or replace failing instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check both **SystemStatus** and **InstanceStatus** for a complete picture.</li>
    <li>Use **IncludeAllInstances=True** to include stopped instances for auditing.</li>
    <li>Combine CLI/SDK checks with **CloudWatch dashboards** for monitoring multiple instances.</li>
    <li>Set up **automated remediation** (Auto Scaling, Lambda) for failing instances.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-health-check.png" alt="EC2 Instance Health Check" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-vpc-connectivity" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Connecting EC2 Instances Across VPCs</h2>

  <p class="mb-4 text-gray-700">
    Sometimes, your architecture requires EC2 instances in different VPCs to communicate securely. AWS provides **VPC Peering** and **Transit Gateway** for this purpose.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. VPC Peering</h3>
  <p class="text-gray-700 mb-2">
    VPC Peering establishes a **direct network route** between two VPCs. Traffic uses private IPs and stays within the AWS network.
  </p>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Supports **one-to-one VPC connectivity**.</li>
    <li>Routing must be configured in route tables of both VPCs.</li>
    <li>Security Groups and Network ACLs must allow traffic between instances.</li>
  </ul>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Example: Create VPC Peering via CLI
aws ec2 create-vpc-peering-connection \
    --vpc-id vpc-aaa111 \
    --peer-vpc-id vpc-bbb222 \
    --region us-east-1
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Transit Gateway</h3>
  <p class="text-gray-700 mb-2">
    Transit Gateway allows **hub-and-spoke connectivity** between multiple VPCs and on-prem networks.
  </p>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Scales to **hundreds of VPCs**.</li>
    <li>Simplifies routing: Attach all VPCs to the Transit Gateway instead of managing multiple peering connections.</li>
    <li>Supports routing policies and network segmentation.</li>
  </ul>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Example: Attach VPC to Transit Gateway via CLI
aws ec2 create-transit-gateway-vpc-attachment \
    --transit-gateway-id tgw-0123456789abcdef0 \
    --vpc-id vpc-aaa111 \
    --subnet-ids subnet-aaa subnet-bbb
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Security and Routing Considerations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Update **route tables** in each VPC to route traffic to the peer VPC or Transit Gateway.</li>
    <li>Configure **Security Groups** to allow traffic on required ports (e.g., HTTP, SSH).</li>
    <li>VPC Peering **does not support transitive routing**. Use Transit Gateway for multi-VPC or hybrid connectivity.</li>
    <li>Monitor traffic flow using **VPC Flow Logs** for troubleshooting.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>VPC A hosts web EC2 instances (frontend).</li>
    <li>VPC B hosts database EC2 instances (backend).</li>
    <li>VPC Peering is created between VPC A and B.</li>
    <li>Route tables are updated so frontend EC2s can reach backend EC2s using private IPs.</li>
    <li>Security Groups are configured to allow port 3306 (MySQL) traffic from VPC A.</li>
  </ol>

  <div class="mt-4">
    <img src="images/ec2-vpc-connectivity.png" alt="EC2 VPC Connectivity" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-private-endpoints" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Accessing S3 or DynamoDB via Private Endpoints from EC2</h2>

  <p class="mb-4 text-gray-700">
    By default, EC2 instances access AWS services over the public internet. To increase security and reduce exposure, you can use <strong>VPC Endpoints</strong> so traffic to S3 or DynamoDB stays within the AWS network.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. VPC Endpoint Types</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>Gateway Endpoint:</strong> Used for <code>S3</code> and <code>DynamoDB</code>. Routes traffic directly through the VPC routing table.</li>
    <li><strong>Interface Endpoint:</strong> Uses <code>ENIs</code> with private IPs to connect to other AWS services securely.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Creating a Gateway Endpoint for S3</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to <strong>VPC Console → Endpoints → Create Endpoint</strong>.</li>
    <li>Select <strong>Service Name</strong>: <code>com.amazonaws.us-east-1.s3</code>.</li>
    <li>Select your <strong>VPC</strong> and <strong>route tables</strong> to associate.</li>
    <li>Click <strong>Create Endpoint</strong>.</li>
  </ul>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Example: Using AWS CLI to create S3 VPC Gateway Endpoint
aws ec2 create-vpc-endpoint \
  --vpc-id vpc-0123456789abcdef0 \
  --service-name com.amazonaws.us-east-1.s3 \
  --route-table-ids rtb-0123456789abcdef0
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Creating a DynamoDB VPC Endpoint</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Select <strong>Service Name</strong>: <code>com.amazonaws.us-east-1.dynamodb</code>.</li>
    <li>Associate the endpoint with your **VPC and route tables**.</li>
    <li>Now EC2 can access DynamoDB without public internet.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Security Considerations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **VPC Endpoint Policies** to restrict access to specific S3 buckets or DynamoDB tables.</li>
    <li>Update **Security Groups** if using Interface Endpoints.</li>
    <li>Ensure **DNS resolution** is enabled in the VPC so endpoint DNS names resolve to private IPs.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Use Case</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>An EC2 instance in a private subnet uploads files to S3 using SDK:</li>
    <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
import boto3

s3 = boto3.client('s3', region_name='us-east-1')
s3.upload_file('file.txt', 'my-secure-bucket', 'file.txt')
    </pre>
    <li>Traffic stays inside AWS network via the **S3 VPC Endpoint**; no public IP is required.</li>
    <li>Similarly, EC2 can query DynamoDB tables through the DynamoDB gateway endpoint securely.</li>
  </ol>

  <div class="mt-4">
    <img src="images/ec2-vpc-endpoints.png" alt="EC2 Private Endpoints for S3/DynamoDB" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-dynamic-sg" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Implementing Dynamic Security Group Rules Based on Environment</h2>

  <p class="mb-4 text-gray-700">
    In multi-environment architectures (dev, staging, production), Security Group (SG) rules often need to differ. Dynamically managing these rules ensures proper access control without manual updates.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Using CloudFormation Parameters</h3>
  <p class="text-gray-700 mb-2">
    You can define environment-specific parameters in your template:
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
Parameters:
  Environment:
    Type: String
    AllowedValues: [dev, staging, prod]
    Default: dev

Resources:
  WebServerSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: Web Server SG
      VpcId: !Ref VPC
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: !If
            - IsProd
            - 10.0.0.0/24
            - 0.0.0.0/0
  </pre>
  <p class="text-gray-700 mt-2">
    Conditional statements let you allow restricted SSH access in production but open access in development.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Using AWS CDK</h3>
  <p class="text-gray-700 mb-2">
    CDK allows programmatic control of SG rules:
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
// TypeScript example
const env = process.env.DEPLOY_ENV || 'dev';

const sg = new SecurityGroup(this, 'WebSG', { vpc });

if (env === 'prod') {
  sg.addIngressRule(Peer.ipv4('10.0.0.0/24'), Port.tcp(22), 'Prod SSH access');
} else {
  sg.addIngressRule(Peer.anyIpv4(), Port.tcp(22), 'Dev SSH access');
}
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Using Automation Scripts</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **AWS CLI scripts** to apply SG rules dynamically:
      <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws ec2 authorize-security-group-ingress \
  --group-id sg-0123456789abcdef0 \
  --protocol tcp \
  --port 22 \
  --cidr 10.0.0.0/24
      </pre>
    </li>
    <li>Integrate with **CI/CD pipelines** to update SG rules based on branch (dev, staging, main).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **least privilege**: only allow required ports and IP ranges per environment.</li>
    <li>Keep **infrastructure-as-code** templates in version control to track changes.</li>
    <li>Automate SG updates as part of deployment pipelines for consistency.</li>
    <li>Monitor with **AWS Config** to detect unintended SG changes.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-dynamic-sg.png" alt="Dynamic Security Group by Environment" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-dynamic-sg" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Implementing Dynamic Security Group Rules Based on Environment or Deployment Stage</h2>

  <p class="mb-4 text-gray-700">
    In modern cloud architectures, you often have multiple deployment environments such as <strong>development</strong>, <strong>staging</strong>, and <strong>production</strong>. Each environment may require different network access rules for your EC2 instances. Implementing dynamic Security Group (SG) rules allows you to automatically configure ingress and egress rules according to the deployment stage, minimizing manual changes and improving security compliance.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Using CloudFormation Parameters and Conditions</h3>
  <p class="text-gray-700 mb-2">
    CloudFormation templates can define <strong>parameters</strong> and <strong>conditions</strong> to apply different SG rules based on environment.
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
Parameters:
  Environment:
    Type: String
    AllowedValues: [dev, staging, prod]
    Default: dev

Conditions:
  IsProd: !Equals [ !Ref Environment, prod ]

Resources:
  WebServerSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: Web Server SG
      VpcId: !Ref VPC
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: !If
            - IsProd
            - 10.0.0.0/24       # Restricted SSH in production
            - 0.0.0.0/0         # Open SSH in dev/staging
  </pre>
  <p class="text-gray-700 mt-2">
    Here, SSH access is limited to a private subnet in production, but allowed globally in development.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Using AWS CDK (Programmatic Approach)</h3>
  <p class="text-gray-700 mb-2">
    CDK allows you to write code that dynamically adjusts SG rules according to environment variables or deployment stage.
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
// TypeScript example
const env = process.env.DEPLOY_ENV || 'dev';

const sg = new SecurityGroup(this, 'WebSG', { vpc });

if (env === 'prod') {
  sg.addIngressRule(Peer.ipv4('10.0.0.0/24'), Port.tcp(22), 'Prod SSH access');
} else {
  sg.addIngressRule(Peer.anyIpv4(), Port.tcp(22), 'Dev/Staging SSH access');
}
  </pre>
  <p class="text-gray-700 mt-2">
    This approach integrates with CI/CD pipelines. For example, `DEPLOY_ENV=prod` ensures the deployed SG rules are production-safe.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Automating via CLI or Scripts</h3>
  <p class="text-gray-700 mb-2">
    You can also use AWS CLI or automation scripts to dynamically adjust SG rules during deployments.
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Example: Authorize SSH ingress for production
aws ec2 authorize-security-group-ingress \
  --group-id sg-0123456789abcdef0 \
  --protocol tcp \
  --port 22 \
  --cidr 10.0.0.0/24

# Example: Open SSH for dev environment
aws ec2 authorize-security-group-ingress \
  --group-id sg-0123456789abcdef0 \
  --protocol tcp \
  --port 22 \
  --cidr 0.0.0.0/0
  </pre>
  <p class="text-gray-700 mt-2">
    These scripts can be executed as part of CI/CD pipelines to enforce environment-specific access automatically.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always follow the **least privilege principle**: allow only necessary ports and IP ranges for each environment.</li>
    <li>Keep all SG rules **infrastructure-as-code templates** or scripts for version control and reproducibility.</li>
    <li>Integrate SG updates into your **CI/CD pipeline** to ensure consistency across environments.</li>
    <li>Use **AWS Config** or CloudWatch to monitor and alert for unauthorized SG changes.</li>
    <li>Consider using **parameterized VPC endpoint access** for service-specific rules (e.g., allowing only private S3 access in production).</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-dynamic-sg.png" alt="Dynamic Security Group Rules" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-monitoring" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Monitoring CPU, Memory, and Disk I/O for EC2</h2>

  <p class="mb-4 text-gray-700">
    Efficient monitoring of EC2 instances is crucial to ensure performance, detect anomalies, and optimize costs. AWS provides multiple tools, such as <strong>CloudWatch Metrics</strong>, <strong>CloudWatch Agent</strong>, and third-party monitoring solutions.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. CPU Monitoring</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>CloudWatch Metric:</strong> <code>CPUUtilization</code> tracks percentage usage over time.</li>
    <li>Set CloudWatch Alarms for thresholds (e.g., CPU > 80% for 5 minutes) to trigger notifications or scaling actions.</li>
    <li>Example CloudWatch CLI command:</li>
  </ul>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
aws cloudwatch put-metric-alarm \
    --alarm-name HighCPUUtilization \
    --metric-name CPUUtilization \
    --namespace AWS/EC2 \
    --statistic Average \
    --period 300 \
    --threshold 80 \
    --comparison-operator GreaterThanThreshold \
    --dimensions Name=InstanceId,Value=i-0123456789abcdef0 \
    --evaluation-periods 2 \
    --alarm-actions arn:aws:sns:us-east-1:123456789012:NotifyMe
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Memory Monitoring</h3>
  <p class="text-gray-700 mb-2">
    By default, EC2 does not send memory metrics to CloudWatch. Install the <strong>CloudWatch Agent</strong> to capture memory usage.
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
# Install CloudWatch Agent on Linux
sudo yum install amazon-cloudwatch-agent -y

# Create agent config for memory metrics
cat <<EOF > /opt/aws/amazon-cloudwatch-agent/bin/config.json
{
  "metrics": {
    "metrics_collected": {
      "mem": {
        "measurement": ["mem_used_percent"]
      }
    }
  }
}
EOF

# Start agent
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl \
  -a fetch-config -m ec2 -c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json -s
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Disk I/O Monitoring</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>CloudWatch Metrics:</strong> <code>DiskReadOps</code>, <code>DiskWriteOps</code>, <code>DiskReadBytes</code>, <code>DiskWriteBytes</code>.</li>
    <li>Monitor high read/write latency or throughput bottlenecks.</li>
    <li>Use CloudWatch Alarms or dashboards to visualize disk performance trends.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable <strong>detailed monitoring</strong> in CloudWatch for 1-minute granularity on EC2.</li>
    <li>Combine CPU, memory, and disk metrics in a <strong>single CloudWatch dashboard</strong> for easier analysis.</li>
    <li>Automate alarms for **auto-scaling** or remediation when thresholds are exceeded.</li>
    <li>Consider **custom metrics** for application-specific monitoring (e.g., JVM heap, DB connections).</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-monitoring.png" alt="EC2 Monitoring Dashboard" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-cloudwatch-logs" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Capturing Application Logs from Multiple EC2 Instances Using CloudWatch Logs Agent</h2>

  <p class="mb-4 text-gray-700">
    To centralize and monitor application logs from multiple EC2 instances, AWS CloudWatch Logs provides a reliable way to collect, store, and visualize logs. Installing the CloudWatch Logs agent on EC2 instances allows you to push logs to CloudWatch, enabling troubleshooting, metrics extraction, and compliance auditing.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Install CloudWatch Logs Agent</h3>
  <p class="text-gray-700 mb-2">
    On Amazon Linux / RHEL / CentOS:
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo yum install -y awslogs
sudo systemctl enable awslogsd
sudo systemctl start awslogsd
  </pre>
  <p class="text-gray-700 mt-2">
    On Ubuntu / Debian:
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo apt-get update
sudo apt-get install -y awslogs
sudo systemctl enable awslogs
sudo systemctl start awslogs
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Configure the Agent</h3>
  <p class="text-gray-700 mb-2">
    Edit the configuration file <code>/etc/awslogs/awslogs.conf</code> or create a custom config for your application logs:
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
[general]
state_file = /var/lib/awslogs/agent-state

[app-log]
file = /var/log/myapp/app.log
log_group_name = myapp-logs
log_stream_name = {instance_id}
datetime_format = %Y-%m-%d %H:%M:%S
  </pre>
  <p class="text-gray-700 mt-2">
    - <code>file</code>: Path to the log file on EC2.  
    - <code>log_group_name</code>: CloudWatch Logs group to store logs.  
    - <code>log_stream_name</code>: Can include `{instance_id}` to differentiate logs from multiple EC2 instances.  
    - <code>datetime_format</code>: Optional, ensures timestamps are parsed correctly.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Configure AWS Credentials</h3>
  <p class="text-gray-700 mb-2">
    The agent requires permission to push logs. Use either:
  </p>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>IAM Role attached to EC2 with the policy <code>CloudWatchLogsFullAccess</code>.</li>
    <li>Or AWS credentials in <code>/etc/awslogs/awscli.conf</code> (less secure).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Start and Verify Agent</h3>
  <p class="text-gray-700 mb-2">
    Start the agent and verify logs are being pushed:
  </p>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
sudo systemctl start awslogsd
sudo systemctl status awslogsd

# View logs in CloudWatch Console → Logs → myapp-logs
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Automating for Multiple Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Amazon Machine Image (AMI)** preconfigured with the CloudWatch Logs agent and configuration.</li>
    <li>Use **user-data scripts** during instance launch to install and start the agent automatically.</li>
    <li>Attach the same **IAM Role** to all EC2 instances so they can push logs to the same log group.</li>
    <li>Use `{instance_id}` in log stream names to separate logs from each EC2 instance automatically.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example User-Data Script</h3>
  <pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto">
#!/bin/bash
yum update -y
yum install -y awslogs
cat <<EOF > /etc/awslogs/awslogs.conf
[general]
state_file = /var/lib/awslogs/agent-state

[app-log]
file = /var/log/myapp/app.log
log_group_name = myapp-logs
log_stream_name = {instance_id}
datetime_format = %Y-%m-%d %H:%M:%S
EOF

systemctl enable awslogsd
systemctl start awslogsd
  </pre>

  <div class="mt-4">
    <img src="images/ec2-cloudwatch-logs.png" alt="CloudWatch Logs Agent Setup" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>

































<section id="ec2-storage-difference" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Storage: Instance Store vs EBS</h2>

  <p class="mb-4 text-gray-700">
    Amazon EC2 provides two main types of storage: <strong>Instance Store</strong> and <strong>Elastic Block Store (EBS)</strong>. Choosing the right type depends on your use case, data persistence requirements, and performance needs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. EC2 Instance Store</h3>
  <p class="ml-4 text-gray-700">
    Instance Store provides **temporary block-level storage physically attached to the host server**. It is included with certain EC2 instance types.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li><strong>Data persistence:</strong> Temporary, lost if instance stops, terminates, or fails.</li>
    <li><strong>Performance:</strong> Very fast, low-latency, ideal for temporary data like caches or buffers.</li>
    <li><strong>Use cases:</strong> Scratch space, temporary files, caches, buffers, high-performance computations.</li>
    <li><strong>Cost:</strong> Included in instance price, no separate charges.</li>
  </ul>
  <p class="ml-4 text-gray-700">
    <strong>Example:</strong> Using an Instance Store volume to store temporary logs for a high-performance application that regenerates data every hour.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Amazon EBS (Elastic Block Store)</h3>
  <p class="ml-4 text-gray-700">
    EBS provides **persistent block storage** that is independent of the EC2 instance lifecycle. Data is stored in highly available and durable storage.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li><strong>Data persistence:</strong> Persistent, survives instance stop, restart, or failure.</li>
    <li><strong>Performance:</strong> Depends on volume type (General Purpose SSD, Provisioned IOPS SSD, Magnetic).</li>
    <li><strong>Use cases:</strong> Databases, file systems, web applications, or any workload requiring reliable storage.</li>
    <li><strong>Cost:</strong> Billed per GB-month of provisioned storage and I/O.</li>
  </ul>
  <p class="ml-4 text-gray-700">
    <strong>Example:</strong> Storing a MySQL database on an EBS volume attached to an EC2 instance to ensure data persists even if the instance is stopped.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Key Differences</h3>
  <table class="table-auto border border-gray-300 ml-4 mb-4">
    <thead>
      <tr class="bg-gray-100">
        <th class="px-4 py-2 border">Feature</th>
        <th class="px-4 py-2 border">Instance Store</th>
        <th class="px-4 py-2 border">EBS</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="px-4 py-2 border">Persistence</td>
        <td class="px-4 py-2 border">Temporary (lost on stop/terminate)</td>
        <td class="px-4 py-2 border">Persistent (survives stop/terminate)</td>
      </tr>
      <tr>
        <td class="px-4 py-2 border">Performance</td>
        <td class="px-4 py-2 border">High-speed, low latency</td>
        <td class="px-4 py-2 border">Depends on volume type</td>
      </tr>
      <tr>
        <td class="px-4 py-2 border">Use Case</td>
        <td class="px-4 py-2 border">Temporary files, caches, buffers</td>
        <td class="px-4 py-2 border">Databases, file systems, web apps</td>
      </tr>
      <tr>
        <td class="px-4 py-2 border">Cost</td>
        <td class="px-4 py-2 border">Included with instance</td>
        <td class="px-4 py-2 border">Billed per GB/month + I/O</td>
      </tr>
    </tbody>
  </table>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. When to Use Each</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>Instance Store:</strong> Use for temporary data that can be regenerated, high-speed caches, or scratch space for computations.
    </li>
    <li>
      <strong>EBS:</strong> Use when you need persistent, reliable storage for applications like databases, file storage, or web servers.
    </li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-storage-comparison.png" alt="EC2 Instance Store vs EBS" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-custom-ami" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Creating a Custom AMI for Production Workloads</h2>

  <p class="mb-4 text-gray-700">
    Amazon Machine Images (AMIs) are templates that contain a pre-configured operating system, software, and application settings. Creating a custom AMI allows you to replicate production-ready EC2 instances quickly and consistently.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Why Create a Custom AMI?</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Pre-installed software and configurations for production workloads.</li>
    <li>Quickly launch multiple identical instances.</li>
    <li>Ensure compliance with security and operational standards.</li>
    <li>Facilitates backup and disaster recovery.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Steps to Create a Custom AMI</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>Launch and configure your EC2 instance:</strong> 
      Install required software, configure environment variables, security settings, and application files.
    </li>
    <li>
      <strong>Test your instance:</strong> 
      Ensure all services are running correctly and the instance is production-ready.
    </li>
    <li>
      <strong>Create the AMI:</strong> 
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Go to the EC2 Dashboard → Instances → Select your instance.</li>
        <li>Click <strong>Actions → Image → Create Image</strong>.</li>
        <li>Provide an <strong>Image Name</strong> and optional description.</li>
        <li>Include additional volumes if required, and click <strong>Create Image</strong>.</li>
      </ul>
    </li>
    <li>
      <strong>Monitor AMI creation:</strong> 
      The AMI will appear in the <strong>AMIs</strong> section once creation is complete.
    </li>
    <li>
      <strong>Launch new instances from AMI:</strong> 
      Use the AMI to launch new EC2 instances that replicate the production-ready setup.
    </li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Example Scenario</h3>
  <p class="ml-4 text-gray-700">
    Suppose you have a production Java application running on EC2 with:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Amazon Linux 2</li>
    <li>Java 17 installed</li>
    <li>Spring Boot application pre-configured</li>
    <li>Security group allowing SSH and HTTP/HTTPS</li>
  </ul>
  <p class="ml-4 text-gray-700">
    After testing, you create a custom AMI. Any future EC2 instance launched from this AMI will have the same OS, Java version, and Spring Boot application pre-installed, ready for production.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices for Production AMIs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Keep AMIs up-to-date with security patches and software updates.</li>
    <li>Name AMIs clearly with version numbers and date for easy identification.</li>
    <li>Limit unnecessary software to reduce image size and boot time.</li>
    <li>Use tags to categorize AMIs for different environments (dev, staging, production).</li>
    <li>Regularly delete old or unused AMIs to save storage costs.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-custom-ami.png" alt="Custom AMI Creation" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>



<section id="ec2-pricing-models" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">AWS EC2 Pricing Models</h2>

  <p class="mb-4 text-gray-700">
    AWS provides multiple pricing options for EC2 instances to optimize cost based on your workload. Choosing the right pricing model can save significant costs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. On-Demand Instances</h3>
  <p class="ml-4 text-gray-700">
    On-Demand instances allow you to pay **by the hour or second** with no long-term commitments.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>No upfront payment; pay only for what you use.</li>
    <li>Flexible: start and stop instances as needed.</li>
    <li>Use case: short-term, unpredictable workloads or testing environments.</li>
    <li>Example: Launching a <code>t2.micro</code> instance for 10 hours costs only for 10 hours, then you stop it.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Reserved Instances (RIs)</h3>
  <p class="ml-4 text-gray-700">
    Reserved Instances allow you to commit to a **1-year or 3-year term** in exchange for a discounted hourly rate.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Significant savings (up to 72%) compared to On-Demand.</li>
    <li>Best for steady-state workloads that run continuously.</li>
    <li>Payment options:
      <ul class="list-disc list-inside ml-6">
        <li>No upfront, partial upfront, or all upfront payment</li>
      </ul>
    </li>
    <li>Example: A production database running 24/7 can use a 3-year Reserved Instance to save costs.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Spot Instances</h3>
  <p class="ml-4 text-gray-700">
    Spot Instances allow you to use unused EC2 capacity at **up to 90% discount**, but AWS can terminate the instance when capacity is needed.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Lowest cost option, but instances are **interruption-prone**.</li>
    <li>Best for flexible, fault-tolerant workloads like batch jobs, big data processing, or CI/CD pipelines.</li>
    <li>Example: Running a video rendering job using Spot Instances can save huge costs, but jobs should be designed to handle interruptions.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Savings Plans</h3>
  <p class="ml-4 text-gray-700">
    Savings Plans are flexible pricing models offering **up to 72% discount** in exchange for a commitment to a consistent usage (measured in $/hour) for 1 or 3 years.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Two types:
      <ul class="list-disc list-inside ml-6">
        <li>Compute Savings Plan – applies to any EC2 instance regardless of region, instance type, or OS.</li>
        <li>EC2 Instance Savings Plan – applies to a specific instance family in a region.</li>
      </ul>
    </li>
    <li>Best for predictable workloads that may need flexibility in instance types or regions.</li>
    <li>Example: A web server workload can use Compute Savings Plan to save costs even if instance types change over time.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Comparison Table</h3>
  <table class="table-auto border border-gray-300 ml-4 mb-4">
    <thead>
      <tr class="bg-gray-100">
        <th class="px-4 py-2 border">Pricing Model</th>
        <th class="px-4 py-2 border">Cost</th>
        <th class="px-4 py-2 border">Flexibility</th>
        <th class="px-4 py-2 border">Best Use Case</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="px-4 py-2 border">On-Demand</td>
        <td class="px-4 py-2 border">Pay per hour/second</td>
        <td class="px-4 py-2 border">Very flexible, start/stop anytime</td>
        <td class="px-4 py-2 border">Short-term, unpredictable workloads</td>
      </tr>
      <tr>
        <td class="px-4 py-2 border">Reserved Instances</td>
        <td class="px-4 py-2 border">Lower hourly rate with 1-3 year commitment</td>
        <td class="px-4 py-2 border">Moderate flexibility, fixed term</td>
        <td class="px-4 py-2 border">Steady-state production workloads</td>
      </tr>
      <tr>
        <td class="px-4 py-2 border">Spot Instances</td>
        <td class="px-4 py-2 border">Up to 90% discount</td>
        <td class="px-4 py-2 border">Low flexibility, may be interrupted</td>
        <td class="px-4 py-2 border">Batch jobs, fault-tolerant workloads</td>
      </tr>
      <tr>
        <td class="px-4 py-2 border">Savings Plans</td>
        <td class="px-4 py-2 border">Up to 72% discount with $/hour commitment</td>
        <td class="px-4 py-2 border">Flexible (Compute or EC2 Instance type)</td>
        <td class="px-4 py-2 border">Predictable workloads requiring flexibility</td>
      </tr>
    </tbody>
  </table>

  <div class="mt-4">
    <img src="images/ec2-pricing-models.png" alt="EC2 Pricing Models" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>





<section id="ec2-metadata-userdata" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Metadata and User Data (Bootstrapping)</h2>

  <p class="mb-4 text-gray-700">
    Amazon EC2 provides instance metadata and user-data features to **retrieve information about the instance and automate initialization tasks** during launch. These are key for automating production setups.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. EC2 Instance Metadata</h3>
  <p class="ml-4 text-gray-700">
    Instance metadata contains information about the instance such as its ID, public IP, AMI ID, instance type, and security groups. This is accessible from within the instance without authentication.
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Access metadata from within the instance
curl http://169.254.169.254/latest/meta-data/

# Example output:
ami-id
instance-id
hostname
local-ipv4
public-ipv4
security-groups
  </pre>
  <p class="ml-4 text-gray-700">
    You can use this data in scripts to configure applications dynamically based on the instance environment.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. EC2 User Data</h3>
  <p class="ml-4 text-gray-700">
    User data is a script or cloud-init configuration executed automatically when an instance boots for the first time. It is commonly used for bootstrapping instances, installing software, or configuring services.
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
# Example of a simple bash script passed as user-data
#!/bin/bash
yum update -y
yum install -y java-17-amazon-corretto
echo "Hello from EC2 User Data" > /home/ec2-user/welcome.txt
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Bootstrapping Example: Java Application Setup</h3>
  <p class="ml-4 text-gray-700">
    Suppose you want to automatically install Java and a sample application on instance launch:
  </p>
  <pre class="bg-gray-100 p-2 rounded overflow-x-auto text-sm ml-4">
#!/bin/bash
# Update packages
yum update -y

# Install Java 17
amazon-linux-extras enable corretto17
yum install -y java-17-amazon-corretto

# Download sample app from S3 or Git
aws s3 cp s3://my-bucket/sample-app.jar /home/ec2-user/sample-app.jar

# Run the app in background
java -jar /home/ec2-user/sample-app.jar &

# Write metadata info to a file
curl http://169.254.169.254/latest/meta-data/instance-id > /home/ec2-user/instance-id.txt
  </pre>
  <p class="ml-4 text-gray-700">
    When launching the instance, paste this script into the <strong>User data</strong> section. On first boot, the EC2 instance will:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Update OS packages</li>
    <li>Install Java 17</li>
    <li>Download and run a sample Java application</li>
    <li>Store the instance ID in a local file</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Benefits of Metadata and User Data</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Automates instance configuration (bootstrapping) for faster deployments.</li>
    <li>Helps maintain environment-specific configurations dynamically.</li>
    <li>Reduces manual setup and errors in production deployments.</li>
    <li>Enables reproducible infrastructure setups using scripts or automation tools.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-userdata-metadata.png" alt="EC2 User Data and Metadata" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>










<section id="ec2-instance-types" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Instance Types and How to Choose Them</h2>

  <p class="mb-4 text-gray-700">
    Amazon EC2 offers a variety of instance types optimized for different workloads. Each instance type provides different combinations of CPU, memory, storage, and networking performance.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Key Categories of EC2 Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>General Purpose (T3, T4g, M5, M6g):</strong> Balanced CPU, memory, and network resources. Good for most applications.
    </li>
    <li>
      <strong>Compute Optimized (C5, C6g):</strong> High CPU-to-memory ratio. Ideal for CPU-intensive workloads like batch processing, video encoding, or scientific modeling.
    </li>
    <li>
      <strong>Memory Optimized (R5, X1, X2gd):</strong> High memory-to-CPU ratio. Suitable for in-memory databases, caching, and analytics workloads.
    </li>
    <li>
      <strong>Storage Optimized (I3, D3):</strong> High disk I/O throughput and low latency. Ideal for databases and big data workloads.
    </li>
    <li>
      <strong>Accelerated Computing (P4, G5):</strong> GPU-based instances for AI/ML, graphics rendering, or high-performance computing.
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Example: T3 vs M5 vs C6g</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>T3 (Burstable General Purpose):</strong> 
      Low-cost, burstable CPU performance. Suitable for web servers, small databases, and dev/test environments.
    </li>
    <li>
      <strong>M5 (General Purpose):</strong> 
      Balanced CPU and memory. Good for medium-scale applications, app servers, and small databases.
    </li>
    <li>
      <strong>C6g (Compute Optimized, ARM-based):</strong> 
      High CPU performance at low cost, ideal for compute-heavy workloads like batch processing, scientific computations, and video encoding.
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Factors to Consider When Choosing an Instance Type</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>CPU Requirements:</strong> Choose compute-optimized instances for CPU-intensive workloads.</li>
    <li><strong>Memory Requirements:</strong> Use memory-optimized instances for databases and caching.</li>
    <li><strong>Storage Needs:</strong> Decide between EBS-backed or instance store, and storage-optimized instances if high IOPS are needed.</li>
    <li><strong>Network Performance:</strong> High network throughput may require enhanced networking instances.</li>
    <li><strong>Cost Constraints:</strong> Balance performance vs cost, and consider Free Tier or Spot Instances for testing.</li>
    <li><strong>Workload Type:</strong> Batch jobs, web servers, databases, AI/ML, or general applications.</li>
    <li><strong>Scalability:</strong> Consider auto-scaling and multiple instance types for fault tolerance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario: Selecting an Instance Type</h3>
  <p class="ml-4 text-gray-700">
    Suppose you have three workloads:
  </p>
  <ol class="list-decimal list-inside ml-6 space-y-2 text-gray-700">
    <li>Small web application for 100 users → <strong>T3.micro</strong> for burstable performance.</li>
    <li>Application server handling moderate traffic → <strong>M5.large</strong> for balanced CPU/memory.</li>
    <li>Batch video processing → <strong>C6g.xlarge</strong> for high CPU performance.</li>
  </ol>

  <div class="mt-4">
    <img src="images/ec2-instance-types.png" alt="EC2 Instance Types Overview" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-networking" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">VPC, Subnets, Security Groups, and NACLs in EC2</h2>

  <p class="mb-4 text-gray-700">
    Amazon EC2 instances run inside a <strong>Virtual Private Cloud (VPC)</strong>. A VPC is a logically isolated network where you can define IP address ranges, subnets, route tables, and network access controls. Understanding VPC components is critical for secure and scalable deployments.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. VPC (Virtual Private Cloud)</h3>
  <p class="ml-4 text-gray-700">
    A VPC is your private network in AWS. Each VPC has:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>A configurable IP address range (CIDR block, e.g., 10.0.0.0/16).</li>
    <li>Multiple subnets for organizing resources.</li>
    <li>Route tables, internet gateways, NAT gateways, and network ACLs.</li>
    <li>Example: Creating a VPC with CIDR 10.0.0.0/16 for your EC2 instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Subnets</h3>
  <p class="ml-4 text-gray-700">
    Subnets divide a VPC’s IP range into smaller segments. Each subnet can be:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li><strong>Public Subnet:</strong> Connected to the Internet via an Internet Gateway.</li>
    <li><strong>Private Subnet:</strong> No direct internet access; uses NAT Gateway for outbound traffic.</li>
    <li>Example: A public subnet for web servers (10.0.1.0/24) and a private subnet for databases (10.0.2.0/24).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Security Groups</h3>
  <p class="ml-4 text-gray-700">
    Security Groups act as **virtual firewalls for EC2 instances**, controlling inbound and outbound traffic.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Stateful: If an inbound request is allowed, the response is automatically allowed.</li>
    <li>Rules specify port, protocol, and source/destination.</li>
    <li>Example: Allow SSH from your IP (port 22) and HTTP traffic (port 80) from anywhere.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Network ACLs (NACLs)</h3>
  <p class="ml-4 text-gray-700">
    NACLs provide **subnet-level stateless traffic filtering**. They act as an additional layer of security at the subnet level.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Stateless: Both inbound and outbound rules must be configured explicitly.</li>
    <li>Supports allow and deny rules.</li>
    <li>Example: Deny all traffic except HTTP/HTTPS for a public subnet.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. How They Work Together</h3>
  <p class="ml-4 text-gray-700">
    When launching an EC2 instance:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>The instance resides in a VPC and is assigned to a subnet.</li>
    <li>Security Groups control instance-level traffic.</li>
    <li>NACLs control subnet-level traffic.</li>
    <li>Route tables determine where the traffic goes (e.g., Internet Gateway for public subnet).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <p class="ml-4 text-gray-700">
    You want a web application setup:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>VPC: 10.0.0.0/16</li>
    <li>Public Subnet (10.0.1.0/24) → Web servers, Security Group allows ports 80/443 and 22 for admin.</li>
    <li>Private Subnet (10.0.2.0/24) → Database servers, Security Group allows traffic from web servers only.</li>
    <li>NACLs: Deny all inbound traffic except HTTP/HTTPS for public subnet, allow all outbound.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-vpc-architecture.png" alt="VPC, Subnet, Security Group, NACL" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>




<section id="ec2-multi-az" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Deploying EC2 Instances in Multi-AZ Architecture</h2>

  <p class="mb-4 text-gray-700">
    For production workloads, deploying EC2 instances across multiple Availability Zones (AZs) increases **high availability, fault tolerance, and resilience**. If one AZ fails, your application can continue running in other AZs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. What is an Availability Zone?</h3>
  <p class="ml-4 text-gray-700">
    An Availability Zone (AZ) is an isolated data center within a region. Each AZ has independent power, networking, and connectivity, but is connected to other AZs in the same region with low-latency links.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Benefits of Multi-AZ Deployment</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>High Availability: Application remains accessible even if one AZ fails.</li>
    <li>Fault Tolerance: Reduces risk of downtime due to hardware or network failures.</li>
    <li>Disaster Recovery: Multi-AZ ensures continuity of critical workloads.</li>
    <li>Load Distribution: Traffic can be balanced across AZs for performance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Steps to Deploy EC2 Instances in Multi-AZ</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>Create a VPC:</strong> Define a VPC with a CIDR block (e.g., 10.0.0.0/16) for your region.
    </li>
    <li>
      <strong>Create Subnets in Multiple AZs:</strong> For example:
      <ul class="list-disc list-inside ml-6">
        <li>Public Subnet A → AZ1 (10.0.1.0/24)</li>
        <li>Public Subnet B → AZ2 (10.0.2.0/24)</li>
      </ul>
    </li>
    <li>
      <strong>Launch EC2 Instances:</strong> Deploy instances in each subnet across multiple AZs.
    </li>
    <li>
      <strong>Configure Security Groups:</strong> Allow traffic as needed (e.g., HTTP/HTTPS, SSH).
    </li>
    <li>
      <strong>Use Elastic Load Balancer (ELB):</strong> Place an Application Load Balancer (ALB) in front of your instances to distribute traffic across AZs automatically.
    </li>
    <li>
      <strong>Enable Auto Scaling:</strong> Configure an Auto Scaling Group (ASG) spanning multiple AZs to automatically add or remove instances based on load.
    </li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario</h3>
  <p class="ml-4 text-gray-700">
    Suppose you have a web application:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>VPC: 10.0.0.0/16</li>
    <li>Public Subnet A (AZ1) → EC2 Web Server 1</li>
    <li>Public Subnet B (AZ2) → EC2 Web Server 2</li>
    <li>Application Load Balancer → Distributes HTTP traffic across both instances</li>
    <li>Auto Scaling → Maintains 2–4 instances depending on load</li>
  </ul>
  <p class="ml-4 text-gray-700">
    If AZ1 goes down, traffic automatically routes to instances in AZ2, ensuring high availability.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always deploy EC2 instances in at least two AZs for production workloads.</li>
    <li>Use Elastic Load Balancers to distribute traffic automatically.</li>
    <li>Enable Auto Scaling for dynamic scaling of instances.</li>
    <li>Store data in multi-AZ services like RDS or EBS with snapshots for disaster recovery.</li>
    <li>Monitor instance health and AZ status using CloudWatch and AWS Health Dashboard.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-multi-az.png" alt="EC2 Multi-AZ Deployment" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-dynamic-scaling" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Handling Dynamic Scaling in EC2</h2>

  <p class="mb-4 text-gray-700">
    Dynamic scaling allows your EC2 infrastructure to automatically adjust capacity based on traffic or load. This ensures **high availability, performance, and cost optimization**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. What is Auto Scaling?</h3>
  <p class="ml-4 text-gray-700">
    AWS Auto Scaling automatically adds or removes EC2 instances within an **Auto Scaling Group (ASG)** based on predefined metrics or schedules.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Maintains the desired number of instances at all times.</li>
    <li>Responds to changes in load (CPU utilization, memory, or custom metrics).</li>
    <li>Reduces costs by terminating unused instances when demand drops.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Components of Dynamic Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>Launch Configuration or Template:</strong> Defines the instance type, AMI, security groups, and key pairs for new instances.</li>
    <li><strong>Auto Scaling Group (ASG):</strong> Specifies minimum, maximum, and desired instance counts, and which subnets/AZs to use.</li>
    <li><strong>Scaling Policies:</strong> Rules that determine when to scale in (terminate instances) or scale out (launch instances).</li>
    <li><strong>CloudWatch Metrics:</strong> Monitors performance (CPU, network, custom metrics) to trigger scaling.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Types of Scaling Policies</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>Target Tracking:</strong> Maintains a metric at a target value (e.g., keep CPU utilization at 50%).</li>
    <li><strong>Step Scaling:</strong> Adds/removes instances based on metric thresholds (e.g., add 2 instances if CPU > 70%).</li>
    <li><strong>Scheduled Scaling:</strong> Adjusts capacity based on predictable load patterns (e.g., increase at 9 AM, decrease at 6 PM).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario: Web Application Auto Scaling</h3>
  <p class="ml-4 text-gray-700">
    Suppose you have a web application hosted on EC2 with varying traffic:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Launch Template: <code>t3.medium</code> instances with a custom AMI.</li>
    <li>Auto Scaling Group:
      <ul class="list-disc list-inside ml-6">
        <li>Minimum instances: 2</li>
        <li>Maximum instances: 10</li>
        <li>Desired instances: 2</li>
      </ul>
    </li>
    <li>Target Tracking Policy: Scale out if average CPU > 60%, scale in if CPU < 40%.</li>
    <li>Result: During peak hours, EC2 instances automatically scale out to handle traffic. During low traffic, scale in to reduce costs.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices for Dynamic Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use CloudWatch metrics relevant to your application (CPU, memory, requests per second).</li>
    <li>Deploy instances across multiple AZs for high availability.</li>
    <li>Set reasonable cooldown periods to prevent frequent scaling actions.</li>
    <li>Combine scaling policies with Elastic Load Balancer for even traffic distribution.</li>
    <li>Monitor scaling events and logs to fine-tune policies.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-auto-scaling.png" alt="EC2 Auto Scaling Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>











<section id="ec2-placement-groups" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Placement Groups and Their Types</h2>

  <p class="mb-4 text-gray-700">
    A **Placement Group** determines how EC2 instances are placed on underlying hardware to optimize network performance, latency, or fault tolerance. Choosing the right placement group type depends on your workload requirements.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Cluster Placement Group</h3>
  <p class="ml-4 text-gray-700">
    Cluster placement groups place instances physically close together within a single Availability Zone.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Provides **low-latency, high-throughput network** between instances.</li>
    <li>Ideal for **high-performance computing (HPC), distributed databases, and big data workloads**.</li>
    <li>All instances must be in the **same AZ**.</li>
    <li>Example: Launch 10 C6g instances in a cluster placement group to run a distributed computation job with minimal latency.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Spread Placement Group</h3>
  <p class="ml-4 text-gray-700">
    Spread placement groups place a small number of instances across **distinct hardware racks** to reduce correlated failures.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Maximum 7 instances per AZ per group.</li>
    <li>Provides **isolation and fault tolerance**, useful for critical workloads.</li>
    <li>Best for applications that require **high availability** across instances.</li>
    <li>Example: Deploy 3 database master nodes in a spread placement group across different racks to prevent all from failing at once.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Partition Placement Group</h3>
  <p class="ml-4 text-gray-700">
    Partition placement groups divide instances into **logical partitions**. Each partition has its own set of racks, so failures in one partition don’t affect others.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Supports large distributed and horizontally scaled workloads.</li>
    <li>Partitions can have multiple instances, isolated from failures in other partitions.</li>
    <li>Example: Deploying a large HDFS cluster across 5 partitions, so failure in one partition does not affect data in others.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. When to Use Each Placement Group</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>Cluster:</strong> Use for high-performance computing, low-latency network applications, or big data analytics within one AZ.</li>
    <li><strong>Spread:</strong> Use for critical instances requiring high availability and fault isolation (e.g., database masters, control plane nodes).</li>
    <li><strong>Partition:</strong> Use for large distributed systems like HDFS, Kafka, Cassandra, or any workload needing partition-level fault tolerance.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-placement-groups.png" alt="EC2 Placement Group Types" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>










<section id="ec2-load-balancers" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Configuring EC2 with Load Balancers in a Microservices Architecture</h2>

  <p class="mb-4 text-gray-700">
    In a microservices architecture, applications are broken into smaller services running on multiple EC2 instances. Load Balancers distribute traffic efficiently across services, provide fault tolerance, and ensure high availability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Types of Load Balancers</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>Application Load Balancer (ALB):</strong> Works at the HTTP/HTTPS layer (Layer 7). Ideal for routing traffic based on URL path, host, or headers. Perfect for microservices and containerized applications.
    </li>
    <li>
      <strong>Network Load Balancer (NLB):</strong> Works at the TCP/UDP layer (Layer 4). Provides ultra-low latency, high throughput, and supports millions of connections. Ideal for real-time, latency-sensitive applications.
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Steps to Configure EC2 with ALB/NLB</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>
      <strong>Launch EC2 Instances:</strong> Deploy your microservices across multiple instances and AZs.
    </li>
    <li>
      <strong>Create Target Groups:</strong> Define a target group for each microservice (e.g., Service A → Target Group A). Specify health check protocol and port.
    </li>
    <li>
      <strong>Create Load Balancer:</strong>
      <ul class="list-disc list-inside ml-6">
        <li>ALB: For HTTP/HTTPS routing between microservices.</li>
        <li>NLB: For TCP/UDP traffic, e.g., WebSocket or game servers.</li>
      </ul>
    </li>
    <li>
      <strong>Attach Target Groups to Load Balancer:</strong> ALB can route traffic based on URL paths or hosts to different target groups.
    </li>
    <li>
      <strong>Configure Security Groups:</strong> Ensure the Load Balancer can reach EC2 instances on required ports (e.g., HTTP 80, HTTPS 443).
    </li>
    <li>
      <strong>Configure Health Checks:</strong> Ensure instances are healthy before routing traffic.
    </li>
    <li>
      <strong>DNS and Route53:</strong> Use a custom domain name to point to the Load Balancer.
    </li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Example Scenario: Microservices Web Application</h3>
  <p class="ml-4 text-gray-700">
    Consider an e-commerce app with three microservices: frontend, orders, and payments.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Frontend → Target Group Frontend → ALB listener on port 80/443</li>
    <li>Orders Service → Target Group Orders → ALB listener routing to /orders/*</li>
    <li>Payments Service → Target Group Payments → ALB listener routing to /payments/*</li>
    <li>Auto Scaling Groups maintain the desired number of instances for each microservice.</li>
    <li>ALB distributes incoming requests based on URL paths to the respective microservices.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy EC2 instances across multiple AZs for high availability.</li>
    <li>Use ALB for microservices and path-based routing; use NLB for TCP/UDP or low-latency needs.</li>
    <li>Enable Auto Scaling for dynamic capacity management.</li>
    <li>Use health checks to ensure traffic is routed only to healthy instances.</li>
    <li>Secure communication using HTTPS and proper security group rules.</li>
    <li>Use Route53 or custom DNS to manage domain routing to Load Balancers.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-alb-nlb-microservices.png" alt="EC2 with ALB/NLB in Microservices Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-ssh-security" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Securing EC2 Instances Against Unauthorized SSH Access</h2>

  <p class="mb-4 text-gray-700">
    SSH (Secure Shell) is commonly used to access EC2 instances. Securing SSH access is critical to prevent unauthorized access and protect your workloads.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Use Key Pairs Instead of Passwords</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create an SSH key pair (private + public key) in AWS.</li>
    <li>Attach the public key to the EC2 instance during launch.</li>
    <li>Access the instance using the private key:
      <code>ssh -i "my-key.pem" ec2-user@public-ip</code>
    </li>
    <li>Never use password-based SSH login.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Restrict SSH Access with Security Groups</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Only allow SSH (port 22) from trusted IP addresses or VPN.</li>
    <li>Example: Security Group inbound rule → SSH → Source: 203.0.113.25/32 (your office IP).</li>
    <li>Do not open SSH to 0.0.0.0/0 (all IPs), which is a security risk.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Change Default SSH Port (Optional)</h3>
  <p class="ml-4 text-gray-700">
    Change the default SSH port (22) to a custom port in <code>/etc/ssh/sshd_config</code> to reduce automated attack attempts. Remember to update Security Group rules accordingly.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Enable Multi-Factor Authentication (MFA) for IAM Users</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use IAM roles and MFA for privileged operations instead of sharing root credentials.</li>
    <li>Combine IAM policies with key-based SSH for better security.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Disable Root Login</h3>
  <p class="ml-4 text-gray-700">
    Prevent root login over SSH by setting <code>PermitRootLogin no</code> in <code>/etc/ssh/sshd_config</code>. Use a non-root user with <code>sudo</code> privileges.
  </p>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Use Security Tools and Monitoring</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable AWS CloudTrail to monitor SSH login attempts.</li>
    <li>Use Amazon GuardDuty to detect suspicious activity.</li>
    <li>Configure fail2ban or similar tools to block repeated unauthorized login attempts.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Example Scenario</h3>
  <p class="ml-4 text-gray-700">
    You launch an EC2 instance for your web server:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Attach an SSH key pair during launch.</li>
    <li>Configure Security Group: Allow SSH only from your office IP (203.0.113.25/32).</li>
    <li>Disable root login and use <code>ec2-user</code> with <code>sudo</code>.</li>
    <li>Enable CloudTrail and GuardDuty for monitoring access attempts.</li>
    <li>Optionally, change the default SSH port from 22 to 2222 and update firewall rules.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ssh-security.png" alt="EC2 SSH Security Best Practices" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>









<section id="ec2-iam" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">IAM Roles vs IAM Users for EC2</h2>

  <p class="mb-4 text-gray-700">
    AWS Identity and Access Management (IAM) allows you to securely control access to AWS services and resources. Understanding the difference between IAM Users and IAM Roles is crucial for EC2 instances and applications.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. IAM Users</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Represents a human or system with long-term credentials (username/password or access keys).</li>
    <li>Used for logging into AWS Management Console or calling AWS APIs directly.</li>
    <li>Not ideal to store IAM user credentials on EC2 instances due to security risks.</li>
    <li>Example: Create an IAM user "dev-admin" to manage EC2 instances and S3 buckets.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. IAM Roles</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Temporary credentials automatically assigned to EC2 instances or AWS services.</li>
    <li>Used for applications running on EC2 to securely access AWS resources without embedding credentials.</li>
    <li>Policies attached to roles define the permissions (e.g., read/write to S3, access DynamoDB, etc.).</li>
    <li>Example: Create a role "EC2-S3-Access" allowing EC2 instances to upload logs to S3 without storing keys on the instance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Attaching IAM Roles to EC2 Instances</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to the AWS EC2 console → Launch Instance.</li>
    <li>In the <strong>Configure Instance Details</strong> step, under <strong>IAM role</strong>, select the role you want to attach.</li>
    <li>Alternatively, for running instances, go to <strong>Actions → Security → Modify IAM Role</strong> to attach a new role.</li>
    <li>Inside the EC2 instance, AWS SDKs or CLI automatically use the temporary credentials from the role.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example: EC2 Application Accessing S3</h3>
  <p class="ml-4 text-gray-700">
    Suppose you have a Java application running on EC2 that needs to upload files to S3:
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Create an IAM role "EC2-S3-Upload" with policy allowing <code>s3:PutObject</code> on the target bucket.</li>
    <li>Attach this role to your EC2 instance during launch.</li>
    <li>In your Java code, use the AWS SDK for S3. The SDK automatically uses the temporary credentials from the role:
      <pre class="bg-gray-100 p-2 rounded text-sm">
AmazonS3 s3Client = AmazonS3ClientBuilder.standard()
    .withRegion(Regions.US_EAST_1)
    .build();
s3Client.putObject("my-bucket", "file.txt", new File("file.txt"));
      </pre>
    </li>
    <li>No need to hardcode access keys in the application.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Prefer IAM roles over IAM users for applications running on EC2.</li>
    <li>Grant least privilege: attach only necessary permissions to roles.</li>
    <li>Rotate IAM user keys regularly if used for automation.</li>
    <li>Use CloudTrail to monitor role and user activity for security auditing.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-iam-roles.png" alt="EC2 IAM Roles vs Users" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-encrypted-storage" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Implementing Encrypted Storage on EC2</h2>

  <p class="mb-4 text-gray-700">
    Encrypting storage on EC2 ensures that your data at rest is secure. AWS provides encryption options for EBS volumes, and considerations differ for instance store volumes.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. EBS Volume Encryption</h3>
  <p class="ml-4 text-gray-700">
    Amazon Elastic Block Store (EBS) supports encryption using AWS Key Management Service (KMS). Encrypted EBS volumes protect your data, snapshots, and backups automatically.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li>Enable encryption when creating a new EBS volume.</li>
    <li>Select an AWS-managed key (aws/ebs) or a customer-managed KMS key.</li>
    <li>All data stored on the volume, backups, and snapshots are encrypted at rest.</li>
    <li>Example: Launch a 20 GB gp3 EBS volume encrypted with KMS key <code>my-key</code> and attach it to an EC2 instance.</li>
    <li>EBS encryption is transparent to applications — no code changes required.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Encrypting Existing EBS Volumes</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a snapshot of the unencrypted EBS volume.</li>
    <li>Copy the snapshot and enable encryption during the copy.</li>
    <li>Create a new EBS volume from the encrypted snapshot.</li>
    <li>Attach the new encrypted volume to your EC2 instance and update mount points.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Instance Store Considerations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Instance store volumes are ephemeral and **cannot be encrypted by AWS**.</li>
    <li>If encryption is required, use **application-level encryption** (e.g., encrypt files before writing to the volume).</li>
    <li>Example: Use Linux `dm-crypt` or `LUKS` to encrypt data on instance store volumes.</li>
    <li>For persistent encrypted storage, prefer **EBS encrypted volumes**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example: Java Application Storing Encrypted Data on EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach an encrypted EBS volume to your EC2 instance.</li>
    <li>Mount the volume on `/mnt/data`.</li>
    <li>In your Java application, write files to `/mnt/data`. AWS handles encryption/decryption transparently:
      <pre class="bg-gray-100 p-2 rounded text-sm">
File file = new File("/mnt/data/report.txt");
FileWriter writer = new FileWriter(file);
writer.write("Sensitive data");
writer.close();
      </pre>
    </li>
    <li>Backups (snapshots) of this volume are automatically encrypted.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always use **encrypted EBS volumes** for sensitive data.</li>
    <li>For instance store volumes, implement **application-level encryption** if needed.</li>
    <li>Use **KMS customer-managed keys** for finer access control and auditing.</li>
    <li>Encrypt snapshots and backups to maintain end-to-end security.</li>
    <li>Monitor and rotate encryption keys regularly.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-encrypted-storage.png" alt="EC2 Encrypted Storage EBS and Instance Store" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-security-groups" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Impact of Security Group Rules on Traffic Between EC2 Instances</h2>

  <p class="mb-4 text-gray-700">
    Security Groups act as virtual firewalls for your EC2 instances. They control **inbound and outbound traffic** based on rules, which directly affects how instances communicate with each other.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Security Group Basics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Each EC2 instance is associated with **one or more security groups**.</li>
    <li>Security groups are **stateful**: if inbound traffic is allowed, the response is automatically allowed.</li>
    <li>Rules specify protocol, port range, and source/destination (IP or another security group).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Traffic Between EC2 Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>To allow traffic from one EC2 instance to another, **use the security group ID as the source** in inbound rules.</li>
    <li>Example: EC2 instance A (SG-A) wants to communicate with EC2 instance B (SG-B) on port 8080:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Add inbound rule in SG-B: TCP, port 8080, source: SG-A</li>
        <li>Ensure outbound rules in SG-A allow traffic to SG-B</li>
      </ul>
    </li>
    <li>If rules are too restrictive, instances **cannot communicate**, even if they are in the same VPC or subnet.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Example Scenario: Web Application and Database</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Frontend EC2 (SG-Frontend) communicates with Backend EC2 (SG-Backend) on port 80/443.</li>
    <li>Backend EC2 (SG-Backend) communicates with Database EC2 (SG-DB) on port 3306 (MySQL).</li>
    <li>Security groups ensure:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Frontend can access Backend.</li>
        <li>Backend can access Database.</li>
        <li>External traffic cannot directly access Database.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Follow the **principle of least privilege**: allow only required ports and sources.</li>
    <li>Use **security group references** for internal EC2 communication instead of IP ranges.</li>
    <li>Separate security groups for **frontend, backend, and database** layers for better control.</li>
    <li>Regularly review security group rules to remove unused or overly permissive rules.</li>
    <li>Monitor network traffic using **VPC Flow Logs** to detect misconfigurations.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-security-groups.png" alt="EC2 Security Group Traffic" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-ssm-session-manager" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Using AWS Systems Manager Session Manager Instead of SSH</h2>

  <p class="mb-4 text-gray-700">
    AWS Systems Manager (SSM) Session Manager allows secure and auditable access to EC2 instances without opening SSH ports or managing key pairs. This improves security and simplifies management.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Benefits Over SSH</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>No need to manage SSH keys.</li>
    <li>Works without opening port 22 in security groups.</li>
    <li>Provides **audit logs** in AWS CloudTrail for compliance.</li>
    <li>Supports both CLI and browser-based access.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Prerequisites</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instance must have the <strong>SSM Agent</strong> installed (preinstalled on Amazon Linux 2, Ubuntu, and Windows AMIs).</li>
    <li>Attach an IAM role with **AmazonSSMManagedInstanceCore** policy to the EC2 instance.</li>
    <li>Ensure the instance has **internet access** or access to SSM endpoints via VPC endpoints.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Starting a Session</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to the <strong>AWS Systems Manager → Session Manager</strong> in the AWS Console.</li>
    <li>Click <strong>Start Session</strong> and select the target EC2 instance.</li>
    <li>Access the instance via a browser-based shell or AWS CLI:
      <pre class="bg-gray-100 p-2 rounded text-sm">
aws ssm start-session --target i-0123456789abcdef0
      </pre>
    </li>
    <li>You can now run commands as if logged in via SSH, without opening port 22.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario: Managing a Java Application</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instance running a Java application is configured with SSM Agent.</li>
    <li>IAM role <code>EC2-SSM-Access</code> attached to instance.</li>
    <li>Developer starts a session using CLI:
      <pre class="bg-gray-100 p-2 rounded text-sm">
aws ssm start-session --target i-0abcdef1234567890
      </pre>
    </li>
    <li>Developer can restart the Java application or check logs securely without exposing SSH port.</li>
    <li>All commands executed are logged in CloudTrail for auditing.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always use **Session Manager** instead of SSH for better security.</li>
    <li>Restrict session access using **IAM policies** to allow only authorized users.</li>
    <li>Enable **CloudTrail logging** for auditing commands and sessions.</li>
    <li>Use **AWS Systems Manager Run Command** to automate common administrative tasks.</li>
    <li>Combine with **VPC endpoints** to allow SSM access without internet exposure.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ssm-session-manager.png" alt="EC2 Session Manager Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-monitoring" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Monitoring EC2 Performance</h2>

  <p class="mb-4 text-gray-700">
    Monitoring EC2 instances is essential to ensure application health, optimize performance, and avoid downtime. AWS provides several tools, primarily <strong>Amazon CloudWatch</strong>, for monitoring metrics, logs, and events.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Critical EC2 Metrics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>CPU Utilization:</strong> Measures the percentage of allocated compute units being used. High sustained usage may indicate the need to scale up or optimize applications.</li>
    <li><strong>Memory Utilization:</strong> Not provided by default; requires CloudWatch Agent. High memory usage may cause application crashes or swapping.</li>
    <li><strong>Disk I/O:</strong> Includes read/write operations and throughput. High latency may indicate a bottleneck in storage performance.</li>
    <li><strong>Network In/Out:</strong> Measures incoming and outgoing traffic. Useful for identifying bandwidth issues and optimizing network configuration.</li>
    <li><strong>Status Checks:</strong> EC2 provides two types: System Status Check (AWS infrastructure issues) and Instance Status Check (OS-level issues).</li>
    <li><strong>Swap Usage:</strong> High swap usage can indicate memory pressure and poor application performance.</li>
    <li><strong>Application Logs:</strong> Monitor logs for errors, exceptions, and performance warnings.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Monitoring Tools</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>Amazon CloudWatch Metrics:</strong> Monitor standard metrics like CPU, Disk, and Network in real time.</li>
    <li><strong>CloudWatch Logs:</strong> Collect application and system logs for debugging and auditing.</li>
    <li><strong>CloudWatch Alarms:</strong> Trigger notifications or auto-scaling actions based on thresholds.</li>
    <li><strong>CloudWatch Agent:</strong> Collect additional metrics such as memory, disk space, and processes.</li>
    <li><strong>AWS CloudTrail:</strong> Monitor API calls and user actions for security and operational auditing.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Example Scenario: Web Application Monitoring</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Frontend EC2 instance: CPU utilization > 70% triggers a CloudWatch alarm → Auto Scaling adds a new instance.</li>
    <li>Backend EC2 instance: Disk read/write latency spikes → Investigate slow database queries or storage performance.</li>
    <li>Memory usage monitored via CloudWatch Agent → High usage triggers notification to DevOps team.</li>
    <li>Application logs streamed to CloudWatch Logs → Alerts generated on critical errors.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Monitor both system-level and application-level metrics for a holistic view.</li>
    <li>Set CloudWatch alarms for critical thresholds to enable proactive response.</li>
    <li>Use dashboards to visualize multiple EC2 metrics in real time.</li>
    <li>Enable enhanced monitoring for high-performance workloads (e.g., Nitro-based instances).</li>
    <li>Combine CloudWatch with automated scaling policies to maintain performance and reduce costs.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-monitoring.png" alt="EC2 Performance Monitoring" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-auto-scaling" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Auto Scaling Groups and Lifecycle Hooks</h2>

  <p class="mb-4 text-gray-700">
    Auto Scaling Groups (ASGs) automatically adjust the number of EC2 instances in your environment based on demand, ensuring high availability and cost efficiency. Lifecycle hooks allow you to perform custom actions when instances launch or terminate.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Auto Scaling Groups (ASGs)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>An ASG manages a collection of EC2 instances across one or more Availability Zones.</li>
    <li>ASGs maintain the desired number of instances based on:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Scheduled scaling (e.g., peak traffic hours)</li>
        <li>Dynamic scaling policies triggered by CloudWatch metrics (CPU, memory, network)</li>
      </ul>
    </li>
    <li>Ensures high availability by automatically replacing unhealthy instances.</li>
    <li>Example: Web application ASG with min=2, max=6, desired=3 instances adjusts automatically when CPU > 70%.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Lifecycle Hooks</h3>
  <p class="ml-4 text-gray-700">
    Lifecycle hooks allow you to perform custom actions **before an instance enters service** or **before it terminates**.
  </p>
  <ul class="list-disc list-inside ml-6 space-y-2 text-gray-700">
    <li><strong>Launch lifecycle hook:</strong> Runs tasks when an instance is launching but not yet in service.  
      Example: Install custom software or configure application before receiving traffic.</li>
    <li><strong>Terminate lifecycle hook:</strong> Runs tasks before an instance terminates.  
      Example: Backup logs, drain connections, or deregister from a load balancer.</li>
    <li>Lifecycle hooks can trigger **AWS Lambda functions**, **SNS notifications**, or **SQS messages**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Example Scenario: Web Application ASG</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>ASG configured for frontend web servers: min=2, max=5, desired=3.</li>
    <li>Launch hook runs a script to install monitoring agents and deploy the latest web code.</li>
    <li>Terminate hook uploads instance logs to S3 before termination.</li>
    <li>Dynamic scaling policy triggers additional instances if CPU > 70% for 5 minutes, and scales down if CPU < 30%.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use multiple Availability Zones to ensure high availability.</li>
    <li>Combine ASGs with Load Balancers for seamless traffic distribution.</li>
    <li>Use lifecycle hooks for proper initialization and cleanup tasks.</li>
    <li>Monitor ASG activities via CloudWatch and CloudTrail for auditing and scaling effectiveness.</li>
    <li>Test launch and terminate hooks in a staging environment before production.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-auto-scaling.png" alt="EC2 Auto Scaling Groups and Lifecycle Hooks" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-scaling" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Vertical vs Horizontal Scaling in EC2</h2>

  <p class="mb-4 text-gray-700">
    Scaling is a key strategy to handle increasing workloads and ensure performance. AWS EC2 supports both vertical scaling (scale-up) and horizontal scaling (scale-out). Understanding when to use each is crucial for cost efficiency, high availability, and reliability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Vertical Scaling (Scale-Up)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Involves upgrading an EC2 instance to a larger instance type (more CPU, memory, or network throughput).</li>
    <li>Simple to implement: stop the instance, change the instance type, and restart.</li>
    <li>Best for applications that are **single-threaded or cannot distribute load** across multiple instances.</li>
    <li>Example: Upgrade a t2.micro instance to a t3.large to handle higher memory and CPU requirements for a Java application.</li>
    <li>Limitation: Vertical scaling is bounded by the largest available instance size and has a **single point of failure**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Horizontal Scaling (Scale-Out)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Involves adding more EC2 instances to distribute load.</li>
    <li>Requires **load balancing** (e.g., Application Load Balancer) and sometimes **stateless application design**.</li>
    <li>Best for applications that can be **distributed across multiple instances**.</li>
    <li>Example: Use an Auto Scaling Group (ASG) to increase frontend web servers from 3 to 6 instances when CPU > 70%.</li>
    <li>Horizontal scaling improves **fault tolerance**, **availability**, and **resilience**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Choosing Between Vertical and Horizontal Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If your application is **stateful, monolithic, or not designed for distribution**, consider vertical scaling first.</li>
    <li>If your application is **stateless, distributed, or microservices-based**, horizontal scaling is preferred for high availability.</li>
    <li>Cost considerations: Horizontal scaling may be cheaper with smaller instances rather than a single large instance.</li>
    <li>Resilience considerations: Horizontal scaling reduces single points of failure.</li>
    <li>Use a **combination**: scale vertically until instance limits are reached, then scale horizontally.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Java backend service initially runs on t3.medium (2 vCPU, 4 GB RAM).</li>
    <li>CPU usage reaches 80% → scale up to t3.large (2x vCPU, 2x RAM).</li>
    <li>Workload grows further → switch to horizontal scaling using an ASG with 4 t3.large instances behind an ALB.</li>
    <li>Traffic spikes handled by scaling out automatically using CloudWatch metrics.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-scaling.png" alt="Vertical vs Horizontal Scaling EC2" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>





<section id="ec2-hibernation" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Hibernation</h2>

  <p class="mb-4 text-gray-700">
    EC2 hibernation allows you to pause an instance and save the contents of its memory (RAM) to the root EBS volume. When you restart the instance, it resumes from the saved state, preserving in-memory data and application state.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. How EC2 Hibernation Works</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Memory (RAM) is saved to the EBS root volume.</li>
    <li>The instance is stopped instead of terminated.</li>
    <li>On restart, the OS resumes from the saved memory, restoring running processes.</li>
    <li>Data on attached EBS volumes persists automatically.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Benefits of Hibernation</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Faster startup compared to a full reboot.</li>
    <li>Preserves application state and in-memory caches.</li>
    <li>Useful for **development environments** where setup time is long.</li>
    <li>Cost-effective: pay only for the EBS storage while the instance is stopped.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Limitations and Considerations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Only supported for certain instance types (e.g., t3, m5, r5) and HVM AMIs.</li>
    <li>Requires the root volume to be **EBS-backed** (instance store not supported).</li>
    <li>Maximum RAM size supported for hibernation varies by instance type.</li>
    <li>Security: Encrypted EBS root volume is recommended to protect sensitive data.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Developer is testing a Java application that requires a 10-minute setup on startup.</li>
    <li>Instead of stopping the instance normally, hibernation is enabled.</li>
    <li>After pausing for several hours, restarting the instance resumes the application immediately with all caches intact.</li>
    <li>Cost is reduced as only EBS storage is charged during hibernation.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use hibernation for development, testing, or environments with long initialization times.</li>
    <li>Ensure the root EBS volume has enough space to store RAM contents.</li>
    <li>Combine hibernation with automated snapshots for backup and recovery.</li>
    <li>Monitor instance types and AMI compatibility before enabling hibernation.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-hibernation.png" alt="EC2 Hibernation Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-network-optimization" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Optimizing Network Performance for EC2 Instances</h2>

  <p class="mb-4 text-gray-700">
    High-throughput workloads, such as big data processing, media streaming, or high-performance web applications, require optimized network performance. AWS provides multiple options and best practices to maximize EC2 network throughput, reduce latency, and ensure reliability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Use Enhanced Networking</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **Enhanced Networking** using **ENA (Elastic Network Adapter)** or **Intel 82599 VF** depending on instance type.</li>
    <li>Improves throughput, reduces latency, and provides lower jitter for high-performance workloads.</li>
    <li>Check instance type support: most modern instances (e.g., C5, M5, R5, T3) support ENA.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Select High-Performance Instance Types</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Instances with **higher network bandwidth** provide better performance for data-intensive applications.</li>
    <li>Example: Use <strong>C6i, M5n, or R5n</strong> for network-intensive workloads.</li>
    <li>Consider **Elastic Fabric Adapter (EFA)** for HPC applications requiring low-latency communication.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Placement Groups</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **cluster placement groups** to deploy instances physically close to each other within an AZ for low-latency, high-throughput networking.</li>
    <li>Ideal for tightly-coupled distributed applications like MPI-based HPC workloads.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Optimize Subnet and VPC Design</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **multiple subnets** across Availability Zones to distribute traffic efficiently.</li>
    <li>Minimize **network hops** by keeping instances communicating heavily in the same AZ.</li>
    <li>Enable **VPC endpoints** to reduce latency when accessing AWS services like S3 and DynamoDB.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. TCP/IP and OS-Level Optimizations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Tune **TCP window size, buffer sizes**, and number of concurrent connections for high-throughput workloads.</li>
    <li>Use **Jumbo Frames** (MTU 9001) in supported VPCs to reduce packet overhead.</li>
    <li>Monitor network metrics with **CloudWatch** to detect bottlenecks.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Big data cluster requires high network throughput between 10 EC2 instances.</li>
    <li>Use **M5n instances** with ENA enabled and place them in a **cluster placement group**.</li>
    <li>Deploy instances in the same AZ and enable Jumbo Frames.</li>
    <li>Monitor <strong>NetworkIn</strong> and <strong>NetworkOut</strong> metrics via CloudWatch and tune OS-level TCP parameters to maximize throughput.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always enable **Enhanced Networking** for network-intensive workloads.</li>
    <li>Choose instance types with **higher network bandwidth** appropriate for your workload.</li>
    <li>Use **cluster placement groups** for low-latency requirements.</li>
    <li>Monitor network metrics continuously and adjust OS-level parameters if necessary.</li>
    <li>Design VPC and subnets to minimize network hops and maximize throughput.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-network-optimization.png" alt="EC2 Network Optimization" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-debug-ssh" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Debugging EC2 Instances Not Responding to SSH</h2>

  <p class="mb-4 text-gray-700">
    Sometimes, EC2 instances may not respond to SSH due to network, security, or OS-level issues. AWS provides multiple tools and techniques to troubleshoot and regain access without losing data.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Check Security Group and Network ACLs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Verify that the **Security Group** allows inbound SSH traffic (port 22) from your IP address.</li>
    <li>Ensure **Network ACLs** in the VPC do not block SSH traffic.</li>
    <li>Check that the instance has a **public IP or Elastic IP** if connecting from the internet.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Verify Key Pair and User</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure you are using the correct **.pem key** associated with the instance.</li>
    <li>Confirm you are connecting with the correct default username based on AMI:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Amazon Linux 2: <code>ec2-user</code></li>
        <li>Ubuntu: <code>ubuntu</code></li>
        <li>RHEL: <code>ec2-user</code> or <code>root</code></li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Use EC2 Serial Console (if supported)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Access the instance through the **EC2 Serial Console** for supported Linux instances.</li>
    <li>Allows you to troubleshoot boot issues, misconfigured SSH settings, or firewall rules.</li>
    <li>Requires IAM policy: <code>ec2-instance-connect:SendSerialConsoleSSHPublicKey</code>.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Use Systems Manager Session Manager</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If the instance has SSM Agent installed and proper IAM role, start a session via **Session Manager** instead of SSH.</li>
    <li>Allows you to run commands, check logs, and fix configuration issues without opening port 22.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Attach the Root Volume to Another Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Stop the unresponsive instance.</li>
    <li>Detach its root EBS volume and attach it to another healthy EC2 instance.</li>
    <li>Mount the volume and inspect logs (<code>/var/log/secure</code>, <code>/var/log/messages</code>), SSH configuration (<code>/etc/ssh/sshd_config</code>), or disk space issues.</li>
    <li>After fixes, detach the volume and reattach it to the original instance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Check System Logs in AWS Console</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to <strong>EC2 → Actions → Monitor and troubleshoot → Get system log</strong>.</li>
    <li>Review boot logs for errors, failed services, or corrupted filesystems.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Developer cannot SSH into a Java application server (EC2 instance).</li>
    <li>Security Group is verified to allow port 22, but SSH still fails.</li>
    <li>Use Systems Manager Session Manager to connect and check logs.</li>
    <li>Find `/etc/ssh/sshd_config` misconfigured (Port changed), fix it, restart SSH service.</li>
    <li>Instance becomes accessible via SSH again.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">8. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **Session Manager** for all instances to avoid dependence on SSH.</li>
    <li>Regularly backup configuration and key pairs.</li>
    <li>Monitor instance status checks and CloudWatch metrics.</li>
    <li>Use separate IAM roles with least privileges for access.</li>
    <li>Keep system and SSH configurations consistent across instances.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-debug-ssh.png" alt="EC2 Debug SSH Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-cpu-bound" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Troubleshooting a CPU-Bound EC2 Instance</h2>

  <p class="mb-4 text-gray-700">
    A CPU-bound EC2 instance indicates that the instance is using most of its CPU resources consistently, which can affect application performance. Identifying the root cause involves monitoring metrics, inspecting processes, and optimizing applications or instance configuration.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Monitor CPU Metrics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Amazon CloudWatch** to monitor <strong>CPUUtilization</strong> over time.</li>
    <li>Check for sustained high CPU usage or spikes at specific intervals.</li>
    <li>Compare CPU usage with **other system metrics** like memory and network to find correlations.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Inspect Running Processes</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Connect via SSH or **Session Manager**.</li>
    <li>Run <code>top</code> or <code>htop</code> to identify processes consuming high CPU.</li>
    <li>Example: Java application may show multiple threads consuming 80% CPU due to inefficient loops or high request load.</li>
    <li>Check for runaway processes, background jobs, or cron tasks causing spikes.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Analyze Application Performance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable profiling for CPU-intensive applications (e.g., **Java Flight Recorder** for Java apps).</li>
    <li>Identify hot code paths, infinite loops, or inefficient algorithms.</li>
    <li>Optimize database queries or external API calls that may be causing CPU overhead.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Check Instance Type and Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Verify if the current instance type has sufficient CPU for the workload.</li>
    <li>Example: A t3.medium may not handle a heavy Java application; consider scaling up (vertical) or scaling out (horizontal) with an Auto Scaling Group.</li>
    <li>Enable **CPU credits monitoring** for burstable instances (T-series) to ensure they are not throttled.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Use CloudWatch Logs and Alarms</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check **application logs** for repeated tasks or errors causing high CPU.</li>
    <li>Set CloudWatch **alarms** for sustained high CPU to trigger notifications or auto-scaling actions.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instance running a Java web application shows CPU > 90% for 10 minutes.</li>
    <li>Using <code>top</code>, identify that multiple threads of the Java process are consuming CPU.</li>
    <li>Analyze application logs → background job performing heavy calculations every 5 minutes.</li>
    <li>Solution: Optimize the job algorithm, reduce thread count, and scale out using an Auto Scaling Group.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always **monitor CPU metrics** with CloudWatch for early detection.</li>
    <li>Use **profiling and logging** to identify CPU hotspots in applications.</li>
    <li>Scale instances **vertically or horizontally** based on workload requirements.</li>
    <li>Consider **burstable instances vs fixed-performance instances** based on CPU patterns.</li>
    <li>Optimize application code, background jobs, and database queries regularly.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cpu-bound.png" alt="EC2 CPU Bound Troubleshooting" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-recovery" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Recovering a Terminated or Failed EC2 Instance</h2>

  <p class="mb-4 text-gray-700">
    Once an EC2 instance is terminated, its ephemeral instance-store volumes are lost. However, if proper backups or AMIs are in place, you can quickly recover applications and data. For failed instances (e.g., stopped due to misconfiguration or OS crash), recovery options are also available.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Recover Using AMI (Amazon Machine Image)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If you created an **AMI** of the instance beforehand, you can launch a new instance from the AMI with the same configuration.</li>
    <li>Steps:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Go to <strong>EC2 → AMIs</strong>.</li>
        <li>Select the AMI → <strong>Launch Instance</strong>.</li>
        <li>Choose instance type, security groups, and key pair.</li>
      </ul>
    </li>
    <li>Example: A Java application server AMI can be relaunched to quickly restore service after termination.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Restore from EBS Snapshots</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If the instance root volume was **EBS-backed**, you can restore data from snapshots.</li>
    <li>Steps:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Create a new EBS volume from the latest snapshot.</li>
        <li>Attach the volume to a new EC2 instance.</li>
        <li>Mount the volume and restore application data and configuration.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Use Auto Scaling Group (ASG) for Recovery</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If the instance is part of an **Auto Scaling Group**, the ASG automatically replaces terminated or unhealthy instances.</li>
    <li>Ensure **health checks** are configured correctly for EC2 and Load Balancers.</li>
    <li>Example: A web application ASG with min=3 instances replaces a failed instance automatically without downtime.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Recover Failed OS or Misconfigured Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Stop the instance and detach the root EBS volume.</li>
    <li>Attach the volume to a healthy EC2 instance as a secondary volume.</li>
    <li>Inspect and fix system issues: logs, configuration files, SSH keys, disk space.</li>
    <li>Detach and reattach to original instance, then restart.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Java application instance terminated accidentally.</li>
    <li>Restore using a previously created AMI → Launch new EC2 instance with the same configuration.</li>
    <li>Reattach any EBS volumes for persistent data if needed.</li>
    <li>Application becomes available again in minutes.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create **AMIs** for all critical instances regularly.</li>
    <li>Enable **automatic EBS snapshots** for persistent volumes.</li>
    <li>Use **Auto Scaling Groups** to minimize downtime.</li>
    <li>Test recovery procedures periodically to ensure readiness.</li>
    <li>Keep **configuration scripts (Terraform, CloudFormation, or Ansible)** to recreate instances reliably.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-recovery.png" alt="EC2 Recovery Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-ebs-performance" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Troubleshooting Slow EBS Performance on EC2</h2>

  <p class="mb-4 text-gray-700">
    Amazon Elastic Block Store (EBS) provides persistent block storage for EC2 instances. Sometimes, applications may experience slow I/O performance due to misconfiguration, insufficient throughput, or workload patterns. Understanding and troubleshooting EBS performance is critical for database-heavy or high-throughput workloads.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Check Volume Type and Performance Characteristics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Identify the **EBS volume type**: gp3, gp2, io1/io2, st1, sc1.</li>
    <li>Different volume types have different IOPS, throughput, and latency characteristics.</li>
    <li>Example: gp2 volumes provide baseline IOPS proportional to volume size (3 IOPS per GB), which may be insufficient for high-performance workloads.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Monitor Metrics with CloudWatch</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use CloudWatch metrics such as:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li><code>VolumeReadOps</code> / <code>VolumeWriteOps</code></li>
        <li><code>VolumeReadBytes</code> / <code>VolumeWriteBytes</code></li>
        <li><code>VolumeQueueLength</code> (backlog of I/O requests)</li>
        <li><code>VolumeIdleTime</code></li>
      </ul>
    </li>
    <li>High queue length or high burst usage may indicate throttling or insufficient IOPS.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Check EC2 Instance Limits</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure the **EC2 instance type** supports the volume’s maximum IOPS and throughput.</li>
    <li>Example: Using io2 volume on a t3.medium instance may not achieve full IOPS because the instance network bandwidth is limited.</li>
    <li>Consider upgrading to a larger instance type or one optimized for high network and EBS throughput.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Use Provisioned IOPS for Critical Workloads</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>For databases or high-I/O applications, use **io1/io2** volumes with **provisioned IOPS**.</li>
    <li>Adjust IOPS to match workload requirements.</li>
    <li>Example: A Java backend database requiring 10,000 IOPS can be provisioned with io2 volume at 10,000 IOPS and 500 GiB size.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Optimize Filesystem and Application Configuration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable proper **file system mount options**, such as `noatime`, `nobarrier` (with caution), or using **XFS** for high concurrency workloads.</li>
    <li>Use **multi-threaded I/O** or parallelization in the application.</li>
    <li>Ensure **disk queue depth** is tuned correctly for your workload.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Check for Bursting or Throttling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>gp2 and gp3 volumes can burst IOPS temporarily. Prolonged high I/O may exceed burst credits and throttle performance.</li>
    <li>Monitor <code>VolumeReadOps</code> and <code>VolumeWriteOps</code> to detect throttling.</li>
    <li>Upgrade volume size or switch to provisioned IOPS if sustained high performance is needed.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>A Java application using a gp2 EBS volume experiences high latency during database writes.</li>
    <li>CloudWatch shows sustained IOPS higher than the volume baseline, causing throttling.</li>
    <li>Solution:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Upgrade to gp3 or io2 with provisioned IOPS.</li>
        <li>Tune filesystem with `noatime` and use concurrent I/O threads in the application.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">8. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Choose the right EBS volume type based on workload.</li>
    <li>Monitor CloudWatch metrics for early detection of bottlenecks.</li>
    <li>Match EC2 instance limits with EBS throughput and IOPS requirements.</li>
    <li>Use provisioned IOPS for consistent, high-performance workloads.</li>
    <li>Regularly review filesystem and application I/O patterns for optimization.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ebs-performance.png" alt="EC2 EBS Performance Troubleshooting" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-status-checks" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Status Checks: System Status vs Instance Status</h2>

  <p class="mb-4 text-gray-700">
    AWS EC2 provides **status checks** to monitor the health of your instances and the underlying AWS infrastructure. Understanding these checks helps you identify issues early and take corrective actions.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. System Status Check</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Verifies the health of the underlying AWS infrastructure hosting your instance.</li>
    <li>Checks for issues such as:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Network connectivity problems at the host level</li>
        <li>Power, hardware, or software issues in the physical host</li>
        <li>Problems with the hypervisor managing the instance</li>
      </ul>
    </li>
    <li>If a **system status check fails**, AWS may recommend stopping and starting the instance, or in some cases, the host is automatically recovered by AWS.</li>
    <li><strong>Example:</strong> Instance becomes unreachable due to host hardware failure → system status check fails → AWS may migrate instance to healthy hardware.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Instance Status Check</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Monitors the software and operating system inside your instance.</li>
    <li>Checks for issues such as:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Failed system boot</li>
        <li>Operating system crashes or hangs</li>
        <li>Exhausted memory or high CPU load preventing SSH connections</li>
        <li>Corrupted file system preventing startup</li>
      </ul>
    </li>
    <li>If an **instance status check fails**, you may need to log in via SSH, Session Manager, or attach the root volume to another instance to troubleshoot and fix OS-level problems.</li>
    <li><strong>Example:</strong> Java application misconfigured → causes OS to hang → instance status check fails → fix required inside OS.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. How to View Status Checks</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Navigate to <strong>EC2 Console → Instances</strong> → select your instance → view <strong>Status Checks</strong> column.</li>
    <li>CloudWatch metrics also include <code>StatusCheckFailed</code> and <code>StatusCheckFailed_System</code>, <code>StatusCheckFailed_Instance</code>.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Common Failure Causes</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>System Status Failures:</strong>
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Hardware failure on the physical host</li>
        <li>Network connectivity issues in AWS region</li>
        <li>Hypervisor or underlying infrastructure bugs</li>
      </ul>
    </li>
    <li><strong>Instance Status Failures:</strong>
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>High CPU or memory utilization preventing OS response</li>
        <li>Corrupted OS files or misconfigured bootloader</li>
        <li>Improper shutdown or filesystem errors</li>
        <li>SSH misconfiguration blocking login</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Recovery Steps</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If **system status fails**:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Stop and start the instance to migrate to healthy host hardware</li>
        <li>Check AWS Service Health Dashboard for region issues</li>
      </ul>
    </li>
    <li>If **instance status fails**:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Connect via Session Manager or SSH to troubleshoot OS-level issues</li>
        <li>Detach and attach the root EBS volume to another instance to fix configuration or corrupted files</li>
        <li>Reboot the instance after fixes</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Regularly monitor both **system and instance status checks** in CloudWatch.</li>
    <li>Create **AMIs or snapshots** of critical instances to allow quick recovery.</li>
    <li>Use **Auto Scaling Groups** to automatically replace unhealthy instances.</li>
    <li>Keep OS and applications up to date to reduce instance-level failures.</li>
    <li>Test recovery procedures periodically to ensure readiness.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-status-checks.png" alt="EC2 Status Checks Diagram" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-cost-optimization" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Reducing EC2 Costs in Production Environments</h2>

  <p class="mb-4 text-gray-700">
    Managing EC2 costs is critical in production, especially when running multiple instances or high-performance workloads. AWS provides several strategies to optimize costs without compromising performance or availability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Use the Right Instance Type</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Analyze CPU, memory, and network usage to select the most appropriate instance type.</li>
    <li>Example: Replace a t3.large underutilized instance with a t3.medium to save costs.</li>
    <li>Use **EC2 Instance Recommendations** in the AWS Console to find optimal instance types.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Use Spot and Reserved Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>**Spot Instances**: Up to 90% cheaper, suitable for non-critical or batch workloads.</li>
    <li>**Reserved Instances (RIs)**: Commit to 1 or 3 years for predictable workloads to reduce costs significantly.</li>
    <li>**Savings Plans**: Flexible option to apply discounts across EC2 instance families for consistent workloads.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Auto Scaling and Right-Sizing</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Auto Scaling Groups (ASGs)** to dynamically scale instances based on traffic.</li>
    <li>Terminate underutilized instances during low traffic periods to save cost.</li>
    <li>Combine with **CloudWatch alarms** to scale in/out based on CPU, memory, or custom metrics.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Use Elastic Load Balancers Efficiently</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Distribute traffic efficiently with **ALB/NLB** to avoid over-provisioning instances.</li>
    <li>Combine with Auto Scaling to maintain high availability while minimizing idle instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Leverage EBS Cost Optimization</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **gp3** volumes instead of gp2 for cheaper and more consistent performance.</li>
    <li>Delete unused EBS volumes or snapshots regularly.</li>
    <li>Consider **elastic storage options** (S3, FSx, EFS) for rarely accessed data instead of provisioning large EBS volumes.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Stop or Hibernate Idle Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Stop non-critical instances during off-hours to save on hourly charges.</li>
    <li>Use **EC2 hibernation** to preserve instance state while reducing costs.</li>
    <li>Example: Development or testing instances only needed 9am–6pm → stop outside these hours.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Monitor Usage and Set Budgets</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **AWS Cost Explorer** to track and analyze EC2 usage.</li>
    <li>Set **AWS Budgets** and alerts to prevent overspending.</li>
    <li>Identify underutilized or idle resources and take corrective actions.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">8. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Production Java web application running 5 t3.large instances 24/7.</li>
    <li>Cost optimization steps:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Right-size instances → t3.medium saves 30%.</li>
        <li>Move batch processing jobs to Spot instances → additional 50% savings.</li>
        <li>Enable Auto Scaling → reduce instances during low traffic periods.</li>
        <li>Delete unused EBS snapshots → save storage cost.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">9. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Regularly review instance utilization and right-size accordingly.</li>
    <li>Combine Reserved Instances, Spot, and Savings Plans for cost efficiency.</li>
    <li>Leverage Auto Scaling to match capacity with demand.</li>
    <li>Monitor costs proactively using AWS Cost Explorer and Budgets.</li>
    <li>Remove unused resources to avoid unnecessary charges.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cost-optimization.png" alt="EC2 Cost Optimization" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-spot-instances" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Spot Instances: Trade-offs for Critical Workloads</h2>

  <p class="mb-4 text-gray-700">
    AWS Spot Instances provide unused EC2 capacity at significant discounts (up to 90% off On-Demand prices). While attractive for cost savings, they come with trade-offs, especially for critical workloads that require high availability and reliability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Advantages of Spot Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Significant cost savings compared to On-Demand instances.</li>
    <li>Access to additional capacity for large-scale workloads without high costs.</li>
    <li>Ideal for batch processing, data analysis, CI/CD pipelines, and testing environments.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Trade-offs / Limitations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>Interruption Risk:</strong>
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Spot instances can be terminated by AWS with a 2-minute warning if capacity is needed for On-Demand or Reserved instances.</li>
        <li>Critical workloads cannot rely on uninterrupted runtime without additional safeguards.</li>
      </ul>
    </li>
    <li><strong>Variable Availability:</strong>
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Spot instance availability depends on region, instance type, and current demand.</li>
        <li>You may not always be able to launch the exact number of instances needed at a given time.</li>
      </ul>
    </li>
    <li><strong>Complexity in Workload Management:</strong>
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Applications need to handle interruptions gracefully.</li>
        <li>Requires architecture to save state frequently or use stateless designs.</li>
      </ul>
    </li>
    <li><strong>Limited Long-Term Predictability:</strong>
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Spot prices may fluctuate, making cost planning less predictable for highly sensitive budgets.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Best Practices for Critical Workloads</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Combine **Spot with On-Demand or Reserved Instances** to ensure baseline capacity for critical workloads.</li>
    <li>Use **Auto Scaling Groups with mixed instance types** (On-Demand + Spot) for high availability.</li>
    <li>Implement **checkpointing and state-saving mechanisms** in applications to prevent data loss on interruption.</li>
    <li>Monitor **Spot instance interruptions** via CloudWatch events or SNS notifications and automate recovery.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>A batch-processing Java job needs 50 instances:</li>
    <li>Solution:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Launch 20 On-Demand instances for critical baseline tasks.</li>
        <li>Launch 30 Spot instances to process extra workloads at 70% lower cost.</li>
        <li>Use checkpointing to resume any interrupted tasks from Spot instances.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Summary</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Spot instances are **cost-effective** but **not fully reliable** for critical workloads unless combined with On-Demand instances or resilient architectures.</li>
    <li>Proper design patterns, checkpointing, and mixed instance strategies can allow critical workloads to **leverage Spot savings safely**.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-spot-tradeoffs.png" alt="Spot Instances Trade-offs" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>









<section id="ec2-right-sizing-reserved" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Instance Right-Sizing and Reserved Instances Strategy</h2>

  <p class="mb-4 text-gray-700">
    Optimizing EC2 costs requires choosing the right instance size for your workload and leveraging Reserved Instances (RIs) for predictable usage. This approach balances cost, performance, and scalability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Instance Right-Sizing</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Analyze actual CPU, memory, and network utilization of your EC2 instances using **CloudWatch metrics** or **AWS Compute Optimizer**.</li>
    <li>Identify over-provisioned or underutilized instances:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Over-provisioned → waste of money</li>
        <li>Under-provisioned → poor performance</li>
      </ul>
    </li>
    <li>Resize instances to match the workload:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Example: t3.large instance using only 25% CPU → resize to t3.medium.</li>
        <li>Example: Memory-bound Java application using 90% memory → move to r5.large for better performance.</li>
      </ul>
    </li>
    <li>Right-sizing should be continuous, adjusting as workloads change over time.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Reserved Instances (RI) Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Reserved Instances provide **discounted hourly rates** in exchange for a **commitment of 1 or 3 years**.</li>
    <li>Benefits:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Up to 72% cost savings compared to On-Demand pricing.</li>
        <li>Provides cost predictability for stable workloads.</li>
      </ul>
    </li>
    <li>Types of RIs:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li><strong>Standard RI:</strong> Maximum discount, fixed instance type.</li>
        <li><strong>Convertible RI:</strong> Flexible instance type changes during term.</li>
      </ul>
    </li>
    <li>Combine RIs with Spot and On-Demand instances for **flexibility and cost optimization**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Practical Example</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Production Java web application:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Initially 5 t3.large instances running 24/7 → CloudWatch shows 40% CPU utilization.</li>
        <li>Right-size to t3.medium → saves 20% cost.</li>
        <li>Purchase Standard RIs for 3 years for baseline 3 instances → additional 40% cost reduction.</li>
        <li>Remaining 2 instances run On-Demand to handle peak loads.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Regularly analyze instance utilization for right-sizing opportunities.</li>
    <li>Use **AWS Compute Optimizer** recommendations for optimal instance selection.</li>
    <li>Combine **Reserved Instances, Spot, and On-Demand instances** to balance cost and availability.</li>
    <li>Review RIs periodically to ensure they align with changing workloads.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-right-sizing.png" alt="EC2 Right-Sizing and RI Strategy" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-cost-tracking" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Tracking EC2 Costs at a Per-Application Level</h2>

  <p class="mb-4 text-gray-700">
    Monitoring EC2 costs per application helps teams allocate budgets, optimize resource usage, and understand which workloads contribute most to your AWS bill. AWS provides tools to track costs granularly.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Use Tags for Cost Allocation</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Assign **tags** to EC2 instances to identify applications, environments, or teams.</li>
    <li>Example: 
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li><code>Application=InventoryService</code></li>
        <li><code>Environment=Production</code></li>
      </ul>
    </li>
    <li>Ensure tagging is consistent across all EC2 resources, EBS volumes, and related services.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Enable Cost Allocation Tags</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Activate **AWS Cost Allocation Tags** in the AWS Billing console.</li>
    <li>These tags will appear in **Cost Explorer**, enabling per-application cost breakdowns.</li>
    <li>Example: Filter EC2 costs by tag <code>Application=InventoryService</code> to see monthly spending.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Use AWS Cost Explorer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Navigate to <strong>Billing → Cost Explorer</strong>.</li>
    <li>Group costs by **tags** such as Application, Environment, or Project.</li>
    <li>Example: View a stacked bar chart showing costs for <code>InventoryService</code>, <code>PaymentService</code>, and <code>ReportingService</code> over the month.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Use AWS Budgets for Application-Level Tracking</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create **AWS Budgets** with filters based on tags.</li>
    <li>Example: Budget $500/month for <code>Application=InventoryService</code>. Get alerts when spending approaches the limit.</li>
    <li>This allows teams to proactively manage costs per application.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Combine with CloudWatch and Resource Usage Metrics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Track instance utilization using CloudWatch metrics (CPU, memory, network).</li>
    <li>Example: If an EC2 instance tagged <code>Application=InventoryService</code> is underutilized, consider downsizing to reduce costs.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>A company runs 3 applications on EC2: InventoryService, PaymentService, ReportingService.</li>
    <li>Steps for tracking costs:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Tag EC2 instances and EBS volumes per application.</li>
        <li>Enable Cost Allocation Tags for Application.</li>
        <li>Use Cost Explorer to group costs by Application.</li>
        <li>Set budgets for each application to alert teams when nearing limits.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enforce a **tagging policy** for all environments and teams.</li>
    <li>Regularly review Cost Explorer reports to identify optimization opportunities.</li>
    <li>Combine **usage metrics with costs** to make data-driven scaling and right-sizing decisions.</li>
    <li>Leverage automation (AWS Lambda) to ensure newly launched instances are tagged properly.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cost-tracking.png" alt="EC2 Cost Tracking Per Application" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="lambda-vs-ec2" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">When to Choose Serverless (AWS Lambda) over EC2</h2>

  <p class="mb-4 text-gray-700">
    AWS provides multiple compute options, including EC2 instances and Lambda functions. Choosing the right compute model affects **cost, operational overhead, and scalability**.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Cost Perspective</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>EC2:</strong> Pay for **running instances per hour** regardless of workload usage.</li>
    <li><strong>Lambda:</strong> Pay **only for the compute time used** (per request, per 100ms), with automatic scaling.</li>
    <li>Example:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>EC2 instance running 24/7 for low-traffic API → wasteful, higher cost.</li>
        <li>Lambda executes on-demand for 100 requests/day → extremely low cost.</li>
      </ul>
    </li>
    <li>Lambda is ideal for **spiky, intermittent workloads** where instances would remain idle for most of the day.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Operational Perspective</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>EC2:</strong> Requires **OS management, patching, scaling configuration, monitoring, and security hardening**.</li>
    <li><strong>Lambda:</strong> Fully managed; AWS handles **provisioning, scaling, patching, and availability** automatically.</li>
    <li>Example:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>EC2: You need to install Java, configure your web server, and scale manually or via Auto Scaling Groups.</li>
        <li>Lambda: Simply deploy your Java function (or other runtime) and AWS manages scaling and runtime environment.</li>
      </ul>
    </li>
    <li>Lambda significantly reduces **operational overhead** for small teams or short-lived workloads.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Use Cases Where Lambda is Preferred</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Event-driven applications: S3 uploads, DynamoDB streams, CloudWatch events.</li>
    <li>Intermittent APIs with low to medium traffic.</li>
    <li>Batch jobs that run only occasionally.</li>
    <li>Microservices where scaling automatically per request is important.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Use Cases Where EC2 is Preferred</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Long-running applications with consistent load.</li>
    <li>Custom OS or software dependencies not supported by Lambda runtimes.</li>
    <li>Applications requiring persistent storage or local caching.</li>
    <li>Workloads needing specialized hardware (GPU, FPGA) or high network throughput.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Practical Example</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Scenario: Java microservice processes image uploads.
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Low traffic: 50 images/day → Lambda processes each image on-demand → cost-effective.</li>
        <li>High traffic or real-time streaming: 1000+ images/sec → EC2 cluster with Auto Scaling may be required for consistent performance.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Summary</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Choose **Lambda** for **on-demand, intermittent, or event-driven workloads** with minimal operational overhead and cost savings.</li>
    <li>Choose **EC2** for **long-running, high-performance, or highly customized workloads** requiring persistent environment control.</li>
    <li>Often a **hybrid approach** works best: Lambda for event-driven tasks + EC2 for core, always-on services.</li>
  </ul>

  <div class="mt-4">
    <img src="images/lambda-vs-ec2.png" alt="Lambda vs EC2 Cost and Operational Comparison" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-stateless-architecture" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Architecture for Stateless Microservices</h2>

  <p class="mb-4 text-gray-700">
    Stateless microservices are designed so that **each instance does not retain session state**, allowing services to scale horizontally quickly and reliably. Choosing the right EC2 architecture ensures high availability, scalability, and performance.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Core Principles of Stateless Microservices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>No session or user data is stored locally on EC2 instances.</li>
    <li>All persistent data is stored externally, e.g., databases, object storage (S3), or distributed caches (Redis/ElastiCache).</li>
    <li>Any instance can handle any request interchangeably, supporting **horizontal scaling**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Recommended EC2 Architecture</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>Auto Scaling Groups (ASG):</strong> Automatically scale EC2 instances based on CPU, memory, or custom metrics.</li>
    <li><strong>Elastic Load Balancer (ALB/NLB):</strong> Distributes incoming traffic evenly across all instances in the ASG.</li>
    <li><strong>Multi-AZ Deployment:</strong> Deploy instances across multiple Availability Zones for high availability and fault tolerance.</li>
    <li><strong>External Session Management:</strong> Use Redis, DynamoDB, or RDS to store session or shared data.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Architecture Diagram</h3>
  <div class="mt-4 mb-4">
    <img src="images/stateless-microservices-architecture.png" alt="Stateless Microservices EC2 Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Java-based web application that handles user requests via REST APIs.</li>
    <li>Architecture:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>3 EC2 instances in an Auto Scaling Group behind an ALB.</li>
        <li>Redis (ElastiCache) stores user session data for stateless processing.</li>
        <li>RDS MySQL database stores persistent application data.</li>
      </ul>
    </li>
    <li>Scaling:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>During traffic spikes, ASG automatically launches additional EC2 instances.</li>
        <li>Load balancer directs traffic to new instances without any session conflicts.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Benefits of This Architecture</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Rapid horizontal scaling to handle varying loads.</li>
    <li>High availability across multiple Availability Zones.</li>
    <li>Minimal operational complexity — instances are interchangeable.</li>
    <li>Reduced cost due to efficient use of Auto Scaling and on-demand provisioning.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure all microservices are truly stateless; externalize all persistent state.</li>
    <li>Use health checks on ALB to route traffic only to healthy instances.</li>
    <li>Implement CloudWatch metrics for ASG scaling decisions.</li>
    <li>Use Reserved or Spot instances in ASG to optimize cost.</li>
  </ul>
</section>








<section id="ec2-server-migration" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Migrating On-Prem Linux/Windows Servers to EC2 with Minimal Downtime</h2>

  <p class="mb-4 text-gray-700">
    Migrating on-premises servers to AWS EC2 requires careful planning to ensure **minimal downtime**, data integrity, and seamless user experience. AWS provides several tools and strategies to simplify the migration process.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Assess and Plan Migration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Identify applications, databases, and dependencies running on on-prem servers.</li>
    <li>Classify servers by operating system (Linux/Windows), workload type, and criticality.</li>
    <li>Decide migration strategy: rehost (lift-and-shift), re-platform, or refactor.</li>
    <li>Example: Critical production database server → plan for minimal downtime using replication.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Choose the Migration Tool</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>AWS Server Migration Service (SMS):</strong> Automates incremental replication of on-prem servers to EC2.</li>
    <li><strong>AWS Application Migration Service (MGN):</strong> Recommended for rehost/migrate servers quickly with near-zero downtime.</li>
    <li><strong>Manual Approach:</strong> Create AMIs or snapshots and replicate data manually (less preferred for large production systems).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Migrate Linux Servers Example</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use AWS MGN to replicate a Linux server:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Install the AWS Replication Agent on the on-prem Linux server.</li>
        <li>Replicate disk volumes to AWS continuously.</li>
        <li>Perform test launches on EC2 without affecting production.</li>
        <li>Schedule final cutover to EC2 during maintenance window → minimal downtime.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Migrate Windows Servers Example</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Steps using AWS MGN:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Install replication agent on Windows Server.</li>
        <li>Replicate disks continuously to EC2 target region.</li>
        <li>Perform test launches on EC2 Windows instances.</li>
        <li>Update DNS or load balancer to point to new EC2 instance for final cutover.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices for Minimal Downtime</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **continuous replication** to reduce cutover time.</li>
    <li>Perform **test launches** before production cutover to validate applications.</li>
    <li>Keep **network configuration consistent**, including security groups and subnets.</li>
    <li>Use **DNS TTL reduction** to ensure fast propagation during final switch.</li>
    <li>Monitor performance and application health post-migration using **CloudWatch**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Practical Example</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Company runs a Windows ERP server on-prem:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Install AWS MGN agent → replicate server to EC2 in us-east-1.</li>
        <li>Launch test EC2 Windows instance → validate ERP functionality.</li>
        <li>Schedule final cutover at night → update DNS to point to EC2 instance.</li>
        <li>Downtime: ~5 minutes, instead of hours required for manual migration.</li>
      </ul>
    </li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-migration.png" alt="EC2 Server Migration" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-auto-recovery" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">EC2 Auto Recovery: Critical Scenario</h2>

  <p class="mb-4 text-gray-700">
    EC2 Auto Recovery helps automatically recover instances when underlying hardware or system issues occur. This ensures high availability and minimal downtime for critical workloads.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. What is EC2 Auto Recovery?</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Monitors the health of EC2 instances using Amazon CloudWatch alarms.</li>
    <li>If an instance fails due to **hardware or system issues**, it is automatically stopped and started on healthy hardware.</li>
    <li>The instance retains its **instance ID, Elastic IP (if assigned), and configuration**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Critical Scenario Example</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Company runs a **Java-based payment processing application** on a single EC2 instance.</li>
    <li>This instance is critical — downtime affects transactions and revenue.</li>
    <li>Without Auto Recovery:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>If the underlying host fails, the application is offline until manual intervention.</li>
        <li>Could result in **hours of downtime**, lost transactions, and customer dissatisfaction.</li>
      </ul>
    </li>
    <li>With Auto Recovery enabled:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>CloudWatch detects system impairment.</li>
        <li>EC2 automatically recovers the instance on healthy hardware.</li>
        <li>Downtime is reduced to **minutes**, keeping critical payment services available.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Steps to Enable Auto Recovery</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to EC2 Console → Select Instance → Actions → Monitor and troubleshoot → Manage CloudWatch alarms.</li>
    <li>Create a **CloudWatch alarm** for the metric <code>StatusCheckFailed_System</code>.</li>
    <li>Set the alarm action to **Recover this instance**.</li>
    <li>Test by simulating system failure → instance is automatically recovered.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use Auto Recovery in **critical single-instance workloads** where high availability is essential.</li>
    <li>Combine with **EBS snapshots and backups** for data protection.</li>
    <li>Monitor recovery events using **CloudWatch Logs and SNS notifications**.</li>
    <li>For highly critical applications, also consider **Multi-AZ deployments or Auto Scaling** for redundancy.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-auto-recovery.png" alt="EC2 Auto Recovery Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-secure-integration" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Secure Integration of EC2 with RDS, S3, and ElastiCache</h2>

  <p class="mb-4 text-gray-700">
    When connecting EC2 instances to AWS services like RDS, S3, and ElastiCache, security is critical. Proper IAM roles, VPC configurations, and encryption strategies ensure secure, efficient communication.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. EC2 Integration with RDS</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch EC2 and RDS instances in the **same VPC** for secure, private communication.</li>
    <li>Place RDS in a **private subnet** to avoid public exposure.</li>
    <li>Configure **security groups**:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>EC2 SG allows outbound traffic to RDS SG on the database port (e.g., 3306 for MySQL).</li>
        <li>RDS SG allows inbound traffic from EC2 SG only.</li>
      </ul>
    </li>
    <li>Use **IAM database authentication** for RDS (optional) to avoid hardcoding credentials.</li>
    <li>Enable **encryption at rest** (KMS) and **encryption in transit** (SSL/TLS).</li>
    <li>Example: A Java app on EC2 connects to MySQL RDS using:
      <code>jdbc:mysql://mydb.example.com:3306/inventory?useSSL=true</code>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. EC2 Integration with S3</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Assign an **IAM role to EC2** with an S3 access policy (no hard-coded keys).</li>
    <li>Use **S3 bucket policies** to restrict access to specific IAM roles or VPC endpoints.</li>
    <li>Enable **S3 encryption at rest** using SSE-S3 or SSE-KMS.</li>
    <li>Use **VPC Gateway Endpoint** for S3 to keep traffic private within AWS network.</li>
    <li>Example Java snippet using AWS SDK:
      <pre class="bg-gray-100 p-2 rounded text-sm">s3Client.getObject("my-bucket", "file.txt");</pre>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. EC2 Integration with ElastiCache</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch ElastiCache in the same **VPC and subnet group** as your EC2 instances.</li>
    <li>Configure **security groups**:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>EC2 SG allows outbound traffic to ElastiCache SG on Redis/Memcached port (6379/11211).</li>
        <li>ElastiCache SG allows inbound traffic from EC2 SG only.</li>
      </ul>
    </li>
    <li>Enable **in-transit encryption** (TLS) for Redis/Memcached.</li>
    <li>Enable **at-rest encryption** if supported by the engine.</li>
    <li>Example: Java application using Jedis client:
      <pre class="bg-gray-100 p-2 rounded text-sm">
Jedis jedis = new Jedis("my-redis-cluster.example.com", 6379);
jedis.set("key", "value");
      </pre>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Always use **IAM roles** instead of hard-coded credentials.</li>
    <li>Use **VPC private subnets** and security groups to limit access.</li>
    <li>Enable **encryption in transit and at rest** for RDS, S3, and ElastiCache.</li>
    <li>Monitor access using **CloudTrail and CloudWatch Logs**.</li>
    <li>Use **parameter groups and encryption options** for ElastiCache and RDS for compliance.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-secure-integration.png" alt="EC2 Integration with RDS, S3, and ElastiCache" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-multi-region-dr" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Multi-Region EC2 Deployment Strategies for Disaster Recovery</h2>

  <p class="mb-4 text-gray-700">
    Multi-region EC2 deployments ensure **high availability, fault tolerance, and disaster recovery** in case of region-wide failures. AWS provides several strategies to deploy EC2 instances across regions efficiently.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Pilot Light Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run a minimal, standby infrastructure in a secondary region (pilot light).</li>
    <li>Example:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Primary region: Full production EC2, RDS, ElastiCache.</li>
        <li>Secondary region: Only critical EC2 instances and replicated data.</li>
        <li>During DR, scale up the pilot light to handle production traffic.</li>
      </ul>
    </li>
    <li>Cost-effective since secondary region runs minimal resources until needed.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Warm Standby Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run a **scaled-down but ready-to-go** version of the production environment in a secondary region.</li>
    <li>Example:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Primary region: Full EC2 cluster with load balancer.</li>
        <li>Secondary region: Smaller EC2 cluster with same configurations and replication.</li>
        <li>During DR, increase instance count to handle full production load.</li>
      </ul>
    </li>
    <li>Offers faster recovery than pilot light at higher cost.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Active-Active Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run full production workloads in **multiple regions simultaneously**.</li>
    <li>Traffic is distributed using **Route 53 latency-based routing or GeoDNS**.</li>
    <li>Example:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Primary region: EC2 cluster serving 50% of traffic.</li>
        <li>Secondary region: EC2 cluster serving 50% of traffic.</li>
        <li>If one region fails, Route 53 reroutes traffic to the healthy region instantly.</li>
      </ul>
    </li>
    <li>Provides maximum availability but at higher cost and operational complexity.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Data Replication Considerations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **RDS cross-region read replicas** for databases.</li>
    <li>Replicate **S3 buckets with Cross-Region Replication (CRR)** for static data.</li>
    <li>ElastiCache replication (for Redis) across regions is limited → consider application-level replication or backup/restore.</li>
    <li>Example: Real-time transaction data in primary region is asynchronously replicated to secondary region RDS.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Test DR plan regularly using **simulated region failure**.</li>
    <li>Use **Infrastructure as Code (CloudFormation/Terraform)** to replicate environment in multiple regions.</li>
    <li>Monitor health using **CloudWatch and Route 53 health checks**.</li>
    <li>Automate failover procedures and notifications using **SNS and Lambda**.</li>
    <li>Design EC2 instances and services to be **stateless** where possible to simplify failover.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-multi-region-dr.png" alt="Multi-Region EC2 Disaster Recovery" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-high-availability" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Redesigning EC2 Web Application for High Availability</h2>

  <p class="mb-4 text-gray-700">
    Running a web application on a single Availability Zone (AZ) can lead to downtime during maintenance or AZ failures. High Availability (HA) design ensures continuous service with minimal disruption.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Multi-AZ Deployment</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy EC2 instances across **multiple AZs** within the same region.</li>
    <li>Use **subnets in each AZ** and place instances behind a **load balancer**.</li>
    <li>Benefits:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Maintenance in one AZ does not affect application availability.</li>
        <li>Provides fault tolerance in case of AZ outage.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Elastic Load Balancer (ALB/NLB)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Place a **load balancer** in front of EC2 instances across multiple AZs.</li>
    <li>Distributes traffic evenly and automatically routes around unhealthy instances.</li>
    <li>Supports SSL termination, sticky sessions (if needed), and health checks.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Auto Scaling Groups</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Auto Scaling Groups (ASG)** to automatically launch or terminate EC2 instances based on demand.</li>
    <li>Distribute ASG instances across multiple AZs for redundancy.</li>
    <li>Example:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Minimum 2 instances (one in each AZ), desired 4 instances, maximum 6 instances.</li>
        <li>Scaling triggered by CPU utilization or custom CloudWatch metrics.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Database High Availability</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Amazon RDS Multi-AZ deployment** for relational databases.</li>
    <li>For NoSQL, use **DynamoDB global tables** for cross-AZ replication.</li>
    <li>Ensures database availability during AZ failures or maintenance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Session Management for Statelessness</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Keep EC2 instances **stateless** by storing session data in **ElastiCache Redis** or **DynamoDB**.</li>
    <li>Allows any instance to serve any request, simplifying scaling and failover.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Architecture</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Web application deployed across **2 AZs** with EC2 instances in each AZ.</li>
    <li>ALB distributes traffic and performs health checks.</li>
    <li>Auto Scaling Group ensures instance count matches traffic demand.</li>
    <li>RDS Multi-AZ provides database redundancy.</li>
    <li>Redis (ElastiCache) stores session state for stateless web servers.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Benefits of This HA Design</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Eliminates single points of failure.</li>
    <li>Handles AZ failures or maintenance seamlessly.</li>
    <li>Scales automatically with demand.</li>
    <li>Improves user experience and reliability of web application.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ha-architecture.png" alt="EC2 High Availability Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-auto-scaling-troubleshoot" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Troubleshooting EC2 Auto Scaling Issues</h2>

  <p class="mb-4 text-gray-700">
    If your EC2 Auto Scaling Group (ASG) is not scaling as expected during peak traffic, there could be several reasons. Proper investigation involves checking metrics, scaling policies, instance health, and limits.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Check CloudWatch Metrics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Verify the metric used for scaling (CPUUtilization, RequestCountPerTarget, or custom metrics).</li>
    <li>Example: If scaling is based on CPU > 70%, ensure CPU metric actually exceeds the threshold during peak traffic.</li>
    <li>Look for **metric delays** — metrics are not instantaneous, may have 1–5 minute granularity.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Verify Scaling Policies</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check if **Target Tracking, Step, or Simple scaling policies** are correctly configured.</li>
    <li>Ensure **cooldown periods** are not too long, which could delay scaling actions.</li>
    <li>Example: Step scaling with 300-second cooldown may delay additional instances even if traffic spikes rapidly.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Inspect ASG Limits</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check **minimum, desired, and maximum instance counts** in ASG configuration.</li>
    <li>If max size is too low, ASG cannot launch enough instances during traffic spike.</li>
    <li>Example: Desired = 4, max = 5 → during peak demand requiring 6 instances, scaling will be restricted.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Examine Instance Launch Issues</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check **EC2 launch templates/configurations** for errors (wrong AMI, instance type, or subnet). </li>
    <li>Inspect **VPC, subnet, and IP availability** — instances may fail to launch if resources are exhausted.</li>
    <li>Look at **CloudTrail events or ASG Activity History** to see failed launch attempts.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Check Health Checks</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Auto Scaling relies on **EC2 and ELB health checks** to mark instances as healthy or unhealthy.</li>
    <li>Unhealthy instances may prevent new instances from being added correctly.</li>
    <li>Verify health check grace period and ensure applications start quickly enough.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Resolve and Validate</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Adjust **scaling policies, cooldowns, and ASG limits** as needed.</li>
    <li>Fix any **launch configuration issues** (AMI, instance type, subnet). </li>
    <li>Test scaling by simulating load (e.g., using **stress tools or load testing scripts**).</li>
    <li>Monitor **CloudWatch alarms and ASG Activity History** to confirm instances launch and terminate correctly.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Example</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>ASG configured for a web application:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Target CPUUtilization = 60%, min = 2, max = 6 instances.</li>
        <li>Peak traffic spike: CPU = 80% → only 4 instances launched due to max size limit.</li>
        <li>Resolution: Increase max size to 10, verify launch template and subnets, scaling triggers properly.</li>
      </ul>
    </li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-auto-scaling-troubleshoot.png" alt="EC2 Auto Scaling Troubleshooting" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-stateless-stateful" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Designing Stateless vs Stateful Services on EC2 for Horizontal Scaling</h2>

  <p class="mb-4 text-gray-700">
    Horizontal scaling involves adding more EC2 instances to handle increased load. Designing your services as stateless or stateful has a major impact on how easily you can scale horizontally.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Stateless Services</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Do **not store client session or application state locally** on the EC2 instance.</li>
    <li>Any instance can serve any request, allowing **easy addition/removal of instances**.</li>
    <li>Use **shared storage** for stateful data:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Session storage: Redis (ElastiCache) or DynamoDB</li>
        <li>File storage: S3 or EFS</li>
      </ul>
    </li>
    <li>Example Java web app:
      <pre class="bg-gray-100 p-2 rounded text-sm">
@RequestMapping("/cart")
public Cart getCart(@RequestParam String userId) {
    return redisService.getCart(userId); // Stateless EC2 instance, session in Redis
}
      </pre>
    </li>
    <li>Advantages:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Horizontal scaling is simple and fast</li>
        <li>Fault tolerance: any instance can replace a failed one</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Stateful Services</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Store application or session state **locally on the EC2 instance**.</li>
    <li>Horizontal scaling is challenging because:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Requests must route to the correct instance holding the state.</li>
        <li>Sticky sessions may be needed at load balancer level.</li>
        <li>Failover or instance replacement requires state replication.</li>
      </ul>
    </li>
    <li>Example:
      <pre class="bg-gray-100 p-2 rounded text-sm">
private Map<String, Cart> localCartStore = new HashMap<>();
// Each instance holds its own cart data — not shared
      </pre>
    </li>
    <li>Advantages:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Faster access for local state</li>
        <li>Simpler for small-scale applications</li>
      </ul>
    </li>
    <li>Disadvantages:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Harder to scale horizontally</li>
        <li>Less resilient to instance failures</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Horizontal Scaling Design Principles</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Prefer **stateless EC2 instances** wherever possible.</li>
    <li>Use **load balancers (ALB/NLB)** to distribute requests evenly across instances.</li>
    <li>Store shared state externally:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Sessions: Redis, DynamoDB</li>
        <li>Files: S3, EFS</li>
        <li>Database: RDS Multi-AZ or Aurora Global DB</li>
      </ul>
    </li>
    <li>For stateful services, implement **replication or sticky sessions**, but understand horizontal scaling limitations.</li>
    <li>Combine with **Auto Scaling Groups** to dynamically add/remove EC2 instances during traffic spikes.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Architecture</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 web servers (stateless) behind an ALB.</li>
    <li>Session data stored in ElastiCache Redis.</li>
    <li>Database hosted on RDS Multi-AZ for HA.</li>
    <li>S3 for static content (images, files) accessible by all EC2 instances.</li>
    <li>Auto Scaling Group adds EC2 instances automatically during traffic peaks.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-stateless-stateful.png" alt="Stateless vs Stateful EC2 Horizontal Scaling" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-monolith-migration" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Migrating On-Prem Monolith to EC2 with Zero Downtime</h2>

  <p class="mb-4 text-gray-700">
    Migrating a monolithic on-premises application to EC2 without downtime requires careful planning, replication of data, and gradual traffic cutover. Key strategies include lift-and-shift with load balancers, database replication, and blue-green deployments.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Assess Current Monolith</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Identify all application components, dependencies, and database schemas.</li>
    <li>Determine which parts can be migrated first and which require careful sequencing.</li>
    <li>Check for stateful components that may need externalization (sessions, caches, files).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Setup EC2 Environment</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Provision EC2 instances in **multiple AZs** behind an **Application Load Balancer (ALB)**.</li>
    <li>Use **Auto Scaling Groups** for dynamic instance scaling during migration and after go-live.</li>
    <li>Set up **security groups, VPC, subnets**, and other network configurations matching on-prem requirements.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Migrate Database with Replication</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy **RDS Multi-AZ** or EC2-hosted database in AWS.</li>
    <li>Enable **continuous replication** from on-prem database to AWS using AWS Database Migration Service (DMS) or native replication.</li>
    <li>Test replication lag and consistency to ensure zero data loss.</li>
    <li>Example: On-prem MySQL → RDS MySQL using DMS with ongoing replication.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Externalize Stateful Components</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Move sessions to **ElastiCache Redis** or **DynamoDB**.</li>
    <li>Move file storage to **S3** or **EFS**.</li>
    <li>Ensure EC2 instances are **stateless**, enabling easy horizontal scaling.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Blue-Green Deployment Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Set up a **green environment** in EC2 matching current on-prem (blue environment).</li>
    <li>Synchronize databases and storage between blue and green.</li>
    <li>Switch traffic gradually from blue (on-prem) to green (EC2) using DNS or load balancer routing.</li>
    <li>Rollback possible instantly if issues arise.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Test Thoroughly Before Cutover</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run full application testing in green EC2 environment.</li>
    <li>Check database consistency, application behavior, performance, and external integrations.</li>
    <li>Simulate peak traffic to verify Auto Scaling and load balancer behavior.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Example Migration Flow</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Step 1: Replicate on-prem DB to AWS RDS.</li>
    <li>Step 2: Deploy EC2 web/app servers in Auto Scaling Group.</li>
    <li>Step 3: Externalize sessions to Redis and files to S3.</li>
    <li>Step 4: Deploy blue-green environment and gradually redirect traffic.</li>
    <li>Step 5: Monitor logs, metrics, and CloudWatch alarms for errors.</li>
    <li>Step 6: Once traffic fully routed and stable, decommission on-prem servers.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-monolith-migration.png" alt="On-Prem Monolith to EC2 Zero Downtime Migration" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-network-optimization" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Handling EC2 Network Bandwidth Limits</h2>

  <p class="mb-4 text-gray-700">
    Network bandwidth limits on EC2 instances can cause application bottlenecks, slow response times, and degraded performance. Optimizing bandwidth usage and instance selection can improve performance while controlling costs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Understand EC2 Network Performance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check **instance type network performance**: Low, Moderate, High, 10 Gbps, 25 Gbps, etc.</li>
    <li>Use **Enhanced Networking (ENA)** for higher throughput and lower latency.</li>
    <li>Example: t3.medium → “Moderate”, m5.large → “Up to 10 Gbps”, c6g.4xlarge → “25 Gbps”.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Vertical Scaling (Upgrade Instance Type)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Upgrade to instances with higher **network bandwidth capacity**.</li>
    <li>Example: Move from t3.large to m5.xlarge for increased throughput.</li>
    <li>Trade-off: Higher cost but fewer instances needed for same throughput.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Horizontal Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Distribute traffic across **multiple instances** behind an **ALB/NLB** to reduce per-instance bandwidth load.</li>
    <li>Use **Auto Scaling Groups** to add more instances as traffic increases.</li>
    <li>Benefit: Lower per-instance utilization, cost spread across smaller instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Optimize Network Usage</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **compression** for data transfers.</li>
    <li>Use **CDN (CloudFront)** for static content to reduce EC2 bandwidth load.</li>
    <li>Batch requests or use asynchronous processing to reduce simultaneous network usage.</li>
    <li>Example: Offload images and static assets to S3 + CloudFront instead of serving from EC2.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Placement and Networking Optimizations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Place EC2 instances in the same **AZ/subnet** as RDS, ElastiCache, or S3 endpoints to reduce cross-AZ bandwidth.</li>
    <li>Use **VPC endpoints** to avoid internet routing for S3/DynamoDB traffic.</li>
    <li>Enable **Enhanced Networking** and **ENA** for supported instance types for low latency and high throughput.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Web app is hitting 1 Gbps per instance limit.</li>
    <li>Solution:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Switch to m5.xlarge instances (10 Gbps).</li>
        <li>Deploy 2 instances in an Auto Scaling Group behind ALB.</li>
        <li>Offload static content to S3 + CloudFront.</li>
        <li>Monitor network metrics via CloudWatch to ensure limits are not exceeded.</li>
      </ul>
    </li>
    <li>Outcome: Increased total throughput without over-provisioning, cost-efficient scaling.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-network-optimization.png" alt="EC2 Network Optimization" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-s3-secure-access" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Secure EC2 Access to S3 Without Storing Credentials</h2>

  <p class="mb-4 text-gray-700">
    Storing AWS credentials on EC2 instances is a security risk. AWS provides **IAM Roles for EC2** that allow instances to access S3 and other services securely without manually managing credentials.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create an IAM Role for EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to IAM console → Roles → Create role → Select **AWS service → EC2**.</li>
    <li>Attach **S3 access policy** (e.g., `AmazonS3ReadOnlyAccess` or custom policy).</li>
    <li>Name the role meaningfully (e.g., `EC2-S3-Access-Role`).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Attach Role to EC2 Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>When launching EC2, under **IAM role**, select the created role.</li>
    <li>For running instances, attach role via **Actions → Security → Modify IAM role**.</li>
    <li>No credentials are stored on the instance; AWS automatically provides temporary tokens.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Access S3 from EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **AWS SDK or CLI** to access S3 — no `AWS_ACCESS_KEY_ID` or `AWS_SECRET_ACCESS_KEY` required.</li>
    <li>Example using AWS CLI:
      <pre class="bg-gray-100 p-2 rounded text-sm">
# List buckets
aws s3 ls

# Copy a file to S3
aws s3 cp localfile.txt s3://my-bucket/
      </pre>
    </li>
    <li>Example using Java SDK:
      <pre class="bg-gray-100 p-2 rounded text-sm">
AmazonS3 s3Client = AmazonS3ClientBuilder.standard()
                    .withRegion(Regions.US_EAST_1)
                    .build();

S3Object object = s3Client.getObject("my-bucket", "file.txt");
      </pre>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Benefits of Using IAM Role</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>No credentials stored on the instance — reduces risk of leaks.</li>
    <li>Temporary security credentials automatically rotated by AWS.</li>
    <li>Easy to grant/revoke permissions by modifying the role policy.</li>
    <li>Supports scaling — multiple EC2 instances can use the same role securely.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Architecture</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instance(s) in an Auto Scaling Group.</li>
    <li>Attached IAM role with S3 read/write access.</li>
    <li>Application on EC2 accesses S3 using SDK/CLI without storing credentials.</li>
    <li>Optional: Use S3 bucket policies to restrict access to only instances with this IAM role.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-s3-iam-role.png" alt="EC2 Secure S3 Access via IAM Role" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-secure-ssh" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Detecting and Remediating Open Port 22 in Production</h2>

  <p class="mb-4 text-gray-700">
    Accidentally exposing SSH (port 22) to the world can lead to security breaches. Detecting and remediating this quickly is critical to maintaining security in production environments.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Detection</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **AWS Config** to continuously monitor security group rules.  
      <pre class="bg-gray-100 p-2 rounded text-sm">
Rule example: Ensure no SG allows 0.0.0.0/0 on port 22
      </pre>
    </li>
    <li>Enable **CloudWatch Alarms** for configuration changes in security groups.</li>
    <li>Use **VPC Flow Logs** to monitor incoming traffic to port 22.</li>
    <li>Leverage **AWS Trusted Advisor** and **Security Hub** for alerts about publicly open SSH.</li>
    <li>Automated scanning tools (like **nmap** or **AWS Inspector**) to detect exposed ports:</li>
      <pre class="bg-gray-100 p-2 rounded text-sm">
nmap -p 22 ec2-public-ip
      </pre>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Immediate Remediation</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Update the **security group** to restrict SSH access:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Allow only specific IP addresses (developer or office IP).</li>
        <li>Example rule: `22/tcp` allowed from `203.0.113.10/32`</li>
      </ul>
    </li>
    <li>Temporarily **remove public SSH access** if unsure of trusted IPs.</li>
    <li>Enable **MFA and strong key-based authentication** on all EC2 instances.</li>
    <li>Rotate SSH keys if compromise is suspected.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Prevention and Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **IAM Roles and Session Manager (SSM)** instead of direct SSH whenever possible.</li>
    <li>Implement **AWS Config rules**: "Ensure no security group allows unrestricted SSH access."</li>
    <li>Regularly audit security groups using automated scripts or AWS Config reports.</li>
    <li>Enable **VPC Flow Logs** and monitor for unexpected SSH traffic.</li>
    <li>Use **Infrastructure as Code (Terraform/CloudFormation)** to enforce secure SG rules.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Remediation Flow</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Detection: AWS Config alert triggers when SG 22/tcp is open to 0.0.0.0/0.</li>
    <li>Immediate action: Modify SG to allow only specific IPs or remove rule entirely.</li>
    <li>Verification: Use nmap or CloudWatch logs to confirm port 22 is no longer publicly accessible.</li>
    <li>Prevent recurrence: Add Config rule enforcement and educate developers.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ssh-remediation.png" alt="EC2 SSH Port 22 Remediation" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-pci-compliance" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Deploying EC2 Instances in a PCI-Compliant Network</h2>

  <p class="mb-4 text-gray-700">
    PCI DSS compliance requires strict network segmentation, access controls, and monitoring. Deploying EC2 instances in a compliant environment requires careful VPC, subnet, and security group design.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. VPC Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a dedicated **VPC for PCI workloads** separate from other environments.</li>
    <li>Enable **Flow Logs** for monitoring network traffic for compliance auditing.</li>
    <li>Use **VPC endpoints** for S3/DynamoDB access to avoid public internet traffic.</li>
    <li>Enable **DNS resolution and DNS hostnames** only if required.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Subnet Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **private subnets** for EC2 instances handling sensitive data.</li>
    <li>Public subnets only for **load balancers** or NAT gateways; no direct internet access to PCI EC2 instances.</li>
    <li>Deploy **multiple AZs** to ensure redundancy and high availability.</li>
    <li>Example:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>AZ1 Private Subnet: 10.0.1.0/24</li>
        <li>AZ2 Private Subnet: 10.0.2.0/24</li>
        <li>Public Subnet (for ALB/NAT): 10.0.0.0/24</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Security Group Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Restrict **inbound traffic** strictly:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Allow SSH (22) only from bastion hosts or via Systems Manager Session Manager.</li>
        <li>Allow application traffic only from approved load balancer security groups.</li>
        <li>No 0.0.0.0/0 inbound rules for PCI EC2 instances.</li>
      </ul>
    </li>
    <li>Restrict **outbound traffic** to required services only (e.g., RDS, S3 VPC endpoints).</li>
    <li>Use **separate SGs** for different tiers: web, app, database.</li>
    <li>Enable **logging and monitoring** via VPC Flow Logs and CloudWatch.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Architecture for PCI EC2 Deployment</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Private EC2 instances in multiple AZs for application and database tiers.</li>
    <li>Public subnets for ALB/NAT Gateway.</li>
    <li>Load balancer SG allows traffic from public internet; EC2 SG allows traffic only from ALB SG.</li>
    <li>Bastion host or Session Manager SG allows SSH access from restricted IP ranges.</li>
    <li>S3 access via VPC endpoint; no public internet access.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-pci-compliant.png" alt="PCI-Compliant EC2 Network Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Additional PCI Considerations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **CloudTrail** for auditing API calls.</li>
    <li>Encrypt all data at rest and in transit (EBS, S3, RDS, TLS).</li>
    <li>Regularly patch EC2 instances and enforce security baseline using **AWS Systems Manager Patch Manager**.</li>
    <li>Implement **Network ACLs** for an additional layer of traffic filtering per subnet.</li>
  </ul>
</section>









<section id="ec2-secrets-rotation" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Rotating Secrets for EC2 Applications Without Downtime</h2>

  <p class="mb-4 text-gray-700">
    Rotating secrets (like database credentials, API keys, or passwords) is critical for security. AWS provides mechanisms to rotate secrets without stopping your EC2 applications, ensuring seamless operation.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Use AWS Secrets Manager</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create secrets in **Secrets Manager** (e.g., DB username/password, API keys).</li>
    <li>Enable **automatic rotation** for supported services (RDS, Redshift, DocumentDB).</li>
    <li>Secrets Manager handles **generating new credentials** and updating the service automatically.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Configure EC2 Application to Use Dynamic Secrets</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **AWS SDK or CLI** to retrieve secrets at runtime instead of storing them on the instance.</li>
    <li>Example: Fetch database password from Secrets Manager in Java:
      <pre class="bg-gray-100 p-2 rounded text-sm">
AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().build();
GetSecretValueRequest request = new GetSecretValueRequest().withSecretId("MyDBSecret");
GetSecretValueResult result = client.getSecretValue(request);
String secret = result.getSecretString();
      </pre>
    </li>
    <li>Load secrets into environment variables or in-memory config dynamically.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Zero-Downtime Secret Rotation Workflow</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Secrets Manager generates new credentials in the background.</li>
    <li>New credentials are updated in the database or service.</li>
    <li>EC2 applications fetch new credentials **without restarting** by:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Polling Secrets Manager at intervals</li>
        <li>Using event-driven updates (e.g., AWS EventBridge trigger)</li>
      </ul>
    </li>
    <li>Old credentials remain valid until new credentials are confirmed working.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Example Architecture</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instance running a web app.</li>
    <li>Application fetches DB password from Secrets Manager at startup and periodically refreshes.</li>
    <li>Secrets Manager rotates DB password automatically using RDS rotation function.</li>
    <li>Application continues operating with zero downtime because old credentials remain valid during transition.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Do not store secrets on EC2 instance disk or code repository.</li>
    <li>Use IAM roles for EC2 to allow access to Secrets Manager.</li>
    <li>Use **short-lived secrets** and frequent rotation for enhanced security.</li>
    <li>Monitor **failed access attempts** via CloudWatch and CloudTrail.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-secrets-rotation.png" alt="EC2 Secrets Rotation Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-public-ami-security" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Using Secure and Trusted Public AMIs</h2>

  <p class="mb-4 text-gray-700">
    Public AMIs can accelerate EC2 deployment, but they may contain vulnerabilities or misconfigurations. Ensuring the security and trustworthiness of public AMIs is critical before using them in production.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Verify the Source</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use AMIs provided by **AWS Marketplace**, official OS vendors (e.g., Amazon Linux, Ubuntu, Red Hat), or verified publishers.</li>
    <li>Check **publisher information, last updated date, and number of downloads** as trust indicators.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Inspect the AMI</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch the AMI in a **sandbox environment** before production deployment.</li>
    <li>Perform **vulnerability scans** using tools like AWS Inspector or third-party scanners.</li>
    <li>Check for **unnecessary software, open ports, and insecure configurations**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Apply Patches and Updates</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Immediately update the OS and installed packages after launching the AMI.</li>
    <li>Create a **custom hardened AMI** for future deployments with all patches applied.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Use IAM and Security Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch EC2 instances with **least-privilege IAM roles**.</li>
    <li>Restrict network access via **security groups** and **NACLs**.</li>
    <li>Enable **CloudTrail and CloudWatch monitoring** to detect unusual behavior.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Workflow for Trusted Public AMIs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Select Ubuntu 22.04 AMI from AWS Marketplace.</li>
    <li>Launch in a sandbox VPC with private subnets.</li>
    <li>Scan using AWS Inspector → fix vulnerabilities.</li>
    <li>Update OS and packages → harden configuration.</li>
    <li>Create a **custom AMI** for production use.</li>
    <li>Deploy multiple EC2 instances from this hardened AMI with restricted SGs and IAM roles.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-public-ami-security.png" alt="Secure Public AMI Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-cost-spike" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Investigating Unexpected EC2 Cost Spikes</h2>

  <p class="mb-4 text-gray-700">
    Sudden increases in EC2 costs can indicate over-provisioning, runaway workloads, misconfigurations, or unplanned usage. Proper monitoring and analysis help identify the root cause and optimize costs.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Monitor Costs and Usage</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **AWS Cost Explorer** to identify which accounts, services, or instance types caused the spike.</li>
    <li>Check **Cost and Usage Reports (CUR)** for detailed instance-level billing.</li>
    <li>Enable **Budgets and Alerts** to get notifications on unexpected usage.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Identify High-Usage Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **CloudWatch metrics** to track CPU, network, and disk usage.</li>
    <li>Identify **idle or underutilized instances** that are still running.</li>
    <li>Check for **newly launched instances** that may have caused increased cost.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Analyze Instance Types and Regions</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check if **expensive instance types** (e.g., C6g, R5) were launched accidentally.</li>
    <li>Review **multi-AZ or multi-region deployments** that may duplicate costs.</li>
    <li>Compare actual usage against **Reserved Instances or Savings Plans** to spot potential savings. </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Remediation Steps</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Stop or terminate **idle or unnecessary instances**.</li>
    <li>Right-size instances based on actual usage metrics.</li>
    <li>Move workloads to **Reserved Instances or Savings Plans** for predictable cost savings.</li>
    <li>Use **Auto Scaling Groups** to dynamically scale workloads up or down.</li>
    <li>Ensure **Spot Instances** are used for non-critical workloads to reduce costs.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Investigation Flow</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Cost spike detected via **AWS Budget alert**.</li>
    <li>Cost Explorer shows increase from EC2 in **us-east-1**, specifically **m5.large** instances.</li>
    <li>CloudWatch reveals two instances were running 24/7 but had <10% CPU utilization.</li>
    <li>Remediation: Stop unnecessary instances, convert remaining instances to Reserved Instances, enable Auto Scaling.</li>
    <li>Result: Cost normalized and predictable, with continuous monitoring in place.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cost-spike.png" alt="EC2 Cost Spike Investigation Flow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-pricing-models" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Choosing EC2 Pricing Models for Compute-Heavy Workloads</h2>

  <p class="mb-4 text-gray-700">
    EC2 offers multiple pricing models. Selecting the right model depends on workload predictability, tolerance for interruptions, and cost optimization goals.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. On-Demand Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Pay per hour/second with no long-term commitment.</li>
    <li>Ideal for **short-lived or unpredictable workloads**.</li>
    <li>Example: Running a compute-heavy batch job occasionally.</li>
    <li>Pros: Flexible, easy to start/stop.</li>
    <li>Cons: Higher cost for continuous workloads.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Reserved Instances (RI)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Commit to 1 or 3 years for lower hourly rates.</li>
    <li>Ideal for **steady, predictable workloads** like a continuous data processing pipeline.</li>
    <li>Example: A web application backend that runs 24/7.</li>
    <li>Pros: Significant cost savings (up to 75%) over On-Demand.</li>
    <li>Cons: Less flexible, requires forecasting usage.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Spot Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Bid for unused EC2 capacity at steep discounts (up to 90%).</li>
    <li>Ideal for **compute-heavy, fault-tolerant, or batch workloads** that can tolerate interruptions.</li>
    <li>Example: Large-scale data processing, simulations, or rendering tasks.</li>
    <li>Pros: Extremely cost-effective.</li>
    <li>Cons: Instances can be terminated with 2 minutes notice; not suitable for critical always-on services.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Choosing the Right Model</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If workload is **critical and predictable** → Reserved Instances for cost savings.</li>
    <li>If workload is **temporary or bursty** → On-Demand for flexibility.</li>
    <li>If workload is **massively parallel and fault-tolerant** → Spot Instances for maximum cost efficiency.</li>
    <li>Hybrid approach: Use a combination:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Reserved Instances for base capacity.</li>
        <li>Spot Instances for additional compute bursts.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Company runs video rendering jobs 24/7:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Reserve RI instances for essential rendering tasks to ensure uptime.</li>
        <li>Use Spot Instances for extra rendering during peak demand to save cost.</li>
      </ul>
    </li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-pricing-models.png" alt="EC2 Pricing Model Comparison" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-instance-right-sizing" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Implementing Instance Right-Sizing at Scale for Microservices</h2>

  <p class="mb-4 text-gray-700">
    Right-sizing EC2 instances ensures you use the optimal instance type for each microservice, reducing costs while maintaining performance. At scale, this requires monitoring, automation, and regular adjustments.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Monitor Utilization Metrics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Collect **CPU, memory, disk, and network usage** for each instance using CloudWatch.</li>
    <li>Set up **detailed metrics** (per microservice, per environment) for visibility.</li>
    <li>Identify underutilized or overutilized instances to guide resizing decisions.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Categorize Microservices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Classify services based on **workload characteristics**: CPU-intensive, memory-intensive, or network-intensive.</li>
    <li>Match service requirements to instance families:  
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>C family → compute-intensive</li>
        <li>R family → memory-intensive</li>
        <li>M family → general-purpose</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Use Automation Tools</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Leverage **AWS Compute Optimizer** to get recommended instance types for each workload.</li>
    <li>Implement **Auto Scaling Groups with multiple instance types** for flexible scaling.</li>
    <li>Automate **resizing workflows** using Lambda or scripts triggered by CloudWatch alarms.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Right-Sizing Workflow</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Step 1: Gather utilization data for all instances over a period (e.g., 2–4 weeks).</li>
    <li>Step 2: Identify overprovisioned or underutilized instances using Compute Optimizer recommendations.</li>
    <li>Step 3: Select optimal instance types for each microservice considering peak load.</li>
    <li>Step 4: Test new instance types in a staging environment.</li>
    <li>Step 5: Update Auto Scaling Groups to use the new instance types and monitor performance.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Microservices: Payment Service (CPU-heavy), Cache Service (Memory-heavy), Reporting Service (Mixed).</li>
    <li>Current setup: All on M5.large → overprovisioned for reporting, underperforming for payment.</li>
    <li>Right-sizing:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Payment → C6g.large</li>
        <li>Cache → R5.large</li>
        <li>Reporting → M5.large</li>
      </ul>
    </li>
    <li>Auto Scaling Groups updated with multiple instance types for flexibility and cost efficiency.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-instance-right-sizing.png" alt="EC2 Instance Right-Sizing Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>





<section id="ec2-auto-scaling-cost-optimization" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Optimizing Idle Auto Scaling Instances</h2>

  <p class="mb-4 text-gray-700">
    Auto Scaling ensures high availability but can sometimes keep instances running idle for long periods, leading to unnecessary costs. Optimizing scaling policies and instance types can reduce costs without affecting availability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Analyze Utilization Metrics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **CloudWatch metrics** (CPU, memory, network, request count) to identify periods of low utilization.</li>
    <li>Check **per-instance metrics** to see which instances are idle most of the day.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Adjust Auto Scaling Policies</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **target tracking policies** instead of static scaling: automatically scale based on actual load.</li>
    <li>Implement **step scaling** with smaller increments to prevent over-provisioning.</li>
    <li>Set **minimum and maximum instance counts** to match real traffic patterns.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Use Spot Instances for Non-Critical Workloads</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run idle or background batch workloads on **Spot Instances** for cost savings.</li>
    <li>Combine **On-Demand or Reserved Instances** for critical services and Spot Instances for extra capacity.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Right-Size Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Analyze instance type usage and switch to **smaller instance types** if current instances are underutilized.</li>
    <li>Use **Compute Optimizer recommendations** to select optimal instance types per workload.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Implement Scheduled Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>For predictable daily patterns, implement **scheduled scaling** to reduce instance count during off-peak hours.</li>
    <li>Example: Reduce web tier instances from 6 → 2 between 12 AM–6 AM and scale up during peak traffic hours.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Workflow</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Auto Scaling web tier has 5 instances always running, but CPU averages 5% most of the day.</li>
    <li>Steps taken:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Analyze CloudWatch metrics → confirm idle periods.</li>
        <li>Switch to smaller instance types (e.g., t3.medium).</li>
        <li>Implement target tracking with CPU at 50% → scales down during low load.</li>
        <li>Add Spot Instances for batch processing jobs.</li>
        <li>Enable scheduled scaling for predictable off-peak hours.</li>
      </ul>
    </li>
    <li>Result: Cost reduced by 40% without affecting availability.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-auto-scaling-cost-optimization.png" alt="Auto Scaling Cost Optimization Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-ci-cd-cost-optimization" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Designing a Cost-Efficient CI/CD Pipeline Using EC2 for Non-Production Environments</h2>

  <p class="mb-4 text-gray-700">
    Running CI/CD pipelines in non-production environments can generate unnecessary costs if instances are always running. Optimizing pipeline infrastructure ensures minimal spend while maintaining reliability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Use Ephemeral or On-Demand EC2 Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Spin up EC2 instances **only when a build or deployment is triggered**.</li>
    <li>Terminate instances automatically after the job completes.</li>
    <li>Use **On-Demand or Spot Instances** depending on job tolerance for interruptions.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Leverage Spot Instances for CI Jobs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run non-critical, parallelizable CI jobs on **Spot Instances** to save costs.</li>
    <li>Configure **fallback to On-Demand** if Spot capacity is unavailable.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Implement Auto Scaling for Build Agents</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Auto Scaling Groups** to dynamically adjust the number of EC2 build agents based on job queue length.</li>
    <li>Terminate idle build agents to avoid running unnecessary instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Use Lightweight Instance Types</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Choose **small instance types** (e.g., t3.micro or t3.small) for non-production CI/CD agents unless builds require high CPU/memory.</li>
    <li>Right-size instances based on historical build metrics.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Automate Pipeline Shutdown</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Schedule **off-hours shutdown** for non-production EC2 instances using CloudWatch Events or Lambda.</li>
    <li>Example: Turn off all non-critical build agents between 8 PM–8 AM.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Pipeline Architecture</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Developer pushes code → triggers **CodePipeline** or Jenkins job.</li>
    <li>Pipeline spins up **On-Demand or Spot EC2 instances** as build agents.</li>
    <li>Build runs, tests execute, artifacts are stored in S3.</li>
    <li>EC2 instances **terminate automatically** after job completion.</li>
    <li>Non-production deployments run on **smaller instances** in a sandbox VPC with restricted access.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ci-cd-pipeline.png" alt="Cost-Efficient EC2 CI/CD Pipeline" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-pending-troubleshoot" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Troubleshooting EC2 Instances Stuck in Pending State</h2>

  <p class="mb-4 text-gray-700">
    An EC2 instance in <strong>pending</strong> state indicates that AWS is attempting to launch it but it hasn't transitioned to <strong>running</strong>. This could be caused by capacity issues, misconfigurations, or network problems. Proper analysis can help resolve it efficiently.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Check Instance Limits and Quotas</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Verify **EC2 instance limits** for the region using the Service Quotas console.</li>
    <li>Ensure you haven’t exceeded **vCPU limits** or other instance type limits.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Check Availability Zone Capacity</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Some instance types may be unavailable in a specific AZ due to capacity constraints.</li>
    <li>Try launching the instance in another **AZ within the same region**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Validate AMI and Instance Configuration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure the **AMI exists** and is available in the selected region.</li>
    <li>Check **instance type compatibility** with the chosen AMI.</li>
    <li>Verify **key pair**, **security group**, and **subnet** configurations.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Inspect Subnet and Networking</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Confirm the **subnet has available IP addresses**.</li>
    <li>Check route tables and NACLs to ensure network restrictions are not causing delays.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Check AWS Health and Events</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Visit **AWS Personal Health Dashboard** to check for any **AZ or service issues**.</li>
    <li>Check **EC2 console events** for messages like “InsufficientInstanceCapacity”.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Use AWS CLI and Logs for Details</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run:  
      <code class="bg-gray-100 px-1 py-0.5 rounded">aws ec2 describe-instances --instance-ids i-xxxxxxxx</code>  
      to check instance state and events.
    </li>
    <li>Inspect **system logs** and **console output** for boot errors.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">7. Remediation Steps</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If **capacity issue**, choose a different **AZ** or **instance type**.</li>
    <li>If **subnet IP exhausted**, expand subnet or select another subnet.</li>
    <li>Double-check AMI, key pair, and networking configurations, then **terminate and relaunch**.</li>
    <li>Contact **AWS Support** if issue persists despite correct configuration.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">8. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Instance stuck in pending in us-east-1a → “InsufficientInstanceCapacity” event.</li>
    <li>Remediation:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Switch instance to us-east-1b → launched successfully.</li>
        <li>Verified subnet had available IPs and security groups configured correctly.</li>
      </ul>
    </li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-pending-troubleshoot.png" alt="EC2 Pending State Troubleshooting" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-health-check-recovery" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Recovering Critical EC2 Instances Failing Health Checks</h2>

  <p class="mb-4 text-gray-700">
    When a critical EC2 instance fails health checks repeatedly, quick recovery is essential to minimize downtime and prevent data loss. Follow these steps to restore availability safely.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Analyze Health Check Failures</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check **EC2 system status checks** (hardware/network) and **instance status checks** (OS level).</li>
    <li>Use **CloudWatch metrics** to determine why health checks are failing (CPU spike, memory pressure, application crash, etc.).</li>
    <li>Inspect **load balancer health checks** if behind ALB/NLB.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Enable Auto Recovery</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>For hardware issues, enable **EC2 Auto Recovery** to automatically migrate the instance to healthy hardware.</li>
    <li>Auto Recovery preserves **instance ID, EBS volumes, and IP configurations**, minimizing data loss risk.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Take Snapshots / Backups</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Before making changes, create **EBS snapshots** of root and data volumes.</li>
    <li>Optional: Use **Amazon Machine Image (AMI)** to capture the instance state for rapid relaunch.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Launch Replacement Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Detach existing EBS volumes if needed and attach them to a new instance.</li>
    <li>Use **same security groups, IAM roles, and network configuration** for consistency.</li>
    <li>Test application functionality before redirecting traffic.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Update Auto Scaling / Load Balancer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If instance is in an **Auto Scaling Group**, replace unhealthy instances automatically.</li>
    <li>Ensure **load balancer health checks** remove failing instances from rotation and add new healthy instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Critical web server fails ALB health checks repeatedly.</li>
    <li>Steps taken:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Enabled EC2 Auto Recovery → instance migrated to healthy hardware.</li>
        <li>Verified root and data EBS volumes are intact.</li>
        <li>ALB automatically routed traffic to healthy instances.</li>
        <li>For extra safety, snapshots were created for backup before recovery.</li>
      </ul>
    </li>
    <li>Result: Downtime minimized, no data loss, service restored quickly.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-health-check-recovery.png" alt="EC2 Health Check Recovery Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-rds-latency-troubleshoot" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Investigating High Latency Between EC2 and RDS</h2>

  <p class="mb-4 text-gray-700">
    High latency between your application on EC2 and RDS can impact user experience. Latency could stem from networking, database load, query inefficiencies, or instance misconfiguration. This section outlines steps to identify and resolve the root cause.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Check Network Configuration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure EC2 and RDS are in the **same VPC** and ideally **same Availability Zone** to reduce network latency.</li>
    <li>Check **security groups** and **NACLs**; misconfigured rules can cause connection delays.</li>
    <li>Verify **DNS resolution** if connecting via RDS endpoint.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Monitor Database Performance Metrics</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **CloudWatch metrics**: CPU, memory, read/write IOPS, DB connections, and network throughput.</li>
    <li>High CPU or I/O saturation could indicate **resource bottlenecks** causing query delays.</li>
    <li>Check **slow query logs** on RDS for inefficient queries.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Analyze Application Queries</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable **query logging** in your application or ORM (e.g., Hibernate SQL logging for Java apps).</li>
    <li>Identify **N+1 query patterns** or repeated queries that increase latency.</li>
    <li>Optimize queries with **indexes, joins, and proper SELECT statements**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Check RDS Instance Type and Scaling</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure RDS instance has **enough CPU/memory** for workload.</li>
    <li>Consider **vertical scaling** (larger instance) or **read replicas** for read-heavy workloads.</li>
    <li>Enable **Enhanced Monitoring** and Performance Insights for detailed diagnostics.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Investigate Connection Management</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **connection pooling** (e.g., HikariCP for Java) to avoid frequent connection creation overhead.</li>
    <li>Verify **max_connections** on RDS to prevent throttling.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2-hosted Java app shows 500ms average query latency to RDS MySQL.</li>
    <li>Steps taken:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Verified EC2 and RDS are in same AZ → network latency <5ms.</li>
        <li>Enabled Performance Insights → discovered heavy full table scans.</li>
        <li>Added appropriate indexes and optimized queries → latency dropped to 50ms.</li>
        <li>Configured HikariCP connection pool to reduce connection overhead.</li>
      </ul>
    </li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-rds-latency-troubleshoot.png" alt="EC2 to RDS Latency Troubleshooting" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>







<section id="ec2-rds-latency-troubleshoot" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Investigating High Latency Between EC2 and RDS</h2>

  <p class="mb-4 text-gray-700">
    When your application running on EC2 shows high latency for queries to RDS, it can be caused by multiple factors: network, database load, inefficient queries, or instance configuration. Identifying the root cause ensures optimal performance and minimal downtime.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Analyze Network Latency</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure EC2 and RDS are in the <strong>same VPC</strong> and preferably the same Availability Zone to reduce latency.</li>
    <li>Use <code>ping</code> or <code>traceroute</code> from EC2 to RDS endpoint to measure network delay.</li>
    <li>Check <strong>security groups and NACLs</strong> for any misconfigurations causing connection delays.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Monitor RDS Performance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use <strong>CloudWatch</strong> metrics for CPU, memory, disk IOPS, and network throughput.</li>
    <li>Enable <strong>Performance Insights</strong> to identify queries causing high load.</li>
    <li>Look for <strong>lock waits</strong>, <strong>long-running transactions</strong>, or max connections reached.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Review Application Queries</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable query logging in the application or ORM (e.g., Hibernate SQL logging).</li>
    <li>Identify N+1 query problems or repeated queries that inflate latency.</li>
    <li>Optimize queries using proper indexes, limiting SELECT columns, and batching requests.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Evaluate RDS Instance Type</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check if the current RDS instance is undersized for the workload.</li>
    <li>Consider vertical scaling (larger instance) or horizontal scaling with read replicas.</li>
    <li>Enable enhanced monitoring to correlate CPU/IO spikes with query latency.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Connection Management</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use connection pooling (e.g., HikariCP for Java) to avoid overhead of creating new connections repeatedly.</li>
    <li>Ensure <strong>max_connections</strong> on RDS is sufficient for concurrent connections.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>A Java application on EC2 reports 500ms average query latency to RDS MySQL.</li>
    <li>Steps taken:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Verified EC2 and RDS are in the same AZ → network latency <5ms.</li>
        <li>Enabled Performance Insights → identified full table scans causing high load.</li>
        <li>Added proper indexes → reduced query latency to 50ms.</li>
        <li>Configured HikariCP connection pool → reduced connection setup time.</li>
      </ul>
    </li>
    <li>Result: Significant reduction in query latency and improved user experience.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-rds-latency-troubleshoot.png" alt="EC2 to RDS Latency Troubleshooting" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-patch-recovery" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Recovering EC2 Instances Stuck During Security Patch Updates</h2>

  <p class="mb-4 text-gray-700">
    Security patch updates are critical but can sometimes cause EC2 instances to become unresponsive due to kernel updates, package conflicts, or reboot issues. Proper recovery procedures prevent downtime and avoid repeated failures.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Verify Instance Status</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check EC2 <strong>system status</strong> and <strong>instance status checks</strong> in the console.</li>
    <li>Use <code>aws ec2 describe-instance-status --instance-ids i-xxxxxxxx</code> to view events and pending updates.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Access the Instance Safely</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If SSH is unavailable, use **AWS Systems Manager Session Manager** to access the instance securely without opening ports.</li>
    <li>Check for processes hanging due to updates or disk space issues in <code>/var/log</code> (e.g., <code>/var/log/yum.log</code> or <code>/var/log/dpkg.log</code>).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Take Backups / Snapshots</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create **EBS snapshots** of the root and data volumes before attempting recovery.</li>
    <li>Optional: Create an **AMI** to capture the current state for rollback if needed.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Recover the Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If system status checks fail, consider **stop and start** the instance to migrate to healthy hardware.</li>
    <li>For stuck package updates:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Boot into **recovery mode** or detach the root volume and attach it to a temporary instance to fix packages.</li>
        <li>Resolve incomplete updates (e.g., <code>yum-complete-transaction</code> or <code>dpkg --configure -a</code>).</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Prevent Repeated Failures</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Test patch updates in a **staging environment** before production.</li>
    <li>Use **AMI snapshots** before automated updates for quick rollback.</li>
    <li>Schedule updates during **maintenance windows** and monitor system status continuously.</li>
    <li>Enable **CloudWatch alarms** for high CPU, disk, or memory usage during patching.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instance hangs after automatic OS patch applied at 3 AM.</li>
    <li>Steps taken:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Accessed instance via Systems Manager Session Manager → identified stuck <code>yum</code> process.</li>
        <li>Created EBS snapshot for safety.</li>
        <li>Stopped and started instance → migrated to healthy host.</li>
        <li>Resolved package conflict → tested updates on staging AMI before reapplying to production.</li>
      </ul>
    </li>
    <li>Result: Instance recovered quickly with minimal downtime and future updates became safe.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-patch-recovery.png" alt="EC2 Patch Update Recovery Workflow" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-ebs-full-disk" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Handling Full EBS Disk on EC2 Without Downtime</h2>

  <p class="mb-4 text-gray-700">
    A full EBS volume can cause application failures, logging issues, or even system instability. The goal is to increase disk capacity or free up space without stopping the instance, ensuring uninterrupted service.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Identify Disk Usage</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check disk space using: <code>df -h</code> to identify full partitions.</li>
    <li>Inspect large files and directories: <code>du -sh /*</code> or <code>ncdu</code> (if installed).</li>
    <li>Check log directories (<code>/var/log</code>) for large or stale log files.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Clean Up Space Safely</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Delete unnecessary temporary files: <code>rm -rf /tmp/*</code>.</li>
    <li>Rotate or truncate logs without deleting critical logs: <code>logrotate</code> or <code>truncate -s 0 /var/log/app.log</code>.</li>
    <li>Remove old backups or snapshots stored on the same volume.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Expand EBS Volume Online</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Navigate to the **EC2 Console → Volumes**, select the volume, and choose **Modify Volume**.</li>
    <li>Increase the size of the EBS volume (e.g., from 20GB → 50GB).</li>
    <li>Resize the filesystem without stopping the instance:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>For **ext4**: <code>sudo resize2fs /dev/xvdf</code></li>
        <li>For **XFS**: <code>sudo xfs_growfs /</code></li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Monitor Disk Usage</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use CloudWatch **disk space alarms** to prevent future full disk scenarios.</li>
    <li>Implement log rotation and automated cleanup scripts.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Production EC2 with 20GB EBS volume reaches 100% utilization → app logs failing.</li>
    <li>Steps taken:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Checked disk usage → /var/log/app.log consuming 10GB.</li>
        <li>Truncated logs → freed 8GB immediately.</li>
        <li>Expanded EBS to 50GB using **Modify Volume** → resized filesystem online.</li>
        <li>Enabled CloudWatch disk alarms → alerts for future high usage.</li>
      </ul>
    </li>
    <li>Result: Disk space issue resolved without stopping the EC2 instance → zero downtime.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ebs-full-disk.png" alt="EC2 Full EBS Disk Recovery" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-nat-private-subnet" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Allowing Private Subnet EC2 Instances to Access the Internet via NAT</h2>

  <p class="mb-4 text-gray-700">
    EC2 instances in a <strong>private subnet</strong> cannot directly access the internet. To enable outbound internet access (e.g., for updates or API calls) while keeping instances private, use a NAT Gateway or NAT Instance.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Choose NAT Type</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li><strong>NAT Gateway (Recommended)</strong>: Managed service, highly available, scales automatically.</li>
    <li><strong>NAT Instance</strong>: Self-managed EC2 instance running NAT AMI, must handle scaling, HA, and updates manually.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Configure NAT Gateway</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Create a **public subnet** in the VPC.</li>
    <li>Launch a **NAT Gateway** in the public subnet with an **Elastic IP**.</li>
    <li>Ensure the NAT Gateway has proper **security group rules** allowing outbound traffic.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Update Route Tables</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Private subnet route table → add a route for <code>0.0.0.0/0</code> pointing to the NAT Gateway.</li>
    <li>Public subnet route table → has default route <code>0.0.0.0/0</code> pointing to Internet Gateway (IGW).</li>
    <li>Ensure private subnet has no direct IGW route → keeps instances unreachable from the internet.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Security Groups and NACLs</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Private EC2 instances: outbound rules to allow required ports (e.g., TCP 80/443) to 0.0.0.0/0 via NAT.</li>
    <li>NAT Gateway/Instance: security group allows inbound traffic from private subnet and outbound to Internet.</li>
    <li>NACLs should allow ephemeral port responses from Internet (1024-65535) back to private instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Private subnet hosts EC2 instances running backend services.</li>
    <li>NAT Gateway launched in public subnet with Elastic IP.</li>
    <li>Private subnet route table updated: <code>0.0.0.0/0 → NAT Gateway</code>.</li>
    <li>Result: EC2 instances can install updates and call APIs without being publicly accessible.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-private-subnet-nat.png" alt="EC2 Private Subnet NAT Setup" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>









<section id="ec2-cross-az-communication" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Troubleshooting EC2-to-EC2 Private IP Communication Across AZs</h2>

  <p class="mb-4 text-gray-700">
    EC2 instances in different Availability Zones (AZs) may fail to communicate over private IP due to network misconfigurations. Proper VPC, subnet, route tables, and security group setup is critical.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Verify VPC and Subnets</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure both EC2 instances are in the **same VPC**; private IPs across VPCs require VPC peering or Transit Gateway.</li>
    <li>Check that each AZ has its own subnet and that **subnets have unique CIDR blocks**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Check Security Groups</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Confirm **inbound rules** allow traffic from the other instance’s private IP or security group.</li>
    <li>Ensure **outbound rules** allow traffic to the destination instance’s private IP or security group.</li>
    <li>Example for two instances in different AZs:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Instance A SG inbound: TCP 8080 from SG of Instance B.</li>
        <li>Instance B SG outbound: TCP 8080 to SG of Instance A.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Inspect Network ACLs (NACLs)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Verify that NACLs for each subnet allow inbound and outbound traffic on required ports and IP ranges.</li>
    <li>Remember NACLs are **stateless**, so both inbound and outbound rules must be explicitly allowed.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Verify Routing</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Check private subnet route tables → should have route to <code>local</code> for VPC CIDR (default route to other AZ subnet).</li>
    <li>Do not rely on IGW or NAT routes for private IP communication; local VPC route handles it automatically.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Test Connectivity</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ping the private IP from one instance to another: <code>ping 10.0.x.x</code>.</li>
    <li>Check specific port connectivity using <code>telnet 10.0.x.x 8080</code> or <code>nc -vz 10.0.x.x 8080</code>.</li>
    <li>Enable VPC Flow Logs to see if traffic is blocked at subnet or security group level.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Two EC2 instances in us-east-1a and us-east-1b cannot communicate on TCP 8080.</li>
    <li>Steps taken:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Verified both instances are in same VPC → correct.</li>
        <li>Security group inbound for Instance A only allowed 127.0.0.1 → updated to allow SG of Instance B.</li>
        <li>Outbound rules and NACL rules verified → allowed traffic.</li>
        <li>Ping and telnet tests successful → connectivity restored.</li>
      </ul>
    </li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-cross-az-communication.png" alt="EC2 Cross-AZ Private IP Troubleshooting" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-sqs-roles" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Securely Allowing EC2 Instances to Consume SQS Messages</h2>

  <p class="mb-4 text-gray-700">
    Directly storing AWS credentials on EC2 is a security risk. The recommended approach is to use <strong>IAM roles</strong> attached to EC2 instances. This allows secure access to SQS without embedding credentials.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Create an IAM Role for EC2</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Go to IAM Console → Roles → Create role → Select **AWS service** → EC2.</li>
    <li>Attach a policy that grants required SQS permissions (SendMessage, ReceiveMessage, DeleteMessage, etc.).</li>
    <li>Example managed policy: <code>AmazonSQSFullAccess</code> (for testing) or create a custom policy with least privilege.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Attach Role to EC2 Instance</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch EC2 → under **IAM role**, select the role created in previous step.</li>
    <li>For existing instances, select the instance → Actions → Security → Modify IAM Role → attach the role.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Least Privilege Policy Example</h3>
  <pre class="bg-gray-100 p-4 rounded text-sm overflow-x-auto text-gray-800">
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "sqs:ReceiveMessage",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
      ],
      "Resource": "arn:aws:sqs:us-east-1:123456789012:my-queue"
    }
  ]
}
  </pre>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Configure EC2 Application to Use Role</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>AWS SDKs (Java, Python, Node.js) automatically retrieve temporary credentials from the EC2 instance metadata service when a role is attached.</li>
    <li>No need to store or hardcode access keys in the application.</li>
    <li>Example in Java using AWS SDK v2:
      <pre class="bg-gray-100 p-2 rounded text-sm text-gray-800">
SqsClient sqs = SqsClient.builder()
                          .region(Region.US_EAST_1)
                          .build();

ReceiveMessageRequest request = ReceiveMessageRequest.builder()
                                                      .queueUrl("https://sqs.us-east-1.amazonaws.com/123456789012/my-queue")
                                                      .maxNumberOfMessages(10)
                                                      .build();

ReceiveMessageResponse response = sqs.receiveMessage(request);
      </pre>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Security Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **least privilege** – grant only necessary SQS actions and limit resource ARNs.</li>
    <li>Rotate credentials automatically – IAM roles provide temporary credentials that rotate automatically.</li>
    <li>Enable **CloudTrail** to monitor access and SQS API calls for auditing.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instances process messages from a queue `order-processing-queue`.</li>
    <li>IAM role attached with permissions to receive and delete messages only from that queue.</li>
    <li>Application uses AWS SDK → automatically uses temporary credentials → securely consumes messages.</li>
    <li>No static AWS credentials stored on the instance → minimal security risk.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-sqs-roles.png" alt="EC2 SQS Role Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-elasticache-low-latency" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Architecting Low-Latency EC2 Access to ElastiCache Across AZs</h2>

  <p class="mb-4 text-gray-700">
    When EC2 instances need to access ElastiCache in a different Availability Zone (AZ), network latency and availability must be carefully considered. Proper placement, subnet design, and endpoint configuration are key.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Use Multi-AZ ElastiCache Deployment</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Enable Multi-AZ for Redis or Memcached clusters to improve availability and failover.</li>
    <li>ElastiCache provides **primary and replica nodes** across AZs automatically.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Placement Considerations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch EC2 instances in the **same VPC** as ElastiCache.</li>
    <li>Place EC2 instances **in the same AZ as a replica** to minimize latency.</li>
    <li>If cross-AZ access is necessary, ensure high-bandwidth subnets and route tables are correctly configured.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Subnet and Security Group Configuration</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>ElastiCache subnet group should include all subnets in the AZs where your EC2 instances reside.</li>
    <li>Security groups:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>ElastiCache SG inbound: allow traffic from EC2 SG on Redis/Memcached ports (6379/11211).</li>
        <li>EC2 SG outbound: allow traffic to ElastiCache SG.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. DNS Endpoint Usage</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use ElastiCache **cluster endpoints** (for Redis primary/replica) or **configuration endpoint** (for Memcached) in your application configuration.</li>
    <li>Endpoints automatically resolve to nodes within your VPC, ensuring proper routing.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Monitoring and Failover</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **CloudWatch metrics** to monitor latency, CPU, and memory usage.</li>
    <li>Enable **automatic failover** for Redis Multi-AZ to ensure high availability.</li>
    <li>Optionally, implement client-side retry logic for transient network issues.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 application in AZ us-east-1a needs access to Redis cluster in us-east-1b.</li>
    <li>Steps taken:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>ElastiCache Redis deployed with Multi-AZ enabled → primary in 1b, replica in 1a.</li>
        <li>EC2 SG outbound allowed traffic to Redis SG on port 6379.</li>
        <li>Application connects to **Redis configuration endpoint** → automatically resolves to replica in same AZ → minimal latency.</li>
        <li>CloudWatch monitors latency → alarms set for >5ms latency spikes.</li>
      </ul>
    </li>
    <li>Result: Low-latency, highly available Redis access across AZs without manual IP management.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-elasticache-low-latency.png" alt="EC2 ElastiCache Cross-AZ Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>










<section id="ec2-multi-region" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Reducing Latency with Multi-Region EC2 Deployment</h2>

  <p class="mb-4 text-gray-700">
    When users are geographically distant from your EC2 instances, latency increases. Deploying EC2 instances in multiple regions closer to users reduces latency and improves availability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Deploy EC2 Instances in Multiple Regions</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch EC2 instances in regions closer to users (e.g., Asia-Pacific (Singapore), Europe (Frankfurt), US-East-1).</li>
    <li>Use the same application stack and configurations in each region for consistency.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Use Global Load Balancing</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use <strong>Amazon Route 53</strong> with latency-based routing to direct users to the closest region.</li>
    <li>Optionally, use <strong>CloudFront CDN</strong> to cache static content near users globally.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Database and State Considerations</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>For global applications, consider **multi-region databases** or read replicas (e.g., RDS Read Replicas, DynamoDB Global Tables) to reduce cross-region latency.</li>
    <li>Keep EC2 instances stateless where possible; store state in shared, globally accessible storage (S3, ElastiCache with cross-region replication).</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Synchronization and Replication</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Ensure configuration, application code, and content are synchronized across regions using CI/CD pipelines and automated deployment scripts.</li>
    <li>Enable cross-region replication for S3 buckets and caches as needed.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Users in Asia report 300ms latency to EC2 in US-East-1.</li>
    <li>Deploy additional EC2 instances in ap-southeast-1 (Singapore) region.</li>
    <li>Configure Route 53 latency-based routing → traffic automatically directed to Singapore for Asian users.</li>
    <li>RDS in US-East-1 → create read replica in Singapore → reduce cross-region database latency.</li>
    <li>Result: Average latency reduced to ~50ms for Asia users → better performance and user experience.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-multi-region.png" alt="Multi-Region EC2 Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>









<section id="ec2-auto-healing" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Designing Auto-Healing EC2 Architecture for Microservices</h2>

  <p class="mb-4 text-gray-700">
    Auto-healing ensures that unhealthy EC2 instances are automatically replaced without impacting application availability. Integrating Auto Scaling Groups (ASG), Application Load Balancers (ALB), and CloudWatch alarms is key to achieving this.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Launch EC2 Instances in Auto Scaling Group</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Define an **Auto Scaling Group** with minimum, maximum, and desired instance counts.</li>
    <li>Attach EC2 launch template specifying AMI, instance type, security groups, and IAM roles.</li>
    <li>Enable **health checks** using ELB health checks or EC2 instance status checks.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Integrate with Application Load Balancer (ALB)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Attach the ASG to an **ALB target group** for your microservices endpoints.</li>
    <li>ALB distributes traffic to healthy EC2 instances automatically.</li>
    <li>Unhealthy instances fail ALB health checks → ASG terminates and replaces them.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Configure CloudWatch Alarms</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Set up **CloudWatch metrics** monitoring CPU, memory, disk, or custom application metrics.</li>
    <li>Create **alarms** that trigger Auto Scaling policies:
      <ul class="list-disc list-inside ml-6 space-y-1">
        <li>Scale-out: add instances when CPU > 70% for 5 minutes.</li>
        <li>Scale-in: remove instances when CPU < 30% for 5 minutes.</li>
        <li>Replace unhealthy instances automatically.</li>
      </ul>
    </li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Auto-Healing Workflow</h3>
  <ol class="list-decimal list-inside ml-4 space-y-2 text-gray-700">
    <li>ALB health check fails on an instance → marks it unhealthy.</li>
    <li>ASG detects unhealthy instance → terminates it.</li>
    <li>ASG launches a new EC2 instance based on the launch template.</li>
    <li>New instance registers with ALB → traffic automatically routed.</li>
    <li>CloudWatch monitors metrics to trigger scaling events or detect failures.</li>
  </ol>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Microservices app running in an ASG with 3 EC2 instances behind an ALB.</li>
    <li>ALB health check fails on instance #2 → CloudWatch logs detect high CPU.</li>
    <li>ASG terminates instance #2 → launches a replacement instance automatically.</li>
    <li>Traffic continues seamlessly through ALB to healthy instances.</li>
    <li>Scaling policies ensure more instances spin up during peak load and scale down during idle periods.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-auto-healing.png" alt="Auto-Healing EC2 Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>






<section id="ec2-blue-green" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Blue-Green Deployment for EC2 Services Without Downtime</h2>

  <p class="mb-4 text-gray-700">
    Blue-Green Deployment allows you to deploy a new version of your application (green) while keeping the current version (blue) running. Traffic is switched gradually to the new version to ensure zero downtime.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Prepare Blue and Green Environments</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Blue environment: currently running EC2 instances serving production traffic.</li>
    <li>Green environment: new EC2 instances with updated application version, identical configuration (AMI, instance type, security groups, IAM roles).</li>
    <li>Both environments deployed behind the same **Application Load Balancer (ALB)**.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Deploy the Green Environment</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Launch new EC2 instances in the same Auto Scaling Group or a separate ASG for green.</li>
    <li>Ensure instances are registered with the ALB **target group** but initially receive zero traffic.</li>
    <li>Run smoke tests on green environment to verify functionality.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Switch Traffic Using ALB</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>ALB supports multiple target groups → blue and green can be target groups.</li>
    <li>Update **ALB listener rules** to point traffic gradually to green target group.</li>
    <li>Monitor metrics and logs to ensure green handles requests correctly.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Rollback Strategy</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>If issues are detected, switch ALB listener back to blue target group → instant rollback.</li>
    <li>Green environment can be terminated after successful validation or kept as standby for future deployments.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Blue environment running v1.0 of a microservices app behind ALB target group "blue-group".</li>
    <li>Green environment deployed with v2.0 in "green-group" → tested internally.</li>
    <li>ALB listener gradually shifts 100% of traffic to green-group after verification.</li>
    <li>If v2.0 fails → switch back to blue-group instantly → zero downtime for users.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Best Practices</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **same VPC, subnets, and security groups** for both environments to simplify routing.</li>
    <li>Automate deployment using **CI/CD pipelines** (CodeDeploy, GitHub Actions, Jenkins, or Terraform).</li>
    <li>Enable **health checks** on ALB to automatically remove unhealthy instances during the switch.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-blue-green.png" alt="Blue-Green Deployment Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>












<section id="ec2-ecs-eks" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Running Containerized Applications on ECS/EKS Using EC2</h2>

  <p class="mb-4 text-gray-700">
    EC2 instances can host containerized applications through <strong>Amazon ECS (Elastic Container Service)</strong> or <strong>Amazon EKS (Elastic Kubernetes Service)</strong>. Efficient use of EC2 ensures cost-effectiveness, scalability, and high availability.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. ECS with EC2 Launch Type</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **EC2 launch type** to run ECS tasks on EC2 instances in your cluster.</li>
    <li>Deploy ECS Cluster → register EC2 instances using ECS optimized AMI.</li>
    <li>Define **task definitions** specifying container images, CPU, memory, port mappings, and environment variables.</li>
    <li>Tasks are scheduled automatically by ECS on available EC2 instances.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. EKS with EC2 Worker Nodes</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy **EKS cluster** → create **node groups** of EC2 instances.</li>
    <li>Use Kubernetes **Deployments, StatefulSets, and Services** to manage pods on EC2 nodes.</li>
    <li>Configure **autoscaling** at node group level using Cluster Autoscaler and pod level using Horizontal Pod Autoscaler.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Efficient EC2 Usage</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Choose instance types based on container workload (CPU vs memory intensive).</li>
    <li>Enable **EC2 Auto Scaling** → add/remove instances based on container demand.</li>
    <li>Use **Spot Instances** for non-critical tasks to reduce costs.</li>
    <li>Monitor cluster metrics using **CloudWatch** or **Prometheus/Grafana** to optimize utilization.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Networking and Security</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>EC2 instances should reside in **private subnets** for security.</li>
    <li>Use **ALB/NLB** for service exposure and load balancing across containers.</li>
    <li>Assign **IAM roles** to EC2 instances for tasks/pods needing AWS API access.</li>
    <li>Use **security groups and network policies** to restrict container traffic.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Example Scenario</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>ECS cluster with 3 t3.medium EC2 instances hosting a microservices app in Docker containers.</li>
    <li>ALB routes HTTP traffic to ECS services → each service runs multiple tasks for high availability.</li>
    <li>EC2 Auto Scaling adds instances during peak load → CloudWatch CPU/Memory alarms trigger scaling.</li>
    <li>Spot instances used for batch processing tasks → cost savings without affecting primary services.</li>
    <li>EKS scenario: EC2 worker nodes in private subnets → Kubernetes manages pod scheduling, scaling, and service discovery.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-ecs-eks.png" alt="ECS/EKS EC2 Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>












<section id="ec2-gpu-ml" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Running GPU Instances for ML Inference on EC2</h2>

  <p class="mb-4 text-gray-700">
    Machine Learning workloads often require GPU instances (e.g., p3, g4, g5) for fast inference. Efficient scaling and cost optimization are critical because GPU instances are expensive.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Choosing GPU Instance Types</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>P3 instances: high-performance NVIDIA V100 GPUs → suitable for heavy training or inference.</li>
    <li>G4/G5 instances: NVIDIA T4/A10G → optimized for inference and real-time workloads.</li>
    <li>Pick instance type based on workload size, batch inference, and memory requirements.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Scaling GPU Instances</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **EC2 Auto Scaling Groups (ASG)** with GPU instance types.</li>
    <li>Configure **CloudWatch alarms** on GPU utilization, CPU, or memory to trigger scale-out/scale-in events.</li>
    <li>Consider **mixed-instance policies** → mix GPU and CPU instances to reduce costs when GPU load is low.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Cost Optimization Strategies</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **Spot GPU instances** for non-critical batch inference → up to 70–90% cost savings.</li>
    <li>Use **Elastic Inference (EI)** for EC2 or SageMaker endpoints to attach fractional GPUs instead of full GPU instances.</li>
    <li>Leverage **Auto Scaling with mixed-instance types** to ensure minimum necessary GPU usage.</li>
    <li>Turn off unused GPU instances during idle hours using scheduled scaling policies.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Architecture Example</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>ML inference service deployed on **G4 EC2 instances** in an Auto Scaling Group behind an ALB.</li>
    <li>CloudWatch monitors GPU utilization → scales out additional instances during peak inference load.</li>
    <li>Spot instances handle batch jobs → CPU-only instances serve low-priority requests.</li>
    <li>Result: High performance, low latency inference while minimizing GPU costs.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-gpu-ml.png" alt="GPU EC2 Auto Scaling Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>








<section id="ec2-multi-tenant" class="bg-white rounded-lg shadow p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4">Designing Multi-Tenant EC2 Architecture with Database and Caching</h2>

  <p class="mb-4 text-gray-700">
    Multi-tenant applications allow multiple customers (tenants) to share the same compute infrastructure while maintaining isolation at the data layer. Proper design ensures security, scalability, and efficient resource utilization.
  </p>

  <h3 class="text-xl font-semibold mb-2">1. Compute Layer (EC2)</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Run application servers on **EC2 Auto Scaling Groups** to handle variable load.</li>
    <li>Use **stateless application design** → tenant-specific state stored in database/cache, not on instance.</li>
    <li>Tag instances by environment (prod/staging) or workload type for monitoring and cost tracking.</li>
    <li>Optional: Use **ECS/EKS on EC2** for containerized multi-tenant services.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">2. Database Layer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Choose **shared database with tenant isolation** via a `tenant_id` column or **separate schema per tenant**.</li>
    <li>Use **RDS (PostgreSQL/MySQL)** with read replicas for high availability.</li>
    <li>Ensure **encrypted connections** and tenant-specific access policies.</li>
    <li>Example: Table `orders` → column `tenant_id` ensures each tenant sees only their data.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">3. Caching Layer</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **ElastiCache (Redis or Memcached)** to store frequently accessed tenant data.</li>
    <li>Partition cache by tenant ID or use **namespacing keys** (`tenant:<id>:session`) to avoid collisions.</li>
    <li>Shared cache reduces EC2 memory usage while maintaining tenant isolation.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">4. Networking and Security</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Deploy EC2, RDS, and ElastiCache in **private subnets** within the same VPC.</li>
    <li>Use **security groups** to restrict traffic: only app instances can access database/cache.</li>
    <li>Optionally, use **VPC endpoints** for secure S3 access per tenant.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">5. Monitoring and Isolation</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Use **CloudWatch metrics** to monitor CPU, memory, database connections, and cache hits per instance or tenant.</li>
    <li>Use **tags or tenant IDs in logs** to trace and isolate issues without affecting other tenants.</li>
    <li>Implement rate limiting per tenant to prevent noisy neighbor problems.</li>
  </ul>

  <h3 class="text-xl font-semibold mb-2 mt-4">6. Example Architecture</h3>
  <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
    <li>Single EC2 Auto Scaling Group hosts all tenant app instances (stateless).</li>
    <li>Shared RDS database with `tenant_id` column for isolation → read replicas for scaling.</li>
    <li>Shared Redis cache → tenant-key namespacing (`tenant:123:session`) for session storage.</li>
    <li>ALB routes traffic → CloudWatch monitors instance health, database connections, and cache utilization.</li>
    <li>Cost efficiency: compute resources are shared; each tenant has isolated logical data and session space.</li>
  </ul>

  <div class="mt-4">
    <img src="images/ec2-multi-tenant.png" alt="Multi-Tenant EC2 Architecture" class="w-full max-w-xl mx-auto rounded shadow">
  </div>
</section>










   
  </main>

  <!-- Footer -->
  <footer class="bg-gray-100 text-gray-600 mt-10 p-6 text-center">
    <p>&copy; 2025 My Tutorials. All rights reserved.</p>
  </footer>

 
</body>
</html>
